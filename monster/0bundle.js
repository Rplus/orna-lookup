var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s,i;function c(t,e){return s||(s=document.createElement("a")),s.href=e,t===s.href}function u(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function m(){return p(" ")}function g(){return p("")}function $(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function k(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}function y(t){i=t}function _(){if(!i)throw new Error("Function called outside component initialization");return i}const w=[],x=[],z=[],E=[],j=Promise.resolve();let S=!1;function O(t){z.push(t)}const N=new Set;let B=0;function C(){const t=i;do{for(;B<w.length;){const t=w[B];B++,y(t),P(t.$$)}for(y(null),w.length=0,B=0;x.length;)x.pop()();for(let t=0;t<z.length;t+=1){const e=z[t];N.has(e)||(N.add(e),e())}z.length=0}while(w.length);for(;E.length;)E.pop()();S=!1,N.clear(),y(t)}function P(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const A=new Set;let D;function L(){D={r:0,c:[],p:D}}function R(){D.r||r(D.c),D=D.p}function T(t,e){t&&t.i&&(A.delete(t),t.i(e))}function J(t,e,n,r){if(t&&t.o){if(A.has(t))return;A.add(t),D.c.push((()=>{A.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function F(t,e){const n=e.token={};function r(t,r,o,l){if(e.token!==n)return;e.resolved=l;let s=e.ctx;void 0!==o&&(s=s.slice(),s[o]=l);const i=t&&(e.current=t)(s);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(L(),J(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),R())})):e.block.d(1),i.c(),T(i,1),i.m(e.mount(),e.anchor),c=!0),e.block=i,e.blocks&&(e.blocks[r]=i),c&&C()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=_();if(t.then((t=>{y(n),r(e.then,1,e.value,t),y(null)}),(t=>{if(y(n),r(e.catch,2,e.error,t),y(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var o}const M="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function H(t){t&&t.c()}function I(t,n,l,s){const{fragment:i,on_mount:c,on_destroy:u,after_update:a}=t.$$;i&&i.m(n,l),s||O((()=>{const n=c.map(e).filter(o);u?u.push(...n):r(n),t.$$.on_mount=[]})),a.forEach(O)}function q(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function G(t,e){-1===t.$$.dirty[0]&&(w.push(t),S||(S=!0,j.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(e,o,l,s,c,u,a,d=[-1]){const h=i;y(e);const p=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(h?h.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||h.$$.root};a&&a(p.root);let m=!1;if(p.ctx=l?l(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),m&&G(e,t)),n})):[],p.update(),m=!0,r(p.before_update),p.fragment=!!s&&s(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(f)}else p.fragment&&p.fragment.c();o.intro&&T(e.$$.fragment),I(e,o.target,o.anchor,o.customElement),C()}y(h)}class U{$destroy(){q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const W={Bleeding:"流血",Frozen:"冰凍",Burning:"燃燒",Asleep:"入睡",Paralyzed:"麻痺",Blind:"致盲",Stunned:"暈眩",Rot:"腐敗",Blight:"枯萎",Petrified:"石化",Poisoned:"中毒",Drenched:"濕滑",Cursed:"詛咒",Toxic:"劇毒",Lulled:"安份",Dark:"闇",Water:"水",Fire:"火",Physical:"物",Holy:"光",Earthen:"土",Lightning:"雷",Dragon:"龍",Arcane:"奧",weak_to:"弱點",immune_to:"免疫",resistant_to:"抗性",immune_to_status:"狀態免疫",type:"類別",gives:"附與",causes:"造成",element:"元素"};function K(t){return W[t]||t}function V(t){return{value:t,label:K(t)}}function X(t,e,n){const r=t.slice();return r[3]=e[n],r}function Y(t){let e,n,r,o,l=t[3].prop+"",s=t[3].value+"";return{c(){e=h("div"),n=p(l),r=p(": "),o=p(s)},m(t,l){a(t,e,l),u(e,n),u(e,r),u(e,o)},p(t,e){2&e&&l!==(l=t[3].prop+"")&&k(n,l),2&e&&s!==(s=t[3].value+"")&&k(o,s)},d(t){t&&f(e)}}}function Z(e){let n,r,o,l,s,i,c,g,$,v,y,_,w,x,z,E,j,S,O,N=e[0].zh+"",B=e[0].name+"",C=e[0].tier+"",P=JSON.stringify(e[0],null,2)+"",A=e[1],D=[];for(let t=0;t<A.length;t+=1)D[t]=Y(X(e,A,t));return{c(){n=h("dt"),r=h("a"),o=h("ruby"),l=h("rb"),s=p(N),i=m(),c=h("rt"),g=p(B),v=m(),y=h("sup"),_=p("★"),w=p(C),x=m(),z=h("dd");for(let t=0;t<D.length;t+=1)D[t].c();E=m(),j=h("details"),S=h("pre"),O=p(P),b(r,"href",$="https://orna.guide/skills?show="+e[0].id),b(r,"target","orna.guide"),b(j,"class","skill-details")},m(t,e){a(t,n,e),u(n,r),u(r,o),u(o,l),u(l,s),u(o,i),u(o,c),u(c,g),u(n,v),u(n,y),u(y,_),u(y,w),a(t,x,e),a(t,z,e);for(let t=0;t<D.length;t+=1)D[t].m(z,null);u(z,E),u(z,j),u(j,S),u(S,O)},p(t,[e]){if(1&e&&N!==(N=t[0].zh+"")&&k(s,N),1&e&&B!==(B=t[0].name+"")&&k(g,B),1&e&&$!==($="https://orna.guide/skills?show="+t[0].id)&&b(r,"href",$),1&e&&C!==(C=t[0].tier+"")&&k(w,C),2&e){let n;for(A=t[1],n=0;n<A.length;n+=1){const r=X(t,A,n);D[n]?D[n].p(r,e):(D[n]=Y(r),D[n].c(),D[n].m(z,E))}for(;n<D.length;n+=1)D[n].d(1);D.length=A.length}1&e&&P!==(P=JSON.stringify(t[0],null,2)+"")&&k(O,P)},i:t,o:t,d(t){t&&f(n),t&&f(x),t&&f(z),d(D,t)}}}function tt(t,e,n){let r,{sid:o}=e,l={};return t.$$set=t=>{"sid"in t&&n(2,o=t.sid)},t.$$.update=()=>{4&t.$$.dirty&&n(0,l=window.skills.find((t=>t.id===o))),1&t.$$.dirty&&n(1,r=["type","gives","causes","element"].map((t=>{let e=l[t];return e?(e.map?e=e.map(K):"string"==typeof e&&(e=K(e)),{prop:K(t),value:e}):null})).filter(Boolean))},[l,r,o]}class et extends U{constructor(t){super(),Q(this,t,tt,Z,l,{sid:2})}}const{Boolean:nt}=M;function rt(t,e,n){const r=t.slice();return r[2]=e[n],r}function ot(t,e,n){const r=t.slice();return r[5]=e[n],r}function lt(t,e,n){const r=t.slice();return r[8]=e[n],r}function st(t,e,n){const r=t.slice();return r[11]=e[n],r}function it(e){let n,r,o,l=e[11]+"";return{c(){n=p(l),r=m(),o=h("br")},m(t,e){a(t,n,e),a(t,r,e),a(t,o,e)},p:t,d(t){t&&f(n),t&&f(r),t&&f(o)}}}function ct(t){let e,n,r,o,l=t[8].name+"",s=t[8].value,i=[];for(let e=0;e<s.length;e+=1)i[e]=it(st(t,s,e));return{c(){e=h("dt"),n=p(l),r=h("dd");for(let t=0;t<i.length;t+=1)i[t].c();o=m(),b(e,"class","svelte-1jd0zr1"),b(r,"class","svelte-1jd0zr1")},m(t,l){a(t,e,l),u(e,n),a(t,r,l);for(let t=0;t<i.length;t+=1)i[t].m(r,null);u(r,o)},p(t,e){if(2&e){let n;for(s=t[8].value,n=0;n<s.length;n+=1){const l=st(t,s,n);i[n]?i[n].p(l,e):(i[n]=it(l),i[n].c(),i[n].m(r,o))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}},d(t){t&&f(e),t&&f(r),d(i,t)}}}function ut(t){let e,n=t[0].skills_effect,r=[];for(let e=0;e<n.length;e+=1)r[e]=at(ot(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=g()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);a(t,e,n)},p(t,o){if(1&o){let l;for(n=t[0].skills_effect,l=0;l<n.length;l+=1){const s=ot(t,n,l);r[l]?r[l].p(s,o):(r[l]=at(s),r[l].c(),r[l].m(e.parentNode,e))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(t){d(r,t),t&&f(e)}}}function at(t){let e,n,r,o,l,s,i,c,d,g,$=t[5].label+"";return{c(){e=h("li"),n=h("label"),r=h("input"),o=m(),l=p($),s=m(),i=h("a"),c=p("↗"),g=m(),b(r,"type","checkbox"),b(i,"href",d="https://rplus.github.io/orna-lookup/?prevents="+t[5].value),b(i,"target","ornagle"),b(i,"class","svelte-1jd0zr1"),b(n,"class","svelte-1jd0zr1"),b(e,"class","svelte-1jd0zr1")},m(t,f){a(t,e,f),u(e,n),u(n,r),u(n,o),u(n,l),u(n,s),u(n,i),u(i,c),u(e,g)},p(t,e){1&e&&$!==($=t[5].label+"")&&k(l,$),1&e&&d!==(d="https://rplus.github.io/orna-lookup/?prevents="+t[5].value)&&b(i,"href",d)},d(t){t&&f(e)}}}function ft(t){let e,n,r,o,l,s=t[0].skills,i=[];for(let e=0;e<s.length;e+=1)i[e]=dt(rt(t,s,e));const c=t=>J(i[t],1,1,(()=>{i[t]=null}));return{c(){e=h("details"),n=h("summary"),n.textContent="Skill Details",r=m(),o=h("div");for(let t=0;t<i.length;t+=1)i[t].c();e.open=!0},m(t,s){a(t,e,s),u(e,n),u(e,r),u(e,o);for(let t=0;t<i.length;t+=1)i[t].m(o,null);l=!0},p(t,e){if(1&e){let n;for(s=t[0].skills,n=0;n<s.length;n+=1){const r=rt(t,s,n);i[n]?(i[n].p(r,e),T(i[n],1)):(i[n]=dt(r),i[n].c(),T(i[n],1),i[n].m(o,null))}for(L(),n=s.length;n<i.length;n+=1)c(n);R()}},i(t){if(!l){for(let t=0;t<s.length;t+=1)T(i[t]);l=!0}},o(t){i=i.filter(nt);for(let t=0;t<i.length;t+=1)J(i[t]);l=!1},d(t){t&&f(e),d(i,t)}}}function dt(t){let e,n;return e=new et({props:{sid:t[2]}}),{c(){H(e.$$.fragment)},m(t,r){I(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.sid=t[2]),e.$set(r)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){q(e,t)}}}function ht(t){let e,n,r,o,l,s,i,g,$,v,y,_,w,x,z,E,j,S,O,N,B,C,P,A,D,F,M,H,I,q,G,Q,U,W,K,V,X=t[0].id+"",Y=t[0].zh+"",Z=t[0].name+"",tt=t[0].tier+"",et=JSON.stringify(t[0],null,2)+"",nt=t[1],rt=[];for(let e=0;e<nt.length;e+=1)rt[e]=ct(lt(t,nt,e));let ot=t[0].skills_effect&&ut(t),st=t[0].skills&&ft(t);return{c(){e=h("section"),n=h("header"),r=p("#"),o=p(X),l=p(" -\n    "),s=h("a"),i=h("ruby"),g=h("rb"),$=p(Y),v=m(),y=h("rt"),_=p(Z),x=m(),z=h("sup"),E=p("★"),j=p(tt),S=m(),O=h("img"),C=m(),P=h("div"),A=h("dl");for(let t=0;t<rt.length;t+=1)rt[t].c();D=m(),F=h("ul"),M=h("li"),M.innerHTML="Debuffs\n        <hr/>",H=m(),ot&&ot.c(),I=m(),q=h("hr"),G=m(),st&&st.c(),Q=m(),U=h("details"),W=h("pre"),K=p(et),b(s,"href",w="https://orna.guide/monsters?show="+t[0].id),b(s,"target","orna.guide"),b(O,"class","avatar svelte-1jd0zr1"),c(O.src,N="https://playorna.com/static/img/"+t[0].image)||b(O,"src",N),b(O,"alt",B=t[0].zh),b(M,"class","svelte-1jd0zr1"),b(P,"class","info flex text-start svelte-1jd0zr1")},m(t,c){a(t,e,c),u(e,n),u(n,r),u(n,o),u(n,l),u(n,s),u(s,i),u(i,g),u(g,$),u(i,v),u(i,y),u(y,_),u(n,x),u(n,z),u(z,E),u(z,j),u(e,S),u(e,O),u(e,C),u(e,P),u(P,A);for(let t=0;t<rt.length;t+=1)rt[t].m(A,null);u(P,D),u(P,F),u(F,M),u(F,H),ot&&ot.m(F,null),u(e,I),u(e,q),u(e,G),st&&st.m(e,null),u(e,Q),u(e,U),u(U,W),u(W,K),V=!0},p(t,[n]){if((!V||1&n)&&X!==(X=t[0].id+"")&&k(o,X),(!V||1&n)&&Y!==(Y=t[0].zh+"")&&k($,Y),(!V||1&n)&&Z!==(Z=t[0].name+"")&&k(_,Z),(!V||1&n&&w!==(w="https://orna.guide/monsters?show="+t[0].id))&&b(s,"href",w),(!V||1&n)&&tt!==(tt=t[0].tier+"")&&k(j,tt),(!V||1&n&&!c(O.src,N="https://playorna.com/static/img/"+t[0].image))&&b(O,"src",N),(!V||1&n&&B!==(B=t[0].zh))&&b(O,"alt",B),2&n){let e;for(nt=t[1],e=0;e<nt.length;e+=1){const r=lt(t,nt,e);rt[e]?rt[e].p(r,n):(rt[e]=ct(r),rt[e].c(),rt[e].m(A,null))}for(;e<rt.length;e+=1)rt[e].d(1);rt.length=nt.length}t[0].skills_effect?ot?ot.p(t,n):(ot=ut(t),ot.c(),ot.m(F,null)):ot&&(ot.d(1),ot=null),t[0].skills?st?(st.p(t,n),1&n&&T(st,1)):(st=ft(t),st.c(),T(st,1),st.m(e,Q)):st&&(L(),J(st,1,1,(()=>{st=null})),R()),(!V||1&n)&&et!==(et=JSON.stringify(t[0],null,2)+"")&&k(K,et)},i(t){V||(T(st),V=!0)},o(t){J(st),V=!1},d(t){t&&f(e),d(rt,t),ot&&ot.d(),st&&st.d()}}}function pt(t,e,n){let{monster:r}=e,o=["weak_to","immune_to","resistant_to","immune_to_status"].map((t=>{let e=r[t];return e?(e.map&&(e=e.map(K)),{prop:t,name:K(t),value:e}):null})).filter(Boolean);return t.$$set=t=>{"monster"in t&&n(0,r=t.monster)},[r,o]}class mt extends U{constructor(t){super(),Q(this,t,pt,ht,l,{monster:0})}}function gt(t,e){const n=["name","zh","image","type","element","description"];[t,e].forEach((t=>{t.forEach((t=>{for(let e in t)t[e]?-1===n.indexOf(e)&&(t[e]=JSON.parse(t[e])):delete t[e],t.zh||(t.zh=t.name)}))}));return t.forEach((t=>{if(!t.skills)return;let n=[...new Set(t.skills.map((t=>{return(n=t,e.find((t=>t.id===n)))?.causes;var n})).filter(Boolean).flat())];n.length&&(t.skills_effect=n.map(V).sort(((t,e)=>t.label.localeCompare(e.label))))})),{monsters:t,skills:e}}function $t(t,e,n){const r=t.slice();return r[1]=e[n],r}function bt(e){let n,r,o=e[10].message+"";return{c(){var t,e,l;n=h("p"),r=p(o),t="color",e="red",n.style.setProperty(t,e,l?"important":"")},m(t,e){a(t,n,e),u(n,r)},p:t,i:t,o:t,d(t){t&&f(n)}}}function kt(t){let e,n,o,l,s,i,c,p,g,k,y,_,w,x=t[0],z=[];for(let e=0;e<x.length;e+=1)z[e]=vt($t(t,x,e));return k=new mt({props:{monster:t[1]}}),{c(){e=h("form"),n=h("input"),o=m(),l=h("datalist");for(let t=0;t<z.length;t+=1)z[t].c();s=m(),i=h("input"),c=m(),p=h("hr"),g=m(),H(k.$$.fragment),b(n,"list","monster_name"),b(n,"type","search"),b(n,"pattern","[1-5]?[0-9]?[0-9]"),b(n,"title","1~500 數字"),b(l,"id","monster_name"),b(i,"type","submit"),i.value="Q",b(e,"class","form")},m(r,f){a(r,e,f),u(e,n),v(n,t[2]),u(e,o),u(e,l);for(let t=0;t<z.length;t+=1)z[t].m(l,null);var d;u(e,s),u(e,i),a(r,c,f),a(r,p,f),a(r,g,f),I(k,r,f),y=!0,_||(w=[$(n,"input",t[6]),$(e,"submit",(d=t[4],function(t){return t.preventDefault(),d.call(this,t)}))],_=!0)},p(t,e){if(4&e&&v(n,t[2]),8&e){let n;for(x=t[0],n=0;n<x.length;n+=1){const r=$t(t,x,n);z[n]?z[n].p(r,e):(z[n]=vt(r),z[n].c(),z[n].m(l,null))}for(;n<z.length;n+=1)z[n].d(1);z.length=x.length}const r={};2&e&&(r.monster=t[1]),k.$set(r)},i(t){y||(T(k.$$.fragment,t),y=!0)},o(t){J(k.$$.fragment,t),y=!1},d(t){t&&f(e),d(z,t),t&&f(c),t&&f(p),t&&f(g),q(k,t),_=!1,r(w)}}}function vt(e){let n,r,o,l,s,i=e[1].name+"",c=e[1].zh+"";return{c(){n=h("option"),r=p(i),o=p(" - "),l=p(c),n.__value=s=e[1].id,n.value=n.__value},m(t,e){a(t,n,e),u(n,r),u(n,o),u(n,l)},p:t,d(t){t&&f(n)}}}function yt(e){let n;return{c(){n=h("p"),n.textContent="...waiting"},m(t,e){a(t,n,e)},p:t,i:t,o:t,d(t){t&&f(n)}}}function _t(t){let e,n,r,o,l={ctx:t,current:null,token:null,hasCatch:!0,pending:yt,then:kt,catch:bt,value:0,error:10,blocks:[,,,]};return F(t[3],l),{c(){e=h("h2"),e.textContent="Monsters Strategy | Orna RPG",n=m(),r=g(),l.block.c()},m(t,s){a(t,e,s),a(t,n,s),a(t,r,s),l.block.m(t,l.anchor=s),l.mount=()=>r.parentNode,l.anchor=r,o=!0},p(e,[n]){!function(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}(l,t=e,n)},i(t){o||(T(l.block),o=!0)},o(t){for(let t=0;t<3;t+=1){J(l.blocks[t])}o=!1},d(t){t&&f(e),t&&f(n),t&&f(r),l.block.d(t),l.token=null,l=null}}}async function wt(t){const e=await fetch(t);if(e.ok){const t=await e.json();if(!t.length)throw new Error("empty data");return t}throw new Error(data)}function xt(t,e,n){let r,o,l=+(new URLSearchParams(location.search).get("id")||404),s=l,i=async function(){const t=await wt("./monster.json"),e=await wt("./skill.json");if(!e||!t)throw new Error("_ERROR_: fetch data fails");const o=gt(t,e);return window.skills=o.skills,n(0,r=o.monsters),r}();return t.$$.update=()=>{33&t.$$.dirty&&n(1,o=r.find((t=>t.id===+l))),34&t.$$.dirty&&console.log({monsterId:l,monster:o})},n(0,r=[]),[r,o,s,i,function(){console.log(s.monsterId),s&&n(5,l=+s)},l,function(){s=this.value,n(2,s)}]}return new class extends U{constructor(t){super(),Q(this,t,xt,_t,l,{})}}({target:document.body})}();
