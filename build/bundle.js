var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(e,...n){if(null==e)return t;const l=e.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function a(t,e,n){t.$$.on_destroy.push(o(e,n))}function i(t,e,n=e){return t.set(n),e}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function f(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function h(){return d(" ")}function g(){return d("")}function v(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function y(t){return function(e){return e.preventDefault(),t.call(this,e)}}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function $(t){return""===t?null:+t}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function x(t,e){t.value=null==e?"":e}function w(t,e){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];if(l.__value===e)return void(l.selected=!0)}}function k(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function S(t,e,n){t.classList[n?"add":"remove"](e)}let j;function O(t){j=t}function z(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const C=[],D=[],L=[],P=[],q=Promise.resolve();let E=!1;function A(t){L.push(t)}let N=!1;const M=new Set;function T(){if(!N){N=!0;do{for(let t=0;t<C.length;t+=1){const e=C[t];O(e),B(e.$$)}for(O(null),C.length=0;D.length;)D.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];M.has(e)||(M.add(e),e())}L.length=0}while(C.length);for(;P.length;)P.pop()();E=!1,N=!1,M.clear()}}function B(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const H=new Set;let J;function W(){J={r:0,c:[],p:J}}function F(){J.r||l(J.c),J=J.p}function I(t,e){t&&t.i&&(H.delete(t),t.i(e))}function R(t,e,n,l){if(t&&t.o){if(H.has(t))return;H.add(t),J.c.push((()=>{H.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}}function V(t,e){R(t,1,1,(()=>{e.delete(t.key)}))}function G(t,e,n,l,r,s,o,a,i,c,u,p){let f=t.length,m=s.length,d=f;const h={};for(;d--;)h[t[d].key]=d;const g=[],v=new Map,y=new Map;for(d=m;d--;){const t=p(r,s,d),a=n(t);let i=o.get(a);i?l&&i.p(t,e):(i=c(a,t),i.c()),v.set(a,g[d]=i),a in h&&y.set(a,Math.abs(d-h[a]))}const b=new Set,$=new Set;function _(t){I(t,1),t.m(a,u),o.set(t.key,t),u=t.first,m--}for(;f&&m;){const e=g[m-1],n=t[f-1],l=e.key,r=n.key;e===n?(u=e.first,f--,m--):v.has(r)?!o.has(l)||b.has(l)?_(e):$.has(r)?f--:y.get(l)>y.get(r)?($.add(l),_(e)):(b.add(r),f--):(i(n,o),f--)}for(;f--;){const e=t[f];v.has(e.key)||i(e,o)}for(;m;)_(g[m-1]);return g}function U(t){t&&t.c()}function Q(t,n,s,o){const{fragment:a,on_mount:i,on_destroy:c,after_update:u}=t.$$;a&&a.m(n,s),o||A((()=>{const n=i.map(e).filter(r);c?c.push(...n):l(n),t.$$.on_mount=[]})),u.forEach(A)}function X(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(t,e){-1===t.$$.dirty[0]&&(C.push(t),E||(E=!0,q.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,r,s,o,a,i,c,u=[-1]){const f=j;O(e);const m=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:r.context||[]),callbacks:n(),dirty:u,skip_bound:!1,root:r.target||f.$$.root};c&&c(m.root);let d=!1;if(m.ctx=s?s(e,r.props||{},((t,n,...l)=>{const r=l.length?l[0]:n;return m.ctx&&a(m.ctx[t],m.ctx[t]=r)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](r),d&&Z(e,t)),n})):[],m.update(),d=!0,l(m.before_update),m.fragment=!!o&&o(m.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);m.fragment&&m.fragment.l(t),t.forEach(p)}else m.fragment&&m.fragment.c();r.intro&&I(e.$$.fragment),Q(e,r.target,r.anchor,r.customElement),T()}O(f)}class Y{$destroy(){X(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const tt=[];function et(e,n=t){let l;const r=new Set;function o(t){if(s(e,t)&&(e=t,l)){const t=!tt.length;for(const t of r)t[1](),tt.push(t,e);if(t){for(let t=0;t<tt.length;t+=2)tt[t][0](tt[t+1]);tt.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,a=t){const i=[s,a];return r.add(i),1===r.size&&(l=n(o)||t),s(e),()=>{r.delete(i),0===r.size&&(l(),l=null)}}}}const nt={Bleeding:"流血",Frozen:"冰凍",Burning:"燃燒",Asleep:"入睡",Paralyzed:"麻痺",Blind:"致盲",Stunned:"暈眩",Rot:"腐敗",Blight:"枯萎",Petrified:"石化",Poisoned:"中毒",Drenched:"濕滑",Cursed:"詛咒",Toxic:"劇毒",Lulled:"恍惚",Stasis:"停滯",Doom:"厄運",Confused:"迷惑",Mage:"法師",Thief:"盜賊",Warrior:"戰士",Curative:"藥水",Weapon:".. 武器",Other:"其他",Item:"物品",Head:". 頭部",Armor:".. 護甲",Legs:"... 腿部",Accessory:"... 配件",Material:"材料","Off-hand":".. 副手",Adornment:"裝飾品",Dark:"闇",Water:"水",Fire:"火",Physical:"物",Holy:"光",Earthen:"土",Lightning:"雷",Dragon:"龍",Arcane:"奧","Fire Def":".火抗","Water Def":".水抗","Earth Def":".土抗","Lightning Def":".雷抗","Holy Def":".光抗","Dark Def":".闇抗","stats.attack":"物攻","stats.magic":"魔攻","stats.defense":"物防","stats.ward":"護盾","stats.dexterity":"敏捷","stats.mana":"魔力","stats.crit":"暴擊","stats.resistance":"魔防","stats.hp":"血量",w:"1 白",g:"2 綠",b:"3 藍",p:"4 紫"};function lt(t){return function(t){for(let e in t)t[e]=t[e].filter(Boolean).map((t=>({value:t,label:nt[t]?`${nt[t]} ${t}`:t}))).sort(((t,e)=>rt(t.label,e.label))),t[e].unshift({value:"",label:""});return t}({types:[...new Set(t.map((t=>t.type)))],tiers:[...new Set(t.map((t=>t.tier)))],element:[...new Set(t.map((t=>t.element)))],immunities:[...new Set(t.map((t=>t.immunities?.split(", "))).flat())],causes:[...new Set(t.map((t=>t.causes)).flat())],prevents:[...new Set(t.map((t=>t.prevents)).flat())],gives:[...new Set(t.map((t=>t.gives)).flat())],cures:[...new Set(t.map((t=>t.cures)).flat())],rarity:[...new Set(t.map((t=>t.rarity)))],equipped_by:[...new Set(t.map((t=>t.equipped_by)).flat().filter(Boolean))]})}function rt(t,e){switch(typeof t){case"number":return t-e;case"string":return t.toLowerCase().localeCompare(e.toLowerCase());default:return t>label_12}}function st(t){return nt[t]||t}function ot(t,e){return t-e}function at(t){return{timestamp:+new Date,rule:{prop:t.prop,value:it(t.value,t.type),type:t.type,comparator:"="}}}function it(t,e){switch(e){case"number":return+t;case"text":default:return String(t)}return t}function ct(t){return at({prop:"name_zh",value:t||"",type:"text"})}function ut(t,e){return e.tier-t.tier}const pt=[{prop:"name_zh",label:"name_zh",type:"text",sort:!0},{prop:"name",label:"name_en",type:"text",sort:!0},{prop:"tier",label:"Tier ★",type:"number",list:"tiers",min:1,max:10,sort:!0},{prop:"equipped_by",label:"穿戴者",type:"text",list:"equipped_by"},{prop:"type",label:"裝備類型",type:"text",list:"types",sort:!0},{prop:"prevents",label:"-免疫(敵)",type:"text",list:"prevents"},{prop:"cures",label:"-治癒(己)",type:"text",list:"cures"},{prop:"causes",label:"+造成(敵)",type:"text",list:"causes"},{prop:"gives",label:"+給予(己)",type:"text",list:"gives"},{prop:"slots",label:"槽位數",type:"number",sort:!0},{prop:"two_handed",label:"雙手使用",type:"checkbox"},{prop:"element",label:"元素",type:"text",list:"element",sort:!0},{prop:"rarity",label:"稀有度",type:"text",list:"rarity"},{prop:"boss",label:"👿 BOSS",type:"checkbox"},{prop:"arena",label:"🏟️ 競技場",type:"checkbox"},{prop:"view_distance",label:"👁️ +視野",type:"checkbox"},{prop:"materials",label:"材料id",type:"number",checkId:!0},{prop:"dropped_by",label:"掉落者id",type:"number",checkId:!0},{prop:"stats.attack",label:".物攻",type:"number",sort:!0},{prop:"stats.magic",label:".魔攻",type:"number",sort:!0},{prop:"stats.defense",label:".物防",type:"number",sort:!0},{prop:"stats.resistance",label:".魔防",type:"number",sort:!0},{prop:"stats.dexterity",label:".敏捷",type:"number",sort:!0},{prop:"stats.crit",label:".暴擊",type:"number",sort:!0},{prop:"stats.ward",label:".護盾",type:"number",sort:!0},{prop:"stats.mana",label:".魔力",type:"number",sort:!0},{prop:"stats.hp",label:".血量",type:"number",sort:!0},{prop:"other_effect",label:"加成/技能",type:"text"},{prop:"context",label:"全文搜索",type:"text"},{prop:"id",label:"id",type:"number",min:1,sort:!0}],ft=et({waiting:!0}),mt=et({}),dt=et({open:!1}),ht=et({open:!1,item:null,props:[]});Promise.all(["./data/item.min.json","./data/monster.min.json"].map((t=>fetch(t).then((t=>t.json()))))).then((t=>{let e=function(t,e){let n=t=>{let n=e.find((e=>e.id===t));return n?{id:n.id,tier:n.tier,name:n.name,name_zh:n.zh}:null},l=e=>{let n=t.find((t=>t.id===e));return n?{id:n.id,tier:n.tier,name:n.name,name_zh:n.zh}:null};return t.forEach((t=>{t.dropped_by=t.dropped_by?.map(n).sort(ut),t.materials=t.materials?.map(l).sort(ut),t.name_zh=t.zh,t.context=JSON.stringify(t)})),{items:t,monsters:e}}(t[0],t[1]);const n=e.items,l=e.monsters;window.ddd=n,mt.set(lt(n)),ht.set({open:!1,item:null,props:[...new Set(n.map((t=>Object.keys(t))).flat())]}),lt(n),ft.set({items:n,monsters:l})}));let gt=new URLSearchParams(location.search),vt=pt.find((t=>gt.get(t.prop))),yt=vt?at({prop:vt.prop,type:vt.type,value:gt.get(vt.prop)}):ct("");const bt=function(){const{subscribe:t,set:e,update:n}=et([yt]);return{subscribe:t,set:e,update:n,add:t=>n((e=>(e[e.length]=t,e))),remove:t=>n((e=>{let n=e.findIndex((e=>e.timestamp===t));return-1!==n&&e.splice(n,1),e})),reset:()=>e([])}}();function $t(t,e,n){const l=t.slice();return l[14]=e[n],l}function _t(t,e,n){const l=t.slice();return l[17]=e[n],l}function xt(e){let n,l,r,s=e[17].label+"";return{c(){n=m("option"),l=d(s),n.__value=r=e[17].prop,n.value=n.__value},m(t,e){u(t,n,e),c(n,l)},p:t,d(t){t&&p(n)}}}function wt(t){let e,n,l;return{c(){e=m("input"),b(e,"accesskey","s"),b(e,"type","search")},m(r,s){u(r,e,s),x(e,t[0].rule.value),n||(l=v(e,"input",t[11]),n=!0)},p(t,n){1&n&&x(e,t[0].rule.value)},d(t){t&&p(e),n=!1,l()}}}function kt(t){let e,n,l,r,s;return{c(){e=m("input"),b(e,"accesskey","s"),b(e,"type","number"),b(e,"min",n=t[1].min),b(e,"max",l=t[1].max)},m(n,l){u(n,e,l),x(e,t[0].rule.value),r||(s=v(e,"input",t[10]),r=!0)},p(t,r){2&r&&n!==(n=t[1].min)&&b(e,"min",n),2&r&&l!==(l=t[1].max)&&b(e,"max",l),1&r&&$(e.value)!==t[0].rule.value&&x(e,t[0].rule.value)},d(t){t&&p(e),r=!1,s()}}}function St(t){let e,n,l,r=t[2][t[1].list],s=[];for(let e=0;e<r.length;e+=1)s[e]=Ot($t(t,r,e));return{c(){e=m("select");for(let t=0;t<s.length;t+=1)s[t].c();void 0===t[0].rule.value&&A((()=>t[9].call(e)))},m(r,o){u(r,e,o);for(let t=0;t<s.length;t+=1)s[t].m(e,null);w(e,t[0].rule.value),n||(l=v(e,"change",t[9]),n=!0)},p(t,n){if(6&n){let l;for(r=t[2][t[1].list],l=0;l<r.length;l+=1){const o=$t(t,r,l);s[l]?s[l].p(o,n):(s[l]=Ot(o),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=r.length}1&n&&w(e,t[0].rule.value)},d(t){t&&p(e),f(s,t),n=!1,l()}}}function jt(t){let e,n,r,s,o,a,i,f,g;return{c(){e=m("label"),n=d("T\n      "),r=m("input"),s=h(),o=m("label"),a=m("input"),i=d("\n      F"),b(r,"type","radio"),r.__value="1",r.value=r.__value,t[7][0].push(r),b(a,"type","radio"),a.__value="0",a.value=a.__value,t[7][0].push(a)},m(l,p){u(l,e,p),c(e,n),c(e,r),r.checked=r.__value===t[0].rule.value,u(l,s,p),u(l,o,p),c(o,a),a.checked=a.__value===t[0].rule.value,c(o,i),f||(g=[v(r,"change",t[6]),v(a,"change",t[8])],f=!0)},p(t,e){1&e&&(r.checked=r.__value===t[0].rule.value),1&e&&(a.checked=a.__value===t[0].rule.value)},d(n){n&&p(e),t[7][0].splice(t[7][0].indexOf(r),1),n&&p(s),n&&p(o),t[7][0].splice(t[7][0].indexOf(a),1),f=!1,l(g)}}}function Ot(t){let e,n,l,r=t[14].label+"";return{c(){e=m("option"),n=d(r),e.__value=l=t[14].value,e.value=e.__value},m(t,l){u(t,e,l),c(e,n)},p(t,s){6&s&&r!==(r=t[14].label+"")&&_(n,r),6&s&&l!==(l=t[14].value)&&(e.__value=l,e.value=e.__value)},d(t){t&&p(e)}}}function zt(t){let e,n,l,r,s,o;return{c(){e=m("select"),n=m("option"),n.textContent="=",l=m("option"),l.textContent="+",r=m("option"),r.textContent="-",n.__value="=",n.value=n.__value,l.__value="+",l.value=l.__value,r.__value="-",r.value=r.__value,void 0===t[0].rule.comparator&&A((()=>t[12].call(e)))},m(a,i){u(a,e,i),c(e,n),c(e,l),c(e,r),w(e,t[0].rule.comparator),s||(o=v(e,"change",t[12]),s=!0)},p(t,n){1&n&&w(e,t[0].rule.comparator)},d(t){t&&p(e),s=!1,o()}}}function Ct(t){let e,n,l;return{c(){e=m("a"),n=d("↗"),b(e,"href",l="./?"+t[0].rule.prop+"="+t[0].rule.value)},m(t,l){u(t,e,l),c(e,n)},p(t,n){1&n&&l!==(l="./?"+t[0].rule.prop+"="+t[0].rule.value)&&b(e,"href",l)},d(t){t&&p(e)}}}function Dt(e){let n,s,o,a,i,g,y,$,_,x,k=pt,S=[];for(let t=0;t<k.length;t+=1)S[t]=xt(_t(e,k,t));function j(t,e){return"checkbox"===t[1].type?jt:t[1].list?St:"number"===t[1].type?kt:"text"===t[1].type?wt:void 0}let O=j(e),z=O&&O(e),C="number"===e[1].type&&zt(e),D=e[0].rule.value&&Ct(e);return{c(){n=m("div"),s=m("button"),s.textContent="x",o=h(),a=m("select");for(let t=0;t<S.length;t+=1)S[t].c();i=d("}"),g=h(),z&&z.c(),y=h(),C&&C.c(),$=h(),D&&D.c(),void 0===e[0].rule.prop&&A((()=>e[5].call(a))),b(n,"class","filters")},m(t,l){u(t,n,l),c(n,s),c(n,o),c(n,a);for(let t=0;t<S.length;t+=1)S[t].m(a,null);c(a,i),w(a,e[0].rule.prop),c(n,g),z&&z.m(n,null),c(n,y),C&&C.m(n,null),c(n,$),D&&D.m(n,null),_||(x=[v(s,"click",(function(){r(e[4](e[0].timestamp))&&e[4](e[0].timestamp).apply(this,arguments)})),v(a,"change",e[5]),v(a,"change",e[3])],_=!0)},p(t,[l]){if(e=t,0&l){let t;for(k=pt,t=0;t<k.length;t+=1){const n=_t(e,k,t);S[t]?S[t].p(n,l):(S[t]=xt(n),S[t].c(),S[t].m(a,i))}for(;t<S.length;t+=1)S[t].d(1);S.length=k.length}1&l&&w(a,e[0].rule.prop),O===(O=j(e))&&z?z.p(e,l):(z&&z.d(1),z=O&&O(e),z&&(z.c(),z.m(n,y))),"number"===e[1].type?C?C.p(e,l):(C=zt(e),C.c(),C.m(n,$)):C&&(C.d(1),C=null),e[0].rule.value?D?D.p(e,l):(D=Ct(e),D.c(),D.m(n,null)):D&&(D.d(1),D=null)},i:t,o:t,d(t){t&&p(n),f(S,t),z&&z.d(),C&&C.d(),D&&D.d(),_=!1,l(x)}}}function Lt(t,e,n){let l;a(t,mt,(t=>n(2,l=t)));let{filter:r}=e,s=o(r.rule.prop);function o(t){return pt.find((e=>e.prop===t))}return t.$$set=t=>{"filter"in t&&n(0,r=t.filter)},t.$$.update=()=>{3&t.$$.dirty&&(n(1,s=o(r.rule.prop)),n(0,r.rule.type=s.type,r))},[r,s,l,function(){n(0,r.rule.value="",r)},function(t){bt.remove(t)},function(){r.rule.prop=k(this),n(0,r),n(1,s)},function(){r.rule.value=this.__value,n(0,r),n(1,s)},[[]],function(){r.rule.value=this.__value,n(0,r),n(1,s)},function(){r.rule.value=k(this),n(0,r),n(1,s)},function(){r.rule.value=$(this.value),n(0,r),n(1,s)},function(){r.rule.value=this.value,n(0,r),n(1,s)},function(){r.rule.comparator=k(this),n(0,r),n(1,s)}]}class Pt extends Y{constructor(t){super(),K(this,t,Lt,Dt,s,{filter:0})}}function qt(t,e,n){const l=t.slice();return l[3]=e[n],l[4]=e,l[5]=n,l}function Et(t,e){let n,l,r,s,o;function a(t){e[2](t,e[3],e[4],e[5])}let i={};return void 0!==e[3]&&(i.filter=e[3]),l=new Pt({props:i}),D.push((()=>function(t,e,n){const l=t.$$.props[e];void 0!==l&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}(l,"filter",a))),{key:t,first:null,c(){n=m("li"),U(l.$$.fragment),s=h(),this.first=n},m(t,e){u(t,n,e),Q(l,n,null),c(n,s),o=!0},p(t,n){e=t;const s={};var o;!r&&1&n&&(r=!0,s.filter=e[3],o=()=>r=!1,P.push(o)),l.$set(s)},i(t){o||(I(l.$$.fragment,t),o=!0)},o(t){R(l.$$.fragment,t),o=!1},d(t){t&&p(n),X(l)}}}function At(t){let e,n,l,r,s,o,a,i=[],f=new Map,d=t[0];const g=t=>t[3].timestamp;for(let e=0;e<d.length;e+=1){let n=qt(t,d,e),l=g(n);f.set(l,i[e]=Et(l,n))}return{c(){e=m("aside"),n=m("button"),n.textContent="+過濾條件",l=h(),r=m("ul");for(let t=0;t<i.length;t+=1)i[t].c();b(r,"class","svelte-km15j4"),b(e,"class","svelte-km15j4")},m(p,f){u(p,e,f),c(e,n),c(e,l),c(e,r);for(let t=0;t<i.length;t+=1)i[t].m(r,null);s=!0,o||(a=v(n,"click",t[1]),o=!0)},p(t,[e]){1&e&&(d=t[0],W(),i=G(i,e,g,1,t,d,f,r,V,Et,null,qt),F())},i(t){if(!s){for(let t=0;t<d.length;t+=1)I(i[t]);s=!0}},o(t){for(let t=0;t<i.length;t+=1)R(i[t]);s=!1},d(t){t&&p(e);for(let t=0;t<i.length;t+=1)i[t].d();o=!1,a()}}}function Nt(t,e,n){let l;return a(t,bt,(t=>n(0,l=t))),[l,function(){bt.add(ct(""))},function(t,e,n,r){n[r]=t,bt.set(l)}]}class Mt extends Y{constructor(t){super(),K(this,t,Nt,At,s,{})}}function Tt(t,e){if(t)return e?`https://playorna.com/static/img/${t.image}`:(t.deadProxyImage,Bt(t.image))}function Bt(t){return`https://orna.guide/static/orna/img/${t}`}function Ht(t,e,n){const l=t.slice();return l[6]=e[n],l}function Jt(t){let e,n,l,r,s,o=t[0],a=[];for(let e=0;e<o.length;e+=1)a[e]=Wt(Ht(t,o,e));return{c(){e=m("details"),n=m("summary"),l=d(t[1]),r=h(),s=m("ul");for(let t=0;t<a.length;t+=1)a[t].c();e.open=!0},m(t,o){u(t,e,o),c(e,n),c(n,l),c(e,r),c(e,s);for(let t=0;t<a.length;t+=1)a[t].m(s,null)},p(t,e){if(2&e&&_(l,t[1]),13&e){let n;for(o=t[0],n=0;n<o.length;n+=1){const l=Ht(t,o,n);a[n]?a[n].p(l,e):(a[n]=Wt(l),a[n].c(),a[n].m(s,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}},d(t){t&&p(e),f(a,t)}}}function Wt(t){let e,n,l,r,s,o,a,i,f,g,$,x,w=t[6].tier+"",k=(t[6].name_zh||t[6].name)+"";function S(){return t[5](t[6])}return{c(){e=m("li"),n=m("a"),l=m("small"),r=d("★"),s=d(w),o=d(" -"),a=h(),i=d(k),g=h(),b(n,"href",f="https://orna.guide/"+t[2]+"?show="+t[6].id),b(n,"target","orna.guide")},m(t,p){u(t,e,p),c(e,n),c(n,l),c(l,r),c(l,s),c(l,o),c(n,a),c(n,i),c(e,g),$||(x=v(n,"click",y(S)),$=!0)},p(e,l){t=e,1&l&&w!==(w=t[6].tier+"")&&_(s,w),1&l&&k!==(k=(t[6].name_zh||t[6].name)+"")&&_(i,k),5&l&&f!==(f="https://orna.guide/"+t[2]+"?show="+t[6].id)&&b(n,"href",f)},d(t){t&&p(e),$=!1,x()}}}function Ft(e){let n,l=e[0]&&Jt(e);return{c(){l&&l.c(),n=g()},m(t,e){l&&l.m(t,e),u(t,n,e)},p(t,[e]){t[0]?l?l.p(t,e):(l=Jt(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){l&&l.d(t),t&&p(n)}}}function It(t,e,n){let{items:l=null}=e,{title:r=""}=e,{type:s="monsters"}=e,{prop:o=""}=e;function a(t){let e=at({prop:o,value:t,type:"number"});bt.set([e])}return t.$$set=t=>{"items"in t&&n(0,l=t.items),"title"in t&&n(1,r=t.title),"type"in t&&n(2,s=t.type),"prop"in t&&n(4,o=t.prop)},[l,r,s,a,o,t=>a(t.id)]}class Rt extends Y{constructor(t){super(),K(this,t,It,Ft,s,{items:0,title:1,type:2,prop:4})}}function Vt(t,e,n){const l=t.slice();return l[7]=e[n],l}function Gt(t,e,n){const l=t.slice();return l[10]=e[n],l}function Ut(t,e,n){const l=t.slice();return l[13]=e[n],l}function Qt(e){let n,l,r,s,o,a,i,f=st(e[13].prop)+"",g=e[13].value+"";return{c(){n=m("tr"),l=m("th"),r=d(f),s=h(),o=m("td"),a=d(g),i=h(),b(l,"class","svelte-dm55ro")},m(t,e){u(t,n,e),c(n,l),c(l,r),c(n,s),c(n,o),c(o,a),c(n,i)},p:t,d(t){t&&p(n)}}}function Xt(t){let e,n,l,r,s,o,a,i,g,v=t[7][1]+"",y=t[0][t[7][0]],$=[];for(let e=0;e<y.length;e+=1)$[e]=Zt(Gt(t,y,e));return{c(){e=m("div"),n=m("span"),l=d("[ "),r=d(v),s=d(" ]"),a=h(),i=m("br"),g=d("\n            -------\n            ");for(let t=0;t<$.length;t+=1)$[t].c();b(n,"title",o=t[7][0]),b(e,"class","text-right svelte-dm55ro")},m(t,o){u(t,e,o),c(e,n),c(n,l),c(n,r),c(n,s),c(e,a),c(e,i),c(e,g);for(let t=0;t<$.length;t+=1)$[t].m(e,null)},p(t,n){if(3&n){let l;for(y=t[0][t[7][0]],l=0;l<y.length;l+=1){const r=Gt(t,y,l);$[l]?$[l].p(r,n):($[l]=Zt(r),$[l].c(),$[l].m(e,null))}for(;l<$.length;l+=1)$[l].d(1);$.length=y.length}},d(t){t&&p(e),f($,t)}}}function Zt(t){let e,n,l=st(t[10])+"";return{c(){e=m("div"),n=d(l)},m(t,l){u(t,e,l),c(e,n)},p(t,e){1&e&&l!==(l=st(t[10])+"")&&_(n,l)},d(t){t&&p(e)}}}function Kt(t){let e,n=t[0][t[7][0]]&&Xt(t);return{c(){n&&n.c(),e=g()},m(t,l){n&&n.m(t,l),u(t,e,l)},p(t,l){t[0][t[7][0]]?n?n.p(t,l):(n=Xt(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&p(e)}}}function Yt(t){let e,n,r,s,o,a,i,g,$,x,w,k,S,j,O,z,C,D,L,P,q,E,A,N,M,T,B,H,J,W,F,V,G,Z,K,Y,tt,et,lt,rt,st,ot,at,it,ct,ut,pt,ft,mt,dt,ht,gt,vt,yt,bt,$t,_t,xt,wt,kt,St,jt,Ot,zt,Ct=t[0].name_zh+"",Dt=t[0].name+"",Lt=t[0].tier+"",Pt=nt[t[0].element]?`[${nt[t[0].element]}]`:"",qt=t[0].boss?"👿":"",Et=t[0].arena?"🏟️":"",At=t[0].view_distance?"👁️":"",Nt=t[0].two_handed?"🙌":"",Mt=JSON.stringify({...t[0],context:null},null," ")+"",Bt=t[2].length&&function(t){let e,n,l,r,s,o,a,i=t[2],h=[];for(let e=0;e<i.length;e+=1)h[e]=Qt(Ut(t,i,e));return{c(){e=m("div"),n=d("[ Stats ]\n          "),l=m("br"),r=d("\n          ---------\n          "),s=m("table");for(let t=0;t<h.length;t+=1)h[t].c();var t,o,a;t="cursor",o="pointer",s.style.setProperty(t,o,a?"important":""),b(s,"class","svelte-dm55ro"),b(e,"class","svelte-dm55ro")},m(i,p){u(i,e,p),c(e,n),c(e,l),c(e,r),c(e,s);for(let t=0;t<h.length;t+=1)h[t].m(s,null);o||(a=v(s,"click",t[3]),o=!0)},p(t,e){if(4&e){let n;for(i=t[2],n=0;n<i.length;n+=1){const l=Ut(t,i,n);h[n]?h[n].p(l,e):(h[n]=Qt(l),h[n].c(),h[n].m(s,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=i.length}},d(t){t&&p(e),f(h,t),o=!1,a()}}}(t),Ht=t[1],Jt=[];for(let e=0;e<Ht.length;e+=1)Jt[e]=Kt(Vt(t,Ht,e));return ft=new Rt({props:{items:t[0].dropped_by,title:"掉落方",type:"monsters",prop:"dropped_by"}}),ht=new Rt({props:{items:t[0].materials,title:"材料",type:"items",prop:"id"}}),{c(){e=m("details"),n=m("summary"),r=m("ruby"),s=m("rb"),o=d(Ct),a=h(),i=m("rt"),g=d(Dt),$=h(),x=m("a"),w=m("sup"),k=d("★"),S=d(Lt),O=h(),z=m("div"),C=m("div"),L=h(),Bt&&Bt.c(),P=h();for(let t=0;t<Jt.length;t+=1)Jt[t].c();q=h(),E=m("div"),A=m("div"),M=h(),T=m("div"),B=d(Pt),H=h(),J=m("div"),W=d(qt),F=h(),V=m("div"),G=d(Et),Z=h(),K=m("div"),Y=d(At),tt=h(),et=m("div"),lt=d(Nt),rt=h(),st=m("div"),it=h(),ct=m("div"),ut=m("div"),pt=m("div"),U(ft.$$.fragment),mt=h(),dt=m("div"),U(ht.$$.fragment),gt=h(),vt=m("details"),yt=m("summary"),bt=h(),$t=m("pre"),_t=d(Mt),wt=h(),kt=m("div"),kt.textContent="🛠️",b(i,"class","svelte-dm55ro"),b(r,"class","svelte-dm55ro"),b(w,"class","svelte-dm55ro"),b(x,"href",j="https://orna.guide/items?show="+t[0].id),b(x,"target","orna.guide"),b(C,"class","item-img-box svelte-dm55ro"),b(C,"style",D=`--bg: url(${Tt(t[0])}); --bg-fallback: url(${Tt(t[0],"small")})`),b(A,"class","item-equipped svelte-dm55ro"),b(A,"title",N=t[0].equipped_by),b(T,"class","item-char svelte-dm55ro"),b(J,"class","item-char svelte-dm55ro"),b(J,"title","dropped from boss"),b(V,"class","item-char svelte-dm55ro"),b(V,"title","dropped from arena"),b(K,"class","item-char svelte-dm55ro"),b(K,"title","enhance view distance"),b(et,"class","item-char svelte-dm55ro"),b(et,"title","two hands"),b(st,"class","item-slots svelte-dm55ro"),b(st,"data-slots",ot=t[0].slots),b(st,"title",at=t[0].slots+" slots"),b(E,"class","rt-box svelte-dm55ro"),b(z,"class","item-info svelte-dm55ro"),b(n,"class","summary svelte-dm55ro"),b(pt,"class","dropped_by"),b(dt,"class","materials"),b(yt,"class","text-right"),b($t,"class","item-pre svelte-dm55ro"),b(ut,"class","item-more svelte-dm55ro"),b(ut,"data-type",xt="【"+nt[t[0].type]+"】"),b(kt,"class","fixform svelte-dm55ro"),b(kt,"title","fix data"),b(ct,"class","svelte-dm55ro"),b(e,"class",St="item-details item-rarity--"+(t[0].rarity||"w")+" svelte-dm55ro")},m(l,p){u(l,e,p),c(e,n),c(n,r),c(r,s),c(s,o),c(r,a),c(r,i),c(i,g),c(n,$),c(n,x),c(x,w),c(w,k),c(w,S),c(n,O),c(n,z),c(z,C),c(z,L),Bt&&Bt.m(z,null),c(z,P);for(let t=0;t<Jt.length;t+=1)Jt[t].m(z,null);c(z,q),c(z,E),c(E,A),c(E,M),c(E,T),c(T,B),c(E,H),c(E,J),c(J,W),c(E,F),c(E,V),c(V,G),c(E,Z),c(E,K),c(K,Y),c(E,tt),c(E,et),c(et,lt),c(E,rt),c(E,st),c(e,it),c(e,ct),c(ct,ut),c(ut,pt),Q(ft,pt,null),c(ut,mt),c(ut,dt),Q(ht,dt,null),c(ut,gt),c(ut,vt),c(vt,yt),c(vt,bt),c(vt,$t),c($t,_t),c(ct,wt),c(ct,kt),jt=!0,Ot||(zt=[v(z,"click",y(t[5])),v(kt,"click",t[4])],Ot=!0)},p(t,[n]){if((!jt||1&n)&&Ct!==(Ct=t[0].name_zh+"")&&_(o,Ct),(!jt||1&n)&&Dt!==(Dt=t[0].name+"")&&_(g,Dt),(!jt||1&n)&&Lt!==(Lt=t[0].tier+"")&&_(S,Lt),(!jt||1&n&&j!==(j="https://orna.guide/items?show="+t[0].id))&&b(x,"href",j),(!jt||1&n&&D!==(D=`--bg: url(${Tt(t[0])}); --bg-fallback: url(${Tt(t[0],"small")})`))&&b(C,"style",D),t[2].length&&Bt.p(t,n),3&n){let e;for(Ht=t[1],e=0;e<Ht.length;e+=1){const l=Vt(t,Ht,e);Jt[e]?Jt[e].p(l,n):(Jt[e]=Kt(l),Jt[e].c(),Jt[e].m(z,q))}for(;e<Jt.length;e+=1)Jt[e].d(1);Jt.length=Ht.length}(!jt||1&n&&N!==(N=t[0].equipped_by))&&b(A,"title",N),(!jt||1&n)&&Pt!==(Pt=nt[t[0].element]?`[${nt[t[0].element]}]`:"")&&_(B,Pt),(!jt||1&n)&&qt!==(qt=t[0].boss?"👿":"")&&_(W,qt),(!jt||1&n)&&Et!==(Et=t[0].arena?"🏟️":"")&&_(G,Et),(!jt||1&n)&&At!==(At=t[0].view_distance?"👁️":"")&&_(Y,At),(!jt||1&n)&&Nt!==(Nt=t[0].two_handed?"🙌":"")&&_(lt,Nt),(!jt||1&n&&ot!==(ot=t[0].slots))&&b(st,"data-slots",ot),(!jt||1&n&&at!==(at=t[0].slots+" slots"))&&b(st,"title",at);const l={};1&n&&(l.items=t[0].dropped_by),ft.$set(l);const r={};1&n&&(r.items=t[0].materials),ht.$set(r),(!jt||1&n)&&Mt!==(Mt=JSON.stringify({...t[0],context:null},null," ")+"")&&_(_t,Mt),(!jt||1&n&&xt!==(xt="【"+nt[t[0].type]+"】"))&&b(ut,"data-type",xt),(!jt||1&n&&St!==(St="item-details item-rarity--"+(t[0].rarity||"w")+" svelte-dm55ro"))&&b(e,"class",St)},i(t){jt||(I(ft.$$.fragment,t),I(ht.$$.fragment,t),jt=!0)},o(t){R(ft.$$.fragment,t),R(ht.$$.fragment,t),jt=!1},d(t){t&&p(e),Bt&&Bt.d(),f(Jt,t),X(ft),X(ht),Ot=!1,l(zt)}}}function te(t,e,n){let{item:l}=e;let r=["stats.hp","stats.mana","stats.attack","stats.magic","stats.defense","stats.resistance","stats.dexterity","stats.ward","stats.crit"].map((t=>({prop:t,value:l[t]}))).filter((t=>t.value));return t.$$set=t=>{"item"in t&&n(0,l=t.item)},[l,[["causes","🔪"],["prevents","🛡️"],["gives","🎁"],["cures","❤️‍🩹"],["other_effect","✨"]],r,function(){dt.set({open:!0,item:l,stats:r})},function(){ht.set({open:!0,item:l})},function(e){z.call(this,t,e)}]}class ee extends Y{constructor(t){super(),K(this,t,te,Yt,s,{item:0})}}function ne(t,e,n){const l=t.slice();return l[17]=e[n],l}function le(t,e,n){const l=t.slice();return l[20]=e[n],l}function re(e){let n,l,r,s=e[20].label+"";return{c(){n=m("option"),l=d(s),n.__value=r=e[20].prop,n.value=n.__value},m(t,e){u(t,n,e),c(n,l)},p:t,d(t){t&&p(n)}}}function se(t,e){let n,l,r,s;return l=new ee({props:{item:e[17]}}),{key:t,first:null,c(){n=m("li"),U(l.$$.fragment),r=h(),b(n,"class","svelte-1l0kmot"),this.first=n},m(t,e){u(t,n,e),Q(l,n,null),c(n,r),s=!0},p(t,n){e=t;const r={};17&n&&(r.item=e[17]),l.$set(r)},i(t){s||(I(l.$$.fragment,t),s=!0)},o(t){R(l.$$.fragment,t),s=!1},d(t){t&&p(n),X(l)}}}function oe(t){let e,n,r,s,o,a,i,g,y,k,j,O,z,C,D,L,P,q,E,N,M,T,B,H,J,U=t[0].length+"",Q=[],X=new Map,Z=t[6],K=[];for(let e=0;e<Z.length;e+=1)K[e]=re(le(t,Z,e));let Y=t[0].slice(0,t[4]);const tt=t=>t[17].id;for(let e=0;e<Y.length;e+=1){let n=ne(t,Y,e),l=tt(n);X.set(l,Q[e]=se(l,n))}return{c(){e=m("div"),n=m("div"),r=d("排序:\n    "),s=m("select");for(let t=0;t<K.length;t+=1)K[t].c();o=h(),a=m("input"),i=h(),g=m("details"),y=m("summary"),k=d("顯示數量\n      "),j=m("input"),O=d("\n      / "),z=d(U),C=h(),D=m("div"),L=d("總數\n      "),P=m("input"),q=d("\n      以下秀圖"),E=h(),N=m("hr"),M=h(),T=m("ul");for(let t=0;t<Q.length;t+=1)Q[t].c();void 0===t[1]&&A((()=>t[9].call(s))),b(a,"id","sortDir"),b(a,"type","checkbox"),b(a,"class","svelte-1l0kmot"),b(j,"class","text-center"),b(j,"type","number"),b(j,"min","5"),b(j,"max","2000"),b(j,"step","5"),b(P,"class","text-center"),b(P,"type","number"),b(P,"min","1"),b(P,"max","50"),b(e,"class","nav svelte-1l0kmot"),b(T,"class","items svelte-1l0kmot"),S(T,"showDetails",t[5])},m(l,p){u(l,e,p),c(e,n),c(n,r),c(n,s);for(let t=0;t<K.length;t+=1)K[t].m(s,null);w(s,t[1]),c(n,o),c(n,a),a.checked=t[2],c(e,i),c(e,g),c(g,y),c(y,k),c(y,j),x(j,t[4]),c(y,O),c(y,z),c(g,C),c(g,D),c(D,L),c(D,P),x(P,t[3]),c(D,q),u(l,E,p),u(l,N,p),u(l,M,p),u(l,T,p);for(let t=0;t<Q.length;t+=1)Q[t].m(T,null);B=!0,H||(J=[v(s,"change",t[9]),v(a,"change",t[10]),v(j,"input",t[11]),v(P,"input",t[12])],H=!0)},p(t,[e]){if(64&e){let n;for(Z=t[6],n=0;n<Z.length;n+=1){const l=le(t,Z,n);K[n]?K[n].p(l,e):(K[n]=re(l),K[n].c(),K[n].m(s,null))}for(;n<K.length;n+=1)K[n].d(1);K.length=Z.length}66&e&&w(s,t[1]),4&e&&(a.checked=t[2]),16&e&&$(j.value)!==t[4]&&x(j,t[4]),(!B||1&e)&&U!==(U=t[0].length+"")&&_(z,U),8&e&&$(P.value)!==t[3]&&x(P,t[3]),17&e&&(Y=t[0].slice(0,t[4]),W(),Q=G(Q,e,tt,1,t,Y,X,T,V,se,null,ne),F()),32&e&&S(T,"showDetails",t[5])},i(t){if(!B){for(let t=0;t<Y.length;t+=1)I(Q[t]);B=!0}},o(t){for(let t=0;t<Q.length;t+=1)R(Q[t]);B=!1},d(t){t&&p(e),f(K,t),t&&p(E),t&&p(N),t&&p(M),t&&p(T);for(let t=0;t<Q.length;t+=1)Q[t].d();H=!1,l(J)}}}function ae(t,e,n){let l,r,s,o,i,c;a(t,bt,(t=>n(8,c=t)));let{items:u=[]}=e,p=pt.filter((t=>t.sort)),f=[];function m(t){let e=u;return!t||!t.length||1===t.length&&null==t[0].rule?.value?e:(t.map((t=>t.rule)).forEach((t=>{t&&(e=function(t,e){let{prop:n,type:l,value:r,comparator:s}=e;if(!r||!t.length)return t;let o=pt.find((t=>t.prop===n));if(o.checkId)return t.filter((t=>t[n]?.some((t=>t.id===r))));switch(l){case"checkbox":return Boolean(+r)?t.filter((t=>t[n])):t.filter((t=>!t[n]));case"number":return t.filter((t=>{let e=t[n];switch(s){case"+":return e>=r;case"-":return e<=r;default:return e===r}}));case"text":return t.filter((t=>{if(o.list)return t[n]?.includes(r);return new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i").test(t[n])}));default:return t}}(e,t))})),function(t=u){return t.sort(((t,e)=>{let n=r?1:-1,s=t[l]||-9999,o=e[l]||-9999;switch("object"==typeof o&&(o=-9999),"object"==typeof s&&(s=-9999),typeof s){case"string":return s.localeCompare(o)*n;case"number":return(s-o)*n;default:return 0}}))}(e))}return t.$$set=t=>{"items"in t&&n(7,u=t.items)},t.$$.update=()=>{262&t.$$.dirty&&n(0,f=m(c)),25&t.$$.dirty&&n(5,i=f.length<=o||s<=o)},n(1,l="tier"),n(2,r=!0),n(4,s=20),n(3,o=20),[f,l,r,o,s,i,p,u,c,function(){l=k(this),n(1,l),n(6,p)},function(){r=this.checked,n(2,r)},function(){s=$(this.value),n(4,s)},function(){o=$(this.value),n(3,o)}]}class ie extends Y{constructor(t){super(),K(this,t,ae,oe,s,{items:7})}}function ce(t,e,n){const l=t.slice();return l[7]=e[n],l[9]=n,l}function ue(t,e,n){const l=t.slice();return l[10]=e[n],l}function pe(t,e,n){const l=t.slice();return l[13]=e[n],l}function fe(t){let e;return{c(){e=d("Loading...")},m(t,n){u(t,e,n)},d(t){t&&p(e)}}}function me(e){let n;return{c(){n=m("blockquote"),n.textContent="GG",b(n,"class","svelte-1tc8awj")},m(t,e){u(t,n,e)},p:t,d(t){t&&p(n)}}}function de(t){let e,n,l,r,s,o,a=100*t[3].quality+"";function i(t,e){return"0"!==t[3].quality?ge:he}let f=i(t),g=f(t);return{c(){e=m("table"),n=m("caption"),l=d("品質: "),r=d(a),s=d("%"),o=h(),g.c(),b(n,"class","svelte-1tc8awj"),b(e,"class","text-right svelte-1tc8awj")},m(t,a){u(t,e,a),c(e,n),c(n,l),c(n,r),c(n,s),c(e,o),g.m(e,null)},p(t,n){8&n&&a!==(a=100*t[3].quality+"")&&_(r,a),f===(f=i(t))&&g?g.p(t,n):(g.d(1),g=f(t),g&&(g.c(),g.m(e,null)))},d(t){t&&p(e),g.d()}}}function he(e){let n;return{c(){n=m("caption"),n.textContent="Wrong values.",b(n,"class","svelte-1tc8awj")},m(t,e){u(t,n,e)},p:t,d(t){t&&p(n)}}}function ge(t){let e,n,l,r,s,o,a=Object.keys(t[3].stats),i=[];for(let e=0;e<a.length;e+=1)i[e]=ve(pe(t,a,e));let d=Object.values(t[3].stats)[0].values,g=[];for(let e=0;e<d.length;e+=1)g[e]=be(ce(t,d,e));return{c(){e=m("thead"),n=m("tr"),l=m("th"),l.textContent="Lv.",r=h();for(let t=0;t<i.length;t+=1)i[t].c();s=h(),o=m("tbody");for(let t=0;t<g.length;t+=1)g[t].c();b(l,"class","svelte-1tc8awj"),b(o,"class","svelte-1tc8awj")},m(t,a){u(t,e,a),c(e,n),c(n,l),c(n,r);for(let t=0;t<i.length;t+=1)i[t].m(n,null);u(t,s,a),u(t,o,a);for(let t=0;t<g.length;t+=1)g[t].m(o,null)},p(t,e){if(8&e){let l;for(a=Object.keys(t[3].stats),l=0;l<a.length;l+=1){const r=pe(t,a,l);i[l]?i[l].p(r,e):(i[l]=ve(r),i[l].c(),i[l].m(n,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=a.length}if(8&e){let n;for(d=Object.values(t[3].stats)[0].values,n=0;n<d.length;n+=1){const l=ce(t,d,n);g[n]?g[n].p(l,e):(g[n]=be(l),g[n].c(),g[n].m(o,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=d.length}},d(t){t&&p(e),f(i,t),t&&p(s),t&&p(o),f(g,t)}}}function ve(t){let e,n,l=st(t[13])+"";return{c(){e=m("th"),n=d(l),b(e,"class","svelte-1tc8awj")},m(t,l){u(t,e,l),c(e,n)},p(t,e){8&e&&l!==(l=st(t[13])+"")&&_(n,l)},d(t){t&&p(e)}}}function ye(t){let e,n,l=t[10].values[t[9]]+"";return{c(){e=m("td"),n=d(l),b(e,"class","svelte-1tc8awj")},m(t,l){u(t,e,l),c(e,n)},p(t,e){8&e&&l!==(l=t[10].values[t[9]]+"")&&_(n,l)},d(t){t&&p(e)}}}function be(t){let e,n,l,r,s,o=t[9]+1+"",a=Object.values(t[3].stats),i=[];for(let e=0;e<a.length;e+=1)i[e]=ye(ue(t,a,e));return{c(){e=m("tr"),n=m("th"),l=d(o),r=h();for(let t=0;t<i.length;t+=1)i[t].c();s=h(),b(n,"class","svelte-1tc8awj"),b(e,"class","svelte-1tc8awj")},m(t,o){u(t,e,o),c(e,n),c(n,l),c(e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);c(e,s)},p(t,n){if(8&n){let l;for(a=Object.values(t[3].stats),l=0;l<a.length;l+=1){const r=ue(t,a,l);i[l]?i[l].p(r,n):(i[l]=ye(r),i[l].c(),i[l].m(e,s))}for(;l<i.length;l+=1)i[l].d(1);i.length=a.length}},d(t){t&&p(e),f(i,t)}}}function $e(e){let n,l,r=e[2]&&fe();function s(t,e){return t[3]?de:t[2]?void 0:me}let o=s(e),a=o&&o(e);return{c(){r&&r.c(),n=h(),a&&a.c(),l=g()},m(t,e){r&&r.m(t,e),u(t,n,e),a&&a.m(t,e),u(t,l,e)},p(t,[e]){t[2]?r||(r=fe(),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),o===(o=s(t))&&a?a.p(t,e):(a&&a.d(1),a=o&&o(t),a&&(a.c(),a.m(l.parentNode,l)))},i:t,o:t,d(t){r&&r.d(t),t&&p(n),a&&a.d(t),t&&p(l)}}}function _e(e,n,l){let r,s,a,i,c,u,p=t,f=t;e.$$.on_destroy.push((()=>p())),e.$$.on_destroy.push((()=>f()));let{assessData:m={}}=n;return e.$$set=t=>{"assessData"in t&&l(4,m=t.assessData)},e.$$.update=()=>{16&e.$$.dirty&&(l(1,[r,s,a,i]=function(t){const e=et(!1),n=et(!1),l=et(null);async function r(){e.set(!0),n.set(!1);try{const e=await fetch("https://orna.guide/api/v1/assess",{headers:{accept:"*/*","content-type":"application/x-www-form-urlencoded"},referrerPolicy:"strict-origin-when-cross-origin",body:JSON.stringify(t),method:"POST",mode:"cors"}).then((t=>t.json()));l.set(e)}catch(t){n.set(t)}e.set(!1)}return r(),[l,e,n,r]}(m),r,(l(0,s),p(),p=o(s,(t=>l(2,c=t))),s)),f(),f=o(r,(t=>l(3,u=t))))},[s,r,c,u,m]}class xe extends Y{constructor(t){super(),K(this,t,_e,$e,s,{assessData:4})}}function we(t,e,n){const l=t.slice();return l[15]=e[n],l[16]=e,l[17]=n,l}function ke(t,e,n){const l=t.slice();return l[18]=e[n],l}function Se(t){let e,n,r,s,o,a,i,$,x,k,S,j,O,z,C,D,L,P,q,E,N=t[2].item.name_zh+"",M=t[5],T=[];for(let e=0;e<M.length;e+=1)T[e]=je(ke(t,M,e));let B=t[4],H=[];for(let e=0;e<B.length;e+=1)H[e]=Oe(we(t,B,e));let J=t[3]&&ze(t);return{c(){e=m("form"),n=m("table"),r=m("caption"),s=d("品質試算\n            "),o=m("br"),a=d("\n            [ "),i=d(N),$=d(" ] Lv.\n            "),x=m("select");for(let t=0;t<T.length;t+=1)T[t].c();k=h();for(let t=0;t<H.length;t+=1)H[t].c();S=h(),j=m("div"),O=m("button"),O.textContent="Reset",z=h(),C=m("button"),C.textContent="Assess",D=h(),J&&J.c(),L=g(),void 0===t[1]&&A((()=>t[10].call(x))),b(r,"class","svelte-1cg221"),b(n,"class","assess-table svelte-1cg221"),b(O,"type","reset"),b(C,"type","submit"),b(j,"class","form-ctrl svelte-1cg221")},m(l,p){u(l,e,p),c(e,n),c(n,r),c(r,s),c(r,o),c(r,a),c(r,i),c(r,$),c(r,x);for(let t=0;t<T.length;t+=1)T[t].m(x,null);w(x,t[1]),c(n,k);for(let t=0;t<H.length;t+=1)H[t].m(n,null);c(e,S),c(e,j),c(j,O),c(j,z),c(j,C),u(l,D,p),J&&J.m(l,p),u(l,L,p),P=!0,q||(E=[v(x,"change",t[10]),v(O,"click",y(t[7])),v(C,"click",y(t[8]))],q=!0)},p(t,e){if((!P||4&e)&&N!==(N=t[2].item.name_zh+"")&&_(i,N),32&e){let n;for(M=t[5],n=0;n<M.length;n+=1){const l=ke(t,M,n);T[n]?T[n].p(l,e):(T[n]=je(l),T[n].c(),T[n].m(x,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=M.length}if(34&e&&w(x,t[1]),16&e){let l;for(B=t[4],l=0;l<B.length;l+=1){const r=we(t,B,l);H[l]?H[l].p(r,e):(H[l]=Oe(r),H[l].c(),H[l].m(n,null))}for(;l<H.length;l+=1)H[l].d(1);H.length=B.length}t[3]?J?(J.p(t,e),8&e&&I(J,1)):(J=ze(t),J.c(),I(J,1),J.m(L.parentNode,L)):J&&(W(),R(J,1,1,(()=>{J=null})),F())},i(t){P||(I(J),P=!0)},o(t){R(J),P=!1},d(t){t&&p(e),f(T,t),f(H,t),t&&p(D),J&&J.d(t),t&&p(L),q=!1,l(E)}}}function je(e){let n,l,r,s=e[18]+"";return{c(){n=m("option"),l=d(s),n.__value=r=e[18],n.value=n.__value},m(t,e){u(t,n,e),c(n,l)},p:t,d(t){t&&p(n)}}}function Oe(t){let e,n,r,s,o,a,i,f,g,y,w,k,S,j,O,z,C,D,L,P,q=t[15].prop+"",E=De(t[15])+"";function A(){t[11].call(a,t[16],t[17])}function N(){t[12].call(k,t[16],t[17])}return{c(){e=m("tr"),n=m("th"),r=d(q),s=h(),o=m("td"),a=m("input"),g=h(),y=m("br"),w=h(),k=m("input"),O=h(),z=m("td"),C=d(E),D=h(),b(n,"class","svelte-1cg221"),b(a,"type","number"),b(a,"max",i=t[15].max),b(a,"min",f=t[15].min),b(a,"step","1"),b(a,"class","svelte-1cg221"),b(k,"type","range"),b(k,"max",S=t[15].max),b(k,"min",j=t[15].min),b(k,"step","1"),b(k,"class","svelte-1cg221"),b(o,"class","text-center svelte-1cg221"),b(z,"class","svelte-1cg221")},m(l,i){u(l,e,i),c(e,n),c(n,r),c(e,s),c(e,o),c(o,a),x(a,t[15].value),c(o,g),c(o,y),c(o,w),c(o,k),x(k,t[15].value),c(e,O),c(e,z),c(z,C),c(e,D),L||(P=[v(a,"input",A),v(k,"change",N),v(k,"input",N)],L=!0)},p(e,n){t=e,16&n&&q!==(q=t[15].prop+"")&&_(r,q),16&n&&i!==(i=t[15].max)&&b(a,"max",i),16&n&&f!==(f=t[15].min)&&b(a,"min",f),16&n&&$(a.value)!==t[15].value&&x(a,t[15].value),16&n&&S!==(S=t[15].max)&&b(k,"max",S),16&n&&j!==(j=t[15].min)&&b(k,"min",j),16&n&&x(k,t[15].value),16&n&&E!==(E=De(t[15])+"")&&_(C,E)},d(t){t&&p(e),L=!1,l(P)}}}function ze(t){let e,n;return e=new xe({props:{assessData:t[3]}}),{c(){U(e.$$.fragment)},m(t,l){Q(e,t,l),n=!0},p(t,n){const l={};8&n&&(l.assessData=t[3]),e.$set(l)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function Ce(t){let e,n,r,s,o,a,i,f,d=t[2].item&&Se(t);return{c(){e=m("div"),n=m("div"),r=h(),s=m("main"),d&&d.c(),b(n,"class","dialog__overlay"),b(s,"class","dialog__content"),b(e,"class","dialog"),e.hidden=o=!t[2].open,b(e,"tabindex","-1")},m(l,o){u(l,e,o),c(e,n),c(e,r),c(e,s),d&&d.m(s,null),t[13](e),a=!0,i||(f=[v(n,"click",t[6]),v(e,"keydown",t[9])],i=!0)},p(t,[n]){t[2].item?d?(d.p(t,n),4&n&&I(d,1)):(d=Se(t),d.c(),I(d,1),d.m(s,null)):d&&(W(),R(d,1,1,(()=>{d=null})),F()),(!a||4&n&&o!==(o=!t[2].open))&&(e.hidden=o)},i(t){a||(I(d),a=!0)},o(t){R(d),a=!1},d(n){n&&p(e),d&&d.d(),t[13](null),i=!1,l(f)}}}function De(t){return`${(100*t.value/t.oValue).toFixed(1)}%`}function Le(t,e,n){let l,r,s,o;a(t,dt,(t=>n(2,s=t)));const c=new Array(13).fill(1).map(((t,e)=>e+1));let u=1;function p(){n(3,r=null),i(dt,s={open:!1},s)}return t.$$.update=()=>{var e;7&t.$$.dirty&&s&&s.stats&&(e=s.stats,n(4,l=e.map((t=>{let[e,n]=[2*t.value,~~(.7*t.value)].sort(ot);return{oProp:t.prop.split(".")[1],prop:nt[t.prop]||t.prop,value:t.value,oValue:t.value,max:1===u?n:3*n,min:e}}))),setTimeout((()=>{o.querySelector("input")?.select()})))},n(4,l=[]),n(3,r=null),[o,u,s,r,l,c,p,function(){n(3,r=null),n(4,l=l.map((t=>({...t,value:t.oValue})))),n(1,u=1)},function(){if(n(3,r=null),!l.length)return;let t={id:s.item.id},e=l.reduce(((t,e)=>(e.value!==e.oValue&&(t[e.oProp]=e.value),t)),t);1===Object.keys(e).length&&l.forEach((t=>{e[t.oProp]=t.oValue})),u>1&&(e.level=u),n(3,r=e)},function(t){"Escape"===t.code&&p()},function(){u=k(this),n(1,u),n(5,c)},function(t,e){t[e].value=$(this.value),n(4,l)},function(t,e){t[e].value=$(this.value),n(4,l)},function(t){D[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class Pe extends Y{constructor(t){super(),K(this,t,Le,Ce,s,{})}}function qe(t,e,n){const l=t.slice();return l[9]=e[n],l}function Ee(t){let e,n,r,s,o,a,i,g,$,k,S,j,O,z,C,D,L,P,q,E=t[2].item.id+"",N=t[2].item.zh+"",M=t[4],T=[];for(let e=0;e<M.length;e+=1)T[e]=Ae(qe(t,M,e));return{c(){e=m("form"),n=m("fieldset"),r=m("legend"),r.textContent="修正資料",s=h(),o=m("strong"),a=d("#"),i=d(E),g=d(" - "),$=d(N),k=h(),S=m("br"),j=h(),O=m("select");for(let t=0;t<T.length;t+=1)T[t].c();z=h(),C=m("input"),D=h(),L=m("input"),void 0===t[0]&&A((()=>t[7].call(O))),b(C,"type","text"),b(C,"placeholder",t[1]),b(L,"type","submit")},m(l,p){u(l,e,p),c(e,n),c(n,r),c(n,s),c(n,o),c(o,a),c(o,i),c(o,g),c(o,$),c(n,k),c(n,S),c(n,j),c(n,O);for(let t=0;t<T.length;t+=1)T[t].m(O,null);w(O,t[0]),c(n,z),c(n,C),x(C,t[3]),c(n,D),c(n,L),P||(q=[v(O,"change",t[7]),v(C,"input",t[8]),v(e,"submit",y(t[5]))],P=!0)},p(t,e){if(4&e&&E!==(E=t[2].item.id+"")&&_(i,E),4&e&&N!==(N=t[2].item.zh+"")&&_($,N),16&e){let n;for(M=t[4],n=0;n<M.length;n+=1){const l=qe(t,M,n);T[n]?T[n].p(l,e):(T[n]=Ae(l),T[n].c(),T[n].m(O,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=M.length}17&e&&w(O,t[0]),2&e&&b(C,"placeholder",t[1]),8&e&&C.value!==t[3]&&x(C,t[3])},d(t){t&&p(e),f(T,t),P=!1,l(q)}}}function Ae(e){let n,l,r,s=e[9]+"";return{c(){n=m("option"),l=d(s),n.__value=r=e[9],n.value=n.__value},m(t,e){u(t,n,e),c(n,l)},p:t,d(t){t&&p(n)}}}function Ne(e){let n,l,r,s,o,a,i,f=e[2].item&&Ee(e);return{c(){n=m("div"),l=m("div"),r=h(),s=m("main"),f&&f.c(),b(l,"class","dialog__overlay"),b(s,"class","dialog__content"),b(n,"class","dialog"),n.hidden=o=!e[2].open},m(t,o){u(t,n,o),c(n,l),c(n,r),c(n,s),f&&f.m(s,null),a||(i=v(l,"click",e[6]),a=!0)},p(t,[e]){t[2].item?f?f.p(t,e):(f=Ee(t),f.c(),f.m(s,null)):f&&(f.d(1),f=null),4&e&&o!==(o=!t[2].open)&&(n.hidden=o)},i:t,o:t,d(t){t&&p(n),f&&f.d(),a=!1,i()}}}function Me(t,e,n){let l;a(t,ht,(t=>n(2,l=t)));let r,s,o,c=l.props.sort();function u(){i(ht,l.open=!1,l),i(ht,l.item=null,l),n(3,s=null)}return t.$$.update=()=>{7&t.$$.dirty&&l.item&&(n(1,o=l.item[r]),Array.isArray(o)&&n(1,o=JSON.stringify(o)))},[r,o,l,s,c,function(){let t=new URLSearchParams({"entry.113918685":l.item.id,"entry.1082592511":l.item.zh,"entry.1807665084":`${r}: ${s}`}).toString();fetch(`https://docs.google.com/forms/d/e/1FAIpQLSe1u4EdX27HqFWXHXcCrhwxzPwVWVlHbDsb-Q5OFqhQzmNeJA/formResponse?&${t}&submit=SUBMIT`,{method:"POST",mode:"no-cors",redirect:"follow",referrer:"no-referrer"}).then((()=>{u()})).catch((()=>{alert("GG")}))},u,function(){r=k(this),n(0,r),n(4,c)},function(){s=this.value,n(3,s)}]}class Te extends Y{constructor(t){super(),K(this,t,Me,Ne,s,{})}}function Be(e){let n,l,r,s,o,a,i;return{c(){n=m("hr"),l=h(),r=m("hr"),s=h(),o=m("div"),o.textContent="Loading...",a=h(),i=m("hr"),b(o,"class","text-center")},m(t,e){u(t,n,e),u(t,l,e),u(t,r,e),u(t,s,e),u(t,o,e),u(t,a,e),u(t,i,e)},p:t,i:t,o:t,d(t){t&&p(n),t&&p(l),t&&p(r),t&&p(s),t&&p(o),t&&p(a),t&&p(i)}}}function He(t){let e,n,l,r,s,o,a,i,c,f;return e=new Mt({}),s=new ie({props:{items:t[1]}}),a=new Pe({}),c=new Te({}),{c(){U(e.$$.fragment),n=h(),l=m("hr"),r=h(),U(s.$$.fragment),o=h(),U(a.$$.fragment),i=h(),U(c.$$.fragment)},m(t,p){Q(e,t,p),u(t,n,p),u(t,l,p),u(t,r,p),Q(s,t,p),u(t,o,p),Q(a,t,p),u(t,i,p),Q(c,t,p),f=!0},p(t,e){const n={};2&e&&(n.items=t[1]),s.$set(n)},i(t){f||(I(e.$$.fragment,t),I(s.$$.fragment,t),I(a.$$.fragment,t),I(c.$$.fragment,t),f=!0)},o(t){R(e.$$.fragment,t),R(s.$$.fragment,t),R(a.$$.fragment,t),R(c.$$.fragment,t),f=!1},d(t){X(e,t),t&&p(n),t&&p(l),t&&p(r),X(s,t),t&&p(o),X(a,t),t&&p(i),X(c,t)}}}function Je(t){let e,n,l,r,s,o,a,i,f,d;const g=[He,Be],v=[];function y(t,e){return t[0]?0:1}return r=y(t),s=v[r]=g[r](t),{c(){e=m("div"),n=m("h1"),n.innerHTML='<a href="https://playorna.com/" target="_blank">Orna RPG</a> items lookup tool',l=h(),s.c(),o=h(),a=m("hr"),i=h(),f=m("footer"),f.innerHTML='go to check <a href="./monster/">Monsters Strategy</a><br/>\n  -- <br/>\n  * comment on <a href="https://docs.google.com/spreadsheets/d/1JZM_9U7hYtq39T0BeZHaUrJVKSWWNfxLxcZnrJPiHBQ/edit#gid=2050818910">Google spreadsheet</a> to update data <br/>\n  -- <br/>\n  * repo: <a href="https://github.com/rplus/orna-lookup" target="_blank">Rplus/orna-lookup</a>  <br/>\n  * origin data: <a href="https://orna.guide/" target="_blank">https://orna.guide/</a> api<br/>',b(n,"class","text-center"),b(e,"class","workspace svelte-h6ecfv"),b(f,"class","svelte-h6ecfv")},m(t,s){u(t,e,s),c(e,n),c(e,l),v[r].m(e,null),u(t,o,s),u(t,a,s),u(t,i,s),u(t,f,s),d=!0},p(t,[n]){let l=r;r=y(t),r===l?v[r].p(t,n):(W(),R(v[l],1,1,(()=>{v[l]=null})),F(),s=v[r],s?s.p(t,n):(s=v[r]=g[r](t),s.c()),I(s,1),s.m(e,null))},i(t){d||(I(s),d=!0)},o(t){R(s),d=!1},d(t){t&&p(e),v[r].d(),t&&p(o),t&&p(a),t&&p(i),t&&p(f)}}}function We(t,e,n){let l;a(t,ft,(t=>n(2,l=t)));let r=!1,s=[];return t.$$.update=()=>{5&t.$$.dirty&&(l.waiting||r||(n(0,r=!0),n(1,s=l.items)))},[r,s,l]}return new class extends Y{constructor(t){super(),K(this,t,We,Je,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
