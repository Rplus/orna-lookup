var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function r(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function i(e,t,n){e.$$.on_destroy.push(o(t,n))}function a(e,t,n=t){return e.set(n),t}function c(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function p(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function h(){return d(" ")}function g(){return d("")}function v(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function y(e){return function(t){return t.preventDefault(),e.call(this,t)}}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function $(e){return""===e?null:+e}function x(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function _(e,t){e.value=null==t?"":t}function k(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}}function w(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function S(e,t,n){e.classList[n?"add":"remove"](t)}let O;function j(e){O=e}function C(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const D=[],z=[],q=[],L=[],P=Promise.resolve();let E=!1;function N(e){q.push(e)}let T=!1;const A=new Set;function M(){if(!T){T=!0;do{for(let e=0;e<D.length;e+=1){const t=D[e];j(t),B(t.$$)}for(j(null),D.length=0;z.length;)z.pop()();for(let e=0;e<q.length;e+=1){const t=q[e];A.has(t)||(A.add(t),t())}q.length=0}while(D.length);for(;L.length;)L.pop()();E=!1,T=!1,A.clear()}}function B(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(N)}}const W=new Set;let J;function R(){J={r:0,c:[],p:J}}function I(){J.r||l(J.c),J=J.p}function H(e,t){e&&e.i&&(W.delete(e),e.i(t))}function F(e,t,n,l){if(e&&e.o){if(W.has(e))return;W.add(e),J.c.push((()=>{W.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}}function U(e,t){F(e,1,1,(()=>{t.delete(e.key)}))}function V(e,t,n,l,r,s,o,i,a,c,u,p){let f=e.length,m=s.length,d=f;const h={};for(;d--;)h[e[d].key]=d;const g=[],v=new Map,y=new Map;for(d=m;d--;){const e=p(r,s,d),i=n(e);let a=o.get(i);a?l&&a.p(e,t):(a=c(i,e),a.c()),v.set(i,g[d]=a),i in h&&y.set(i,Math.abs(d-h[i]))}const b=new Set,$=new Set;function x(e){H(e,1),e.m(i,u),o.set(e.key,e),u=e.first,m--}for(;f&&m;){const t=g[m-1],n=e[f-1],l=t.key,r=n.key;t===n?(u=t.first,f--,m--):v.has(r)?!o.has(l)||b.has(l)?x(t):$.has(r)?f--:y.get(l)>y.get(r)?($.add(l),x(t)):(b.add(r),f--):(a(n,o),f--)}for(;f--;){const t=e[f];v.has(t.key)||a(t,o)}for(;m;)x(g[m-1]);return g}function G(e){e&&e.c()}function Q(e,n,s,o){const{fragment:i,on_mount:a,on_destroy:c,after_update:u}=e.$$;i&&i.m(n,s),o||N((()=>{const n=a.map(t).filter(r);c?c.push(...n):l(n),e.$$.on_mount=[]})),u.forEach(N)}function X(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(e,t){-1===e.$$.dirty[0]&&(D.push(e),E||(E=!0,P.then(M)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(t,r,s,o,i,a,c,u=[-1]){const f=O;j(t);const m=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:r.context||[]),callbacks:n(),dirty:u,skip_bound:!1,root:r.target||f.$$.root};c&&c(m.root);let d=!1;if(m.ctx=s?s(t,r.props||{},((e,n,...l)=>{const r=l.length?l[0]:n;return m.ctx&&i(m.ctx[e],m.ctx[e]=r)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](r),d&&Z(t,e)),n})):[],m.update(),d=!0,l(m.before_update),m.fragment=!!o&&o(m.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);m.fragment&&m.fragment.l(e),e.forEach(p)}else m.fragment&&m.fragment.c();r.intro&&H(t.$$.fragment),Q(t,r.target,r.anchor,r.customElement),M()}j(f)}class Y{$destroy(){X(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ee=[];function te(t,n=e){let l;const r=new Set;function o(e){if(s(t,e)&&(t=e,l)){const e=!ee.length;for(const e of r)e[1](),ee.push(e,t);if(e){for(let e=0;e<ee.length;e+=2)ee[e][0](ee[e+1]);ee.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(s,i=e){const a=[s,i];return r.add(a),1===r.size&&(l=n(o)||e),s(t),()=>{r.delete(a),0===r.size&&(l(),l=null)}}}}const ne={Bleeding:"流血",Frozen:"冰凍",Burning:"燃燒",Asleep:"入睡",Paralyzed:"麻痺",Blind:"致盲",Stunned:"暈眩",Rot:"腐敗",Blight:"枯萎",Petrified:"石化",Poisoned:"中毒",Drenched:"濕滑",Cursed:"詛咒",Toxic:"劇毒",Lulled:"恍惚",Stasis:"停滯",Doom:"厄運",Confused:"迷惑",Mage:"法師",Thief:"盜賊",Warrior:"戰士",Curative:"藥水",Weapon:".. 武器",Other:"其他",Item:"物品",Head:". 頭部",Armor:".. 護甲",Legs:"... 腿部",Accessory:"... 配件",Material:"材料","Off-hand":".. 副手",Adornment:"裝飾品",dark:"闇",water:"水",fire:"火",physical:"物",holy:"光",earthen:"土",lightning:"雷",dragon:"龍",arcane:"奧","Fire Def":".火抗","Water Def":".水抗","Earth Def":".土抗","Lightning Def":".雷抗","Holy Def":".光抗","Dark Def":".闇抗",attack:"物攻",magic:"魔攻",defense:"物防",ward:"護盾",dexterity:"敏捷",mana:"魔力",crit:"暴擊",resistance:"魔防",hp:"血量",foresight:"預知",w:"1 白",g:"2 綠",b:"3 藍",p:"4 紫",shops:"商店",chests:"寶箱",bows:"弓箭",swords:"劍",staffs:"杖",daggers:"匕首",instruments:"樂器",polearms:"長矛",archistaffs:"大法師杖","axes & hammers":"斧&錘","curved swords":"彎刀",greatbows:"長弓"};function le(e){return function(e){for(let t in e)e[t]=e[t].filter(Boolean).map((e=>({value:e,label:ne[e]?`${ne[e]} ${e}`:e}))).sort(((e,t)=>re(e.label,t.label))),e[t].unshift({value:"",label:""});return e}({types:[...new Set(e.map((e=>e.type)))],categories:[...new Set(e.map((e=>e.category)))],tiers:[...new Set(e.map((e=>e.tier)))],element:[...new Set(e.map((e=>e.element)))],immunities:[...new Set(e.map((e=>e.immunities)).flat())],causes:[...new Set(e.map((e=>e.causes)).flat())],gives:[...new Set(e.map((e=>e.gives)).flat())],cures:[...new Set(e.map((e=>e.cures)).flat())],tags:[...new Set(e.map((e=>e.tags)).flat())],rarity:[...new Set(e.map((e=>e.rarity)))],equipped_by:[...new Set(e.map((e=>e.equipped_by)).flat().filter(Boolean))]})}function re(e,t){switch(typeof e){case"number":return e-t;case"string":return e.toLowerCase().localeCompare(t.toLowerCase());default:return e>t}}function se(e,t){return t.split(".").reduce(((e,t)=>e?.[t]),e)}function oe(e){return ne[e]||e}function ie(e,t){return e-t}function ae(e,t){return{timestamp:t||+new Date,rule:{prop:e.prop,value:ce(e.value,e.type),type:e.type,comparator:e.comparator||"="}}}function ce(e,t){switch(t){case"number":return+e;case"text":default:return String(e)}return e}function ue(e){return ae({prop:"name.zh",value:e||"",type:"text"})}const pe={M:"Mage",T:"Thief",W:"Warrior"};function fe(e,t){return t.tier-e.tier}const me=[{prop:"name.zh",label:"name.zh",type:"text",sort:!0},{prop:"name.en",label:"name.en",type:"text",sort:!0},{prop:"tier",label:"Tier ★",type:"number",list:"tiers",min:1,max:10,sort:!0},{prop:"equipped_by",label:"穿戴者",type:"text",list:"equipped_by"},{prop:"type",label:"裝備類型",type:"text",list:"types",sort:!0},{prop:"category",label:"類別",type:"text",list:"categories"},{prop:"immunities",label:"-免疫(敵)",type:"text",list:"immunities"},{prop:"cures",label:"-治療(己)",type:"text",list:"cures"},{prop:"causes",label:"+造成(敵)",type:"text",list:"causes"},{prop:"gives",label:"+賦予(己)",type:"text",list:"gives"},{prop:"slots",label:"槽位數",type:"number",sort:!0},{prop:"two_handed",label:"雙手使用",type:"checkbox"},{prop:"element",label:"元素",type:"text",list:"element",sort:!0},{prop:"rarity",label:"稀有度",type:"text",list:"rarity"},{prop:"tags",label:"Tags",type:"text",list:"tags"},{prop:"boss",label:"👿 BOSS",type:"checkbox"},{prop:"arena",label:"🏟️ 競技場",type:"checkbox"},{prop:"view_distance",label:"👁️ +視野",type:"checkbox"},{prop:"materials",label:"材料id",type:"number",checkId:!0},{prop:"dropped_by",label:"掉落者id",type:"number",checkId:!0},{prop:"stats.attack",label:".物攻",type:"number",sort:!0},{prop:"stats.magic",label:".魔攻",type:"number",sort:!0},{prop:"stats.defense",label:".物防",type:"number",sort:!0},{prop:"stats.resistance",label:".魔防",type:"number",sort:!0},{prop:"stats.dexterity",label:".敏捷",type:"number",sort:!0},{prop:"stats.crit",label:".暴擊",type:"number",sort:!0},{prop:"stats.ward",label:".護盾",type:"number",sort:!0},{prop:"stats.mana",label:".魔力",type:"number",sort:!0},{prop:"stats.hp",label:".血量",type:"number",sort:!0},{prop:"stats.foresight",label:".預知",type:"number",sort:!0},{prop:"other_effect",label:"加成/技能",type:"text"},{prop:"context",label:"全文搜索",type:"text"},{prop:"gid",label:"gid",type:"number",min:1,sort:!0}],de=te({waiting:!0}),he=te({}),ge=te({open:!1}),ve=te({open:!1,item:null,props:[]});Promise.all(["./data/merged_items.min.json","./data/monster.min.json"].map((e=>fetch(e).then((e=>e.json()))))).then((e=>{let t=function(e,t,n){let l=e=>{let n=t.find((t=>t.id===e));return n?{gid:n.id,tier:n.tier,name:n.name,name_zh:n.zh}:null},r=t=>{let n=e.find((e=>e.gid===t));return n?{gid:n.gid,oid:n.oid,tier:n.tier,name:n.name.en,name_zh:n.name.zh}:null},s={};e.forEach((e=>{e.dropped_by&&(e.dropped_by=e.dropped_by.map(l).sort(fe)),e.materials&&(e.materials.forEach((t=>{s[t]=s[t]||[],s[t].push(e.gid)})),e.materials=e.materials.map(r).sort(fe)),e.equipped_by&&(e.equipped_by=e.equipped_by.split("").map((e=>pe[e]))),e.context=JSON.stringify(e)}));for(let t in s){let n=e.find((e=>e.gid===+t));n&&(n.resource=[...new Set(s[t])].map(r).sort(fe))}return n=Object.keys(n).map((e=>({...n[e],oid:e}))),{items:e,monsters:t,spells:n}}(e[0].item,e[1],e[0].spells);const n=t.items,l=t.monsters,r=t.spells;window.ddd=n,he.set(le(n)),ve.set({open:!1,item:null,props:[...new Set(n.map((e=>Object.keys(e))).flat())]}),de.set({items:n,monsters:l,spells:r})}));let ye=[...new URLSearchParams(location.search)].map(((e,t)=>{let n=me.find((t=>t.prop===e[0])),l=e[1].split("|"),r=l?.[1]||"=";return n?ae({prop:n.prop,type:n.type,value:l?.[0],comparator:decodeURIComponent(r)},+new Date+t):null})).filter(Boolean);ye.length||(ye=[ue("")]);const be=function(){const{subscribe:e,set:t,update:n}=te(ye);return{subscribe:e,set:t,update:n,add:e=>n((t=>(t[t.length]=e,t))),remove:e=>n((t=>{let n=t.findIndex((t=>t.timestamp===e));return-1!==n&&t.splice(n,1),t})),reset:()=>t([])}}();function $e(e,t,n){const l=e.slice();return l[14]=t[n],l}function xe(e,t,n){const l=e.slice();return l[17]=t[n],l}function _e(t){let n,l,r,s=t[17].label+"";return{c(){n=m("option"),l=d(s),n.__value=r=t[17].prop,n.value=n.__value},m(e,t){u(e,n,t),c(n,l)},p:e,d(e){e&&p(n)}}}function ke(e){let t,n,l;return{c(){t=m("input"),b(t,"accesskey","s"),b(t,"type","search")},m(r,s){u(r,t,s),_(t,e[0].rule.value),n||(l=v(t,"input",e[11]),n=!0)},p(e,n){1&n&&_(t,e[0].rule.value)},d(e){e&&p(t),n=!1,l()}}}function we(e){let t,n,l,r,s;return{c(){t=m("input"),b(t,"accesskey","s"),b(t,"type","number"),b(t,"min",n=e[1].min),b(t,"max",l=e[1].max)},m(n,l){u(n,t,l),_(t,e[0].rule.value),r||(s=v(t,"input",e[10]),r=!0)},p(e,r){2&r&&n!==(n=e[1].min)&&b(t,"min",n),2&r&&l!==(l=e[1].max)&&b(t,"max",l),1&r&&$(t.value)!==e[0].rule.value&&_(t,e[0].rule.value)},d(e){e&&p(t),r=!1,s()}}}function Se(e){let t,n,l,r=e[2][e[1].list],s=[];for(let t=0;t<r.length;t+=1)s[t]=je($e(e,r,t));return{c(){t=m("select");for(let e=0;e<s.length;e+=1)s[e].c();void 0===e[0].rule.value&&N((()=>e[9].call(t)))},m(r,o){u(r,t,o);for(let e=0;e<s.length;e+=1)s[e].m(t,null);k(t,e[0].rule.value),n||(l=v(t,"change",e[9]),n=!0)},p(e,n){if(6&n){let l;for(r=e[2][e[1].list],l=0;l<r.length;l+=1){const o=$e(e,r,l);s[l]?s[l].p(o,n):(s[l]=je(o),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=r.length}1&n&&k(t,e[0].rule.value)},d(e){e&&p(t),f(s,e),n=!1,l()}}}function Oe(e){let t,n,r,s,o,i,a,f,g;return{c(){t=m("label"),n=d("T\n      "),r=m("input"),s=h(),o=m("label"),i=m("input"),a=d("\n      F"),b(r,"type","radio"),r.__value="1",r.value=r.__value,e[7][0].push(r),b(i,"type","radio"),i.__value="0",i.value=i.__value,e[7][0].push(i)},m(l,p){u(l,t,p),c(t,n),c(t,r),r.checked=r.__value===e[0].rule.value,u(l,s,p),u(l,o,p),c(o,i),i.checked=i.__value===e[0].rule.value,c(o,a),f||(g=[v(r,"change",e[6]),v(i,"change",e[8])],f=!0)},p(e,t){1&t&&(r.checked=r.__value===e[0].rule.value),1&t&&(i.checked=i.__value===e[0].rule.value)},d(n){n&&p(t),e[7][0].splice(e[7][0].indexOf(r),1),n&&p(s),n&&p(o),e[7][0].splice(e[7][0].indexOf(i),1),f=!1,l(g)}}}function je(e){let t,n,l,r=e[14].label+"";return{c(){t=m("option"),n=d(r),t.__value=l=e[14].value,t.value=t.__value},m(e,l){u(e,t,l),c(t,n)},p(e,s){6&s&&r!==(r=e[14].label+"")&&x(n,r),6&s&&l!==(l=e[14].value)&&(t.__value=l,t.value=t.__value)},d(e){e&&p(t)}}}function Ce(e){let t,n,l,r,s,o;return{c(){t=m("select"),n=m("option"),n.textContent="=",l=m("option"),l.textContent="+",r=m("option"),r.textContent="-",n.__value="=",n.value=n.__value,l.__value="+",l.value=l.__value,r.__value="-",r.value=r.__value,void 0===e[0].rule.comparator&&N((()=>e[12].call(t)))},m(i,a){u(i,t,a),c(t,n),c(t,l),c(t,r),k(t,e[0].rule.comparator),s||(o=v(t,"change",e[12]),s=!0)},p(e,n){1&n&&k(t,e[0].rule.comparator)},d(e){e&&p(t),s=!1,o()}}}function De(t){let n,s,o,i,a,g,y,$,x,_=me,w=[];for(let e=0;e<_.length;e+=1)w[e]=_e(xe(t,_,e));function S(e,t){return"checkbox"===e[1].type?Oe:e[1].list?Se:"number"===e[1].type?we:"text"===e[1].type?ke:void 0}let O=S(t),j=O&&O(t),C="number"===t[1].type&&Ce(t);return{c(){n=m("div"),s=m("button"),s.textContent="x",o=h(),i=m("select");for(let e=0;e<w.length;e+=1)w[e].c();a=d("}"),g=h(),j&&j.c(),y=h(),C&&C.c(),void 0===t[0].rule.prop&&N((()=>t[5].call(i))),b(n,"class","filters")},m(e,l){u(e,n,l),c(n,s),c(n,o),c(n,i);for(let e=0;e<w.length;e+=1)w[e].m(i,null);c(i,a),k(i,t[0].rule.prop),c(n,g),j&&j.m(n,null),c(n,y),C&&C.m(n,null),$||(x=[v(s,"click",(function(){r(t[4](t[0].timestamp))&&t[4](t[0].timestamp).apply(this,arguments)})),v(i,"change",t[5]),v(i,"change",t[3])],$=!0)},p(e,[l]){if(t=e,0&l){let e;for(_=me,e=0;e<_.length;e+=1){const n=xe(t,_,e);w[e]?w[e].p(n,l):(w[e]=_e(n),w[e].c(),w[e].m(i,a))}for(;e<w.length;e+=1)w[e].d(1);w.length=_.length}1&l&&k(i,t[0].rule.prop),O===(O=S(t))&&j?j.p(t,l):(j&&j.d(1),j=O&&O(t),j&&(j.c(),j.m(n,y))),"number"===t[1].type?C?C.p(t,l):(C=Ce(t),C.c(),C.m(n,null)):C&&(C.d(1),C=null)},i:e,o:e,d(e){e&&p(n),f(w,e),j&&j.d(),C&&C.d(),$=!1,l(x)}}}function ze(e,t,n){let l;i(e,he,(e=>n(2,l=e)));let{filter:r}=t,s=o(r.rule.prop);function o(e){return me.find((t=>t.prop===e))}return e.$$set=e=>{"filter"in e&&n(0,r=e.filter)},e.$$.update=()=>{3&e.$$.dirty&&(n(1,s=o(r.rule.prop)),n(0,r.rule.type=s.type,r))},[r,s,l,function(){n(0,r.rule.value="",r)},function(e){be.remove(e)},function(){r.rule.prop=w(this),n(0,r),n(1,s)},function(){r.rule.value=this.__value,n(0,r),n(1,s)},[[]],function(){r.rule.value=this.__value,n(0,r),n(1,s)},function(){r.rule.value=w(this),n(0,r),n(1,s)},function(){r.rule.value=$(this.value),n(0,r),n(1,s)},function(){r.rule.value=this.value,n(0,r),n(1,s)},function(){r.rule.comparator=w(this),n(0,r),n(1,s)}]}class qe extends Y{constructor(e){super(),K(this,e,ze,De,s,{filter:0})}}function Le(e,t,n){const l=e.slice();return l[5]=t[n],l[6]=t,l[7]=n,l}function Pe(e,t){let n,l,r,s,o;function i(e){t[3](e,t[5],t[6],t[7])}let a={};return void 0!==t[5]&&(a.filter=t[5]),l=new qe({props:a}),z.push((()=>function(e,t,n){const l=e.$$.props[t];void 0!==l&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}(l,"filter",i))),{key:e,first:null,c(){n=m("li"),G(l.$$.fragment),s=h(),this.first=n},m(e,t){u(e,n,t),Q(l,n,null),c(n,s),o=!0},p(e,n){t=e;const s={};var o;!r&&1&n&&(r=!0,s.filter=t[5],o=()=>r=!1,L.push(o)),l.$set(s)},i(e){o||(H(l.$$.fragment,e),o=!0)},o(e){F(l.$$.fragment,e),o=!1},d(e){e&&p(n),X(l)}}}function Ee(e){let t,n,l,r,s,o,i,a,f,g,y,$=[],x=new Map,_=e[0];const k=e=>e[5].timestamp;for(let t=0;t<_.length;t+=1){let n=Le(e,_,t),l=k(n);x.set(l,$[t]=Pe(l,n))}return{c(){t=m("aside"),n=m("button"),n.textContent="+過濾條件",l=h(),r=m("a"),s=d("⚓"),i=h(),a=m("ul");for(let e=0;e<$.length;e+=1)$[e].c();b(r,"href",o="./?"+e[1]),b(a,"class","svelte-km15j4"),b(t,"class","svelte-km15j4")},m(o,p){u(o,t,p),c(t,n),c(t,l),c(t,r),c(r,s),c(t,i),c(t,a);for(let e=0;e<$.length;e+=1)$[e].m(a,null);f=!0,g||(y=v(n,"click",e[2]),g=!0)},p(e,[t]){(!f||2&t&&o!==(o="./?"+e[1]))&&b(r,"href",o),1&t&&(_=e[0],R(),$=V($,t,k,1,e,_,x,a,U,Pe,null,Le),I())},i(e){if(!f){for(let e=0;e<_.length;e+=1)H($[e]);f=!0}},o(e){for(let e=0;e<$.length;e+=1)F($[e]);f=!1},d(e){e&&p(t);for(let e=0;e<$.length;e+=1)$[e].d();g=!1,y()}}}function Ne(e,t,n){let l;i(e,be,(e=>n(0,l=e)));let r="";return e.$$.update=()=>{1&e.$$.dirty&&function(){let e=new URLSearchParams;l.forEach((t=>{("string"!=typeof t.rule.value||t.rule.value)&&e.append(t.rule.prop,"="===t.rule.comparator?t.rule.value:`${t.rule.value}|${encodeURIComponent(t.rule.comparator)}`)})),n(1,r=e.toString())}()},[l,r,function(){be.add(ue(""))},function(e,t,n,r){n[r]=e,be.set(l)}]}class Te extends Y{constructor(e){super(),K(this,e,Ne,Ee,s,{})}}function Ae(e){return`--bg: url(${function(e,t){if(e)return`https://playorna.com/static/img/${e.img}`}(e)});`}function Me(e,t,n){const l=e.slice();return l[6]=t[n],l}function Be(e){let t,n,l,r,s,o=e[0],i=[];for(let t=0;t<o.length;t+=1)i[t]=We(Me(e,o,t));return{c(){t=m("details"),n=m("summary"),l=d(e[1]),r=h(),s=m("ul");for(let e=0;e<i.length;e+=1)i[e].c();t.open=!0},m(e,o){u(e,t,o),c(t,n),c(n,l),c(t,r),c(t,s);for(let e=0;e<i.length;e+=1)i[e].m(s,null)},p(e,t){if(2&t&&x(l,e[1]),13&t){let n;for(o=e[0],n=0;n<o.length;n+=1){const l=Me(e,o,n);i[n]?i[n].p(l,t):(i[n]=We(l),i[n].c(),i[n].m(s,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(e){e&&p(t),f(i,e)}}}function We(e){let t,n,l,r,s,o,i,a,f,g,$,_,k=e[6].tier+"",w=(e[6].name_zh||e[6].name)+"";function S(){return e[5](e[6])}return{c(){t=m("li"),n=m("a"),l=m("small"),r=d("★"),s=d(k),o=d(" -"),i=h(),a=d(w),g=h(),b(n,"href",f="https://orna.guide/"+e[2]+"?show="+e[6].gid),b(n,"target","orna.guide")},m(e,p){u(e,t,p),c(t,n),c(n,l),c(l,r),c(l,s),c(l,o),c(n,i),c(n,a),c(t,g),$||(_=v(n,"click",y(S)),$=!0)},p(t,l){e=t,1&l&&k!==(k=e[6].tier+"")&&x(s,k),1&l&&w!==(w=(e[6].name_zh||e[6].name)+"")&&x(a,w),5&l&&f!==(f="https://orna.guide/"+e[2]+"?show="+e[6].gid)&&b(n,"href",f)},d(e){e&&p(t),$=!1,_()}}}function Je(t){let n,l=t[0]&&Be(t);return{c(){l&&l.c(),n=g()},m(e,t){l&&l.m(e,t),u(e,n,t)},p(e,[t]){e[0]?l?l.p(e,t):(l=Be(e),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:e,o:e,d(e){l&&l.d(e),e&&p(n)}}}function Re(e,t,n){let{items:l=null}=t,{title:r=""}=t,{type:s="monsters"}=t,{prop:o=""}=t;function i(e){let t=ae({prop:o,value:e,type:"number"});be.set([t])}return e.$$set=e=>{"items"in e&&n(0,l=e.items),"title"in e&&n(1,r=e.title),"type"in e&&n(2,s=e.type),"prop"in e&&n(4,o=e.prop)},[l,r,s,i,o,e=>i(e.gid)]}class Ie extends Y{constructor(e){super(),K(this,e,Re,Je,s,{items:0,title:1,type:2,prop:4})}}function He(e,t,n){const l=e.slice();return l[10]=t[n],l}function Fe(e,t,n){const l=e.slice();return l[13]=t[n],l}function Ue(e,t,n){const l=e.slice();return l[16]=t[n],l}function Ve(t){let n,l,r,s,o,i,a,f=oe(t[16].prop)+"",g=t[16].value+"";return{c(){n=m("tr"),l=m("th"),r=d(f),s=h(),o=m("td"),i=d(g),a=h(),b(l,"class","svelte-14y43kt")},m(e,t){u(e,n,t),c(n,l),c(l,r),c(n,s),c(n,o),c(o,i),c(n,a)},p:e,d(e){e&&p(n)}}}function Ge(e){let t,n,l,r,s,o,i,a,g,v=e[10][1]+"",y=e[0][e[10][0]],$=[];for(let t=0;t<y.length;t+=1)$[t]=Ze(Fe(e,y,t));return{c(){t=m("div"),n=m("span"),l=d("[ "),r=d(v),s=d(" ]"),i=h(),a=m("br"),g=d("\n            -------\n            ");for(let e=0;e<$.length;e+=1)$[e].c();b(n,"title",o=e[10][0]),b(t,"class","text-right svelte-14y43kt")},m(e,o){u(e,t,o),c(t,n),c(n,l),c(n,r),c(n,s),c(t,i),c(t,a),c(t,g);for(let e=0;e<$.length;e+=1)$[e].m(t,null)},p(e,n){if(35&n){let l;for(y=e[0][e[10][0]],l=0;l<y.length;l+=1){const r=Fe(e,y,l);$[l]?$[l].p(r,n):($[l]=Ze(r),$[l].c(),$[l].m(t,null))}for(;l<$.length;l+=1)$[l].d(1);$.length=y.length}},d(e){e&&p(t),f($,e)}}}function Qe(e){let t,n,l=oe(e[13])+"";return{c(){t=m("div"),n=d(l)},m(e,l){u(e,t,l),c(t,n)},p(e,t){1&t&&l!==(l=oe(e[13])+"")&&x(n,l)},d(e){e&&p(t)}}}function Xe(e){let t,n,l,r,s,o,i=oe(e[13])+"";return{c(){t=m("div"),n=m("a"),l=d(i),b(n,"href",r=e[5](e[13])),b(n,"target","codex")},m(r,i){var a;u(r,t,i),c(t,n),c(n,l),s||(o=v(n,"click",(a=e[7],function(e){return e.stopPropagation(),a.call(this,e)})),s=!0)},p(e,t){1&t&&i!==(i=oe(e[13])+"")&&x(l,i),1&t&&r!==(r=e[5](e[13]))&&b(n,"href",r)},d(e){e&&p(t),s=!1,o()}}}function Ze(e){let t,n;function l(e,n){return(null==t||1&n)&&(t=!(!e[13].startsWith||!e[13].startsWith("技能:"))),t?Xe:Qe}let r=l(e,-1),s=r(e);return{c(){s.c(),n=g()},m(e,t){s.m(e,t),u(e,n,t)},p(e,t){r===(r=l(e,t))&&s?s.p(e,t):(s.d(1),s=r(e),s&&(s.c(),s.m(n.parentNode,n)))},d(e){s.d(e),e&&p(n)}}}function Ke(e){let t,n=e[0][e[10][0]]&&Ge(e);return{c(){n&&n.c(),t=g()},m(e,l){n&&n.m(e,l),u(e,t,l)},p(e,l){e[0][e[10][0]]?n?n.p(e,l):(n=Ge(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&p(t)}}}function Ye(e){let t,n,l;return n=new Ie({props:{items:e[0].resource,title:"分解來源",type:"items",prop:"gid"}}),{c(){t=m("div"),G(n.$$.fragment),b(t,"class","resource")},m(e,r){u(e,t,r),Q(n,t,null),l=!0},p(e,t){const l={};1&t&&(l.items=e[0].resource),n.$set(l)},i(e){l||(H(n.$$.fragment,e),l=!0)},o(e){F(n.$$.fragment,e),l=!1},d(e){e&&p(t),X(n)}}}function et(e){let t,n,r,s,o,i,a,g,$,_,k,w,S,O,j,C,D,z,q,L,P,E,N,T,A,M,B,W,J,U,V,Z,K,Y,ee,te,le,re,se,oe,ie,ae,ce,ue,pe,fe,me,de,he,ge,ve,ye,be,$e,xe,_e,ke,we,Se,Oe,je,Ce,De,ze,qe,Le,Pe,Ee,Ne,Te,Me,Be,We=e[0].name.zh+"",Je=e[0].name.en+"",Re=e[0].tier+"",Fe=e[0].gid+"",Ge=ne[e[0].element]?`[${ne[e[0].element]}]`:"",Qe=e[0].boss?"👿":"",Xe=e[0].arena?"🏟️":"",Ze=e[0].view_distance?"👁️":"",et=e[0].two_handed?"🙌":"",tt=JSON.stringify({...e[0],context:""},null," ")+"",nt=e[2].length&&function(e){let t,n,l,r,s,o,i,a=e[2],h=[];for(let t=0;t<a.length;t+=1)h[t]=Ve(Ue(e,a,t));return{c(){t=m("div"),n=d("[ Stats ]\n          "),l=m("br"),r=d("\n          ---------\n          "),s=m("table");for(let e=0;e<h.length;e+=1)h[e].c();var e,o,i;b(s,"class","svelte-14y43kt"),e="cursor",o="pointer",t.style.setProperty(e,o,i?"important":""),b(t,"class","svelte-14y43kt")},m(a,p){u(a,t,p),c(t,n),c(t,l),c(t,r),c(t,s);for(let e=0;e<h.length;e+=1)h[e].m(s,null);o||(i=v(t,"click",e[3]),o=!0)},p(e,t){if(4&t){let n;for(a=e[2],n=0;n<a.length;n+=1){const l=Ue(e,a,n);h[n]?h[n].p(l,t):(h[n]=Ve(l),h[n].c(),h[n].m(s,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=a.length}},d(e){e&&p(t),f(h,e),o=!1,i()}}}(e),lt=e[1],rt=[];for(let t=0;t<lt.length;t+=1)rt[t]=Ke(He(e,lt,t));$e=new Ie({props:{items:e[0].dropped_by,title:"掉落方",type:"monsters",prop:"dropped_by"}}),ke=new Ie({props:{items:e[0].materials,title:"材料",type:"items",prop:"gid"}});let st=e[0].resource&&Ye(e);return{c(){t=m("details"),n=m("summary"),r=m("ruby"),s=m("rb"),o=d(We),i=h(),a=m("rt"),g=m("a"),$=d(Je),k=h(),w=m("sub"),S=d(Re),j=h(),C=m("a"),D=m("sup"),z=d("#"),q=d(Fe),P=h(),E=m("div"),N=m("div"),A=h(),nt&&nt.c(),M=h();for(let e=0;e<rt.length;e+=1)rt[e].c();B=h(),W=m("div"),J=m("div"),V=h(),Z=m("div"),K=d(Ge),Y=h(),ee=m("div"),te=d(Qe),le=h(),re=m("div"),se=d(Xe),oe=h(),ie=m("div"),ae=d(Ze),ce=h(),ue=m("div"),pe=d(et),fe=h(),me=m("div"),ge=h(),ve=m("div"),ye=m("div"),be=m("div"),G($e.$$.fragment),xe=h(),_e=m("div"),G(ke.$$.fragment),we=h(),st&&st.c(),Se=h(),Oe=m("details"),je=m("summary"),Ce=h(),De=m("pre"),ze=d(tt),qe=h(),Le=m("div"),Le.textContent="🛠️",b(g,"href",_="https://playorna.com/codex/items/"+e[0].oid+"/"),b(g,"target","codex"),b(g,"class","svelte-14y43kt"),b(a,"class","svelte-14y43kt"),b(r,"class","svelte-14y43kt"),b(w,"class","tier svelte-14y43kt"),b(w,"data-tier",O=e[0].tier),b(D,"class","svelte-14y43kt"),b(C,"href",L="https://orna.guide/items?show="+e[0].gid),b(C,"target","orna.guide"),b(C,"class","svelte-14y43kt"),b(N,"class","item-img-box svelte-14y43kt"),b(N,"style",T=Ae(e[0])),b(J,"class","item-equipped svelte-14y43kt"),b(J,"title",U=e[0].equipped_by),b(Z,"class","item-char svelte-14y43kt"),b(ee,"class","item-char svelte-14y43kt"),b(ee,"title","dropped from boss"),b(re,"class","item-char svelte-14y43kt"),b(re,"title","dropped from arena"),b(ie,"class","item-char svelte-14y43kt"),b(ie,"title","enhance view distance"),b(ue,"class","item-char svelte-14y43kt"),b(ue,"title","two hands"),b(me,"class","item-slots svelte-14y43kt"),b(me,"data-slots",de=e[0].slots),b(me,"title",he=e[0].slots+" slots"),b(W,"class","rt-box svelte-14y43kt"),b(E,"class","item-info svelte-14y43kt"),b(n,"class","summary svelte-14y43kt"),b(be,"class","dropped_by"),b(_e,"class","materials"),b(je,"class","raw-summary text-right svelte-14y43kt"),b(De,"class","raw-pre item-pre svelte-14y43kt"),b(Oe,"class","raw-details svelte-14y43kt"),b(Le,"class","fixform svelte-14y43kt"),b(Le,"title","FIX DATA"),b(ye,"class","item-more svelte-14y43kt"),b(ye,"data-type",Pe=ne[e[0].type]),b(ye,"data-category",Ee=ne[e[0].category]||""),b(ve,"class","svelte-14y43kt"),b(t,"class",Ne="item-details item-rarity--"+(e[0].rarity||"w")+" svelte-14y43kt")},m(l,p){u(l,t,p),c(t,n),c(n,r),c(r,s),c(s,o),c(r,i),c(r,a),c(a,g),c(g,$),c(n,k),c(n,w),c(w,S),c(n,j),c(n,C),c(C,D),c(D,z),c(D,q),c(n,P),c(n,E),c(E,N),c(E,A),nt&&nt.m(E,null),c(E,M);for(let e=0;e<rt.length;e+=1)rt[e].m(E,null);c(E,B),c(E,W),c(W,J),c(W,V),c(W,Z),c(Z,K),c(W,Y),c(W,ee),c(ee,te),c(W,le),c(W,re),c(re,se),c(W,oe),c(W,ie),c(ie,ae),c(W,ce),c(W,ue),c(ue,pe),c(W,fe),c(W,me),c(t,ge),c(t,ve),c(ve,ye),c(ye,be),Q($e,be,null),c(ye,xe),c(ye,_e),Q(ke,_e,null),c(ye,we),st&&st.m(ye,null),c(ye,Se),c(ye,Oe),c(Oe,je),c(Oe,Ce),c(Oe,De),c(De,ze),c(ye,qe),c(ye,Le),Te=!0,Me||(Be=[v(E,"click",y(e[6])),v(Le,"click",e[4])],Me=!0)},p(e,[n]){if((!Te||1&n)&&We!==(We=e[0].name.zh+"")&&x(o,We),(!Te||1&n)&&Je!==(Je=e[0].name.en+"")&&x($,Je),(!Te||1&n&&_!==(_="https://playorna.com/codex/items/"+e[0].oid+"/"))&&b(g,"href",_),(!Te||1&n)&&Re!==(Re=e[0].tier+"")&&x(S,Re),(!Te||1&n&&O!==(O=e[0].tier))&&b(w,"data-tier",O),(!Te||1&n)&&Fe!==(Fe=e[0].gid+"")&&x(q,Fe),(!Te||1&n&&L!==(L="https://orna.guide/items?show="+e[0].gid))&&b(C,"href",L),(!Te||1&n&&T!==(T=Ae(e[0])))&&b(N,"style",T),e[2].length&&nt.p(e,n),35&n){let t;for(lt=e[1],t=0;t<lt.length;t+=1){const l=He(e,lt,t);rt[t]?rt[t].p(l,n):(rt[t]=Ke(l),rt[t].c(),rt[t].m(E,B))}for(;t<rt.length;t+=1)rt[t].d(1);rt.length=lt.length}(!Te||1&n&&U!==(U=e[0].equipped_by))&&b(J,"title",U),(!Te||1&n)&&Ge!==(Ge=ne[e[0].element]?`[${ne[e[0].element]}]`:"")&&x(K,Ge),(!Te||1&n)&&Qe!==(Qe=e[0].boss?"👿":"")&&x(te,Qe),(!Te||1&n)&&Xe!==(Xe=e[0].arena?"🏟️":"")&&x(se,Xe),(!Te||1&n)&&Ze!==(Ze=e[0].view_distance?"👁️":"")&&x(ae,Ze),(!Te||1&n)&&et!==(et=e[0].two_handed?"🙌":"")&&x(pe,et),(!Te||1&n&&de!==(de=e[0].slots))&&b(me,"data-slots",de),(!Te||1&n&&he!==(he=e[0].slots+" slots"))&&b(me,"title",he);const l={};1&n&&(l.items=e[0].dropped_by),$e.$set(l);const r={};1&n&&(r.items=e[0].materials),ke.$set(r),e[0].resource?st?(st.p(e,n),1&n&&H(st,1)):(st=Ye(e),st.c(),H(st,1),st.m(ye,Se)):st&&(R(),F(st,1,1,(()=>{st=null})),I()),(!Te||1&n)&&tt!==(tt=JSON.stringify({...e[0],context:""},null," ")+"")&&x(ze,tt),(!Te||1&n&&Pe!==(Pe=ne[e[0].type]))&&b(ye,"data-type",Pe),(!Te||1&n&&Ee!==(Ee=ne[e[0].category]||""))&&b(ye,"data-category",Ee),(!Te||1&n&&Ne!==(Ne="item-details item-rarity--"+(e[0].rarity||"w")+" svelte-14y43kt"))&&b(t,"class",Ne)},i(e){Te||(H($e.$$.fragment,e),H(ke.$$.fragment,e),H(st),Te=!0)},o(e){F($e.$$.fragment,e),F(ke.$$.fragment,e),F(st),Te=!1},d(e){e&&p(t),nt&&nt.d(),f(rt,e),X($e),X(ke),st&&st.d(),Me=!1,l(Be)}}}function tt(e,t,n){let l;i(e,de,(e=>n(8,l=e)));let{item:r}=t;let s=["hp","mana","attack","magic","defense","resistance","dexterity","ward","crit","foresight"].map((e=>({prop:e,value:r.stats?.[e]}))).filter((e=>e.value));return e.$$set=e=>{"item"in e&&n(0,r=e.item)},[r,[["causes","🔪"],["immunities","🛡️"],["gives","🎁"],["cures","❤️‍🩹"],["other_effect","✨"]],s,function(){ge.set({open:!0,item:r,stats:s})},function(){ve.set({open:!0,item:r})},function(e){let t=e.split(": ")[1];if(!t)return"###";let n=l.spells.find((e=>e.name.zh===t));return n?`https://playorna.com/codex/spells/${n.oid}/`:"###"},function(t){C.call(this,e,t)},function(t){C.call(this,e,t)}]}class nt extends Y{constructor(e){super(),K(this,e,tt,et,s,{item:0})}}function lt(e,t,n){const l=e.slice();return l[17]=t[n],l}function rt(e,t,n){const l=e.slice();return l[20]=t[n],l}function st(t){let n,l,r,s=t[20].label+"";return{c(){n=m("option"),l=d(s),n.__value=r=t[20].prop,n.value=n.__value},m(e,t){u(e,n,t),c(n,l)},p:e,d(e){e&&p(n)}}}function ot(e,t){let n,l,r,s;return l=new nt({props:{item:t[17]}}),{key:e,first:null,c(){n=m("li"),G(l.$$.fragment),r=h(),b(n,"class","svelte-1l0kmot"),this.first=n},m(e,t){u(e,n,t),Q(l,n,null),c(n,r),s=!0},p(e,n){t=e;const r={};17&n&&(r.item=t[17]),l.$set(r)},i(e){s||(H(l.$$.fragment,e),s=!0)},o(e){F(l.$$.fragment,e),s=!1},d(e){e&&p(n),X(l)}}}function it(e){let t,n,r,s,o,i,a,g,y,w,O,j,C,D,z,q,L,P,E,T,A,M,B,W,J,G=e[0].length+"",Q=[],X=new Map,Z=e[6],K=[];for(let t=0;t<Z.length;t+=1)K[t]=st(rt(e,Z,t));let Y=e[0].slice(0,e[4]);const ee=e=>e[17].gid;for(let t=0;t<Y.length;t+=1){let n=lt(e,Y,t),l=ee(n);X.set(l,Q[t]=ot(l,n))}return{c(){t=m("div"),n=m("div"),r=d("排序:\n    "),s=m("select");for(let e=0;e<K.length;e+=1)K[e].c();o=h(),i=m("input"),a=h(),g=m("details"),y=m("summary"),w=d("顯示數量\n      "),O=m("input"),j=d("\n      / "),C=d(G),D=h(),z=m("div"),q=d("總數\n      "),L=m("input"),P=d("\n      以下秀圖"),E=h(),T=m("hr"),A=h(),M=m("ul");for(let e=0;e<Q.length;e+=1)Q[e].c();void 0===e[1]&&N((()=>e[9].call(s))),b(i,"id","sortDir"),b(i,"type","checkbox"),b(i,"class","svelte-1l0kmot"),b(O,"class","text-center"),b(O,"type","number"),b(O,"min","5"),b(O,"max","2000"),b(O,"step","5"),b(L,"class","text-center"),b(L,"type","number"),b(L,"min","1"),b(L,"max","50"),b(t,"class","nav svelte-1l0kmot"),b(M,"class","items svelte-1l0kmot"),S(M,"showDetails",e[5])},m(l,p){u(l,t,p),c(t,n),c(n,r),c(n,s);for(let e=0;e<K.length;e+=1)K[e].m(s,null);k(s,e[1]),c(n,o),c(n,i),i.checked=e[2],c(t,a),c(t,g),c(g,y),c(y,w),c(y,O),_(O,e[4]),c(y,j),c(y,C),c(g,D),c(g,z),c(z,q),c(z,L),_(L,e[3]),c(z,P),u(l,E,p),u(l,T,p),u(l,A,p),u(l,M,p);for(let e=0;e<Q.length;e+=1)Q[e].m(M,null);B=!0,W||(J=[v(s,"change",e[9]),v(i,"change",e[10]),v(O,"input",e[11]),v(L,"input",e[12])],W=!0)},p(e,[t]){if(64&t){let n;for(Z=e[6],n=0;n<Z.length;n+=1){const l=rt(e,Z,n);K[n]?K[n].p(l,t):(K[n]=st(l),K[n].c(),K[n].m(s,null))}for(;n<K.length;n+=1)K[n].d(1);K.length=Z.length}66&t&&k(s,e[1]),4&t&&(i.checked=e[2]),16&t&&$(O.value)!==e[4]&&_(O,e[4]),(!B||1&t)&&G!==(G=e[0].length+"")&&x(C,G),8&t&&$(L.value)!==e[3]&&_(L,e[3]),17&t&&(Y=e[0].slice(0,e[4]),R(),Q=V(Q,t,ee,1,e,Y,X,M,U,ot,null,lt),I()),32&t&&S(M,"showDetails",e[5])},i(e){if(!B){for(let e=0;e<Y.length;e+=1)H(Q[e]);B=!0}},o(e){for(let e=0;e<Q.length;e+=1)F(Q[e]);B=!1},d(e){e&&p(t),f(K,e),e&&p(E),e&&p(T),e&&p(A),e&&p(M);for(let e=0;e<Q.length;e+=1)Q[e].d();W=!1,l(J)}}}function at(e,t,n){let l,r,s,o,a,c;i(e,be,(e=>n(8,c=e)));let{items:u=[]}=t,p=me.filter((e=>e.sort)),f=[];function m(e){let t=u;return!e||!e.length||1===e.length&&null==e[0].rule?.value?t:(e.map((e=>e.rule)).forEach((e=>{e&&(t=function(e,t){let{prop:n,type:l,value:r,comparator:s}=t;if(!r||!e.length)return e;let o=me.find((e=>e.prop===n));if(o.checkId)return e.filter((e=>se(e,n)?.some((e=>e.gid===r))));switch(l){case"checkbox":return Boolean(+r)?e.filter((e=>se(e,n))):e.filter((e=>!se(e,n)));case"number":return e.filter((e=>{let t=se(e,n);switch(s){case"+":return t>=r;case"-":return t<=r;default:return t===r}}));case"text":return e.filter((e=>{if(o.list)return se(e,n)?.includes(r);return new RegExp(`${r}`.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i").test(se(e,n))}));default:return e}}(t,e))})),function(e=u){return e.sort(((e,t)=>{let n=r?1:-1,s=se(e,l)||-9999,o=se(t,l)||-9999;switch("object"==typeof o&&(o=-9999),"object"==typeof s&&(s=-9999),typeof s){case"string":return s.localeCompare(o)*n;case"number":return(s-o)*n;default:return 0}}))}(t))}return e.$$set=e=>{"items"in e&&n(7,u=e.items)},e.$$.update=()=>{262&e.$$.dirty&&n(0,f=m(c)),25&e.$$.dirty&&n(5,a=f.length<=o||s<=o)},n(1,l="tier"),n(2,r=!0),n(4,s=20),n(3,o=20),[f,l,r,o,s,a,p,u,c,function(){l=w(this),n(1,l),n(6,p)},function(){r=this.checked,n(2,r)},function(){s=$(this.value),n(4,s)},function(){o=$(this.value),n(3,o)}]}class ct extends Y{constructor(e){super(),K(this,e,at,it,s,{items:7})}}function ut(e,t,n){const l=e.slice();return l[8]=t[n],l[10]=n,l}function pt(e,t,n){const l=e.slice();return l[11]=t[n],l}function ft(e,t,n){const l=e.slice();return l[14]=t[n],l}function mt(e){let t;return{c(){t=d("Loading...")},m(e,n){u(e,t,n)},d(e){e&&p(t)}}}function dt(e){let t,n,l,r,s=JSON.stringify(e[5])+"";return{c(){t=m("blockquote"),n=d("GG\n  "),l=m("pre"),r=d(s),b(l,"class","svelte-1h100ix"),b(t,"class","svelte-1h100ix")},m(e,s){u(e,t,s),c(t,n),c(t,l),c(l,r)},p(e,t){32&t&&s!==(s=JSON.stringify(e[5])+"")&&x(r,s)},d(e){e&&p(t)}}}function ht(e){let t,n,l,r,s,o,i=100*e[4].quality+"";function a(e,t){return"0"!==e[4].quality?vt:gt}let f=a(e),g=f(e);return{c(){t=m("table"),n=m("caption"),l=d("品質: "),r=d(i),s=d("%"),o=h(),g.c(),b(n,"class","svelte-1h100ix"),b(t,"class","text-right svelte-1h100ix")},m(e,i){u(e,t,i),c(t,n),c(n,l),c(n,r),c(n,s),c(t,o),g.m(t,null)},p(e,n){16&n&&i!==(i=100*e[4].quality+"")&&x(r,i),f===(f=a(e))&&g?g.p(e,n):(g.d(1),g=f(e),g&&(g.c(),g.m(t,null)))},d(e){e&&p(t),g.d()}}}function gt(t){let n;return{c(){n=m("caption"),n.textContent="Wrong values.",b(n,"class","svelte-1h100ix")},m(e,t){u(e,n,t)},p:e,d(e){e&&p(n)}}}function vt(e){let t,n,l,r,s,o,i=Object.keys(e[4].stats),a=[];for(let t=0;t<i.length;t+=1)a[t]=yt(ft(e,i,t));let d=Object.values(e[4].stats)[0].values,g=[];for(let t=0;t<d.length;t+=1)g[t]=$t(ut(e,d,t));return{c(){t=m("thead"),n=m("tr"),l=m("th"),l.textContent="Lv.",r=h();for(let e=0;e<a.length;e+=1)a[e].c();s=h(),o=m("tbody");for(let e=0;e<g.length;e+=1)g[e].c();b(l,"class","svelte-1h100ix"),b(o,"class","svelte-1h100ix")},m(e,i){u(e,t,i),c(t,n),c(n,l),c(n,r);for(let e=0;e<a.length;e+=1)a[e].m(n,null);u(e,s,i),u(e,o,i);for(let e=0;e<g.length;e+=1)g[e].m(o,null)},p(e,t){if(16&t){let l;for(i=Object.keys(e[4].stats),l=0;l<i.length;l+=1){const r=ft(e,i,l);a[l]?a[l].p(r,t):(a[l]=yt(r),a[l].c(),a[l].m(n,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=i.length}if(16&t){let n;for(d=Object.values(e[4].stats)[0].values,n=0;n<d.length;n+=1){const l=ut(e,d,n);g[n]?g[n].p(l,t):(g[n]=$t(l),g[n].c(),g[n].m(o,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=d.length}},d(e){e&&p(t),f(a,e),e&&p(s),e&&p(o),f(g,e)}}}function yt(e){let t,n,l=oe(e[14])+"";return{c(){t=m("th"),n=d(l),b(t,"class","svelte-1h100ix")},m(e,l){u(e,t,l),c(t,n)},p(e,t){16&t&&l!==(l=oe(e[14])+"")&&x(n,l)},d(e){e&&p(t)}}}function bt(e){let t,n,l=e[11].values[e[10]]+"";return{c(){t=m("td"),n=d(l),b(t,"class","svelte-1h100ix")},m(e,l){u(e,t,l),c(t,n)},p(e,t){16&t&&l!==(l=e[11].values[e[10]]+"")&&x(n,l)},d(e){e&&p(t)}}}function $t(e){let t,n,l,r,s,o=e[10]+1+"",i=Object.values(e[4].stats),a=[];for(let t=0;t<i.length;t+=1)a[t]=bt(pt(e,i,t));return{c(){t=m("tr"),n=m("th"),l=d(o),r=h();for(let e=0;e<a.length;e+=1)a[e].c();s=h(),b(n,"class","svelte-1h100ix"),b(t,"class","svelte-1h100ix")},m(e,o){u(e,t,o),c(t,n),c(n,l),c(t,r);for(let e=0;e<a.length;e+=1)a[e].m(t,null);c(t,s)},p(e,n){if(16&n){let l;for(i=Object.values(e[4].stats),l=0;l<i.length;l+=1){const r=pt(e,i,l);a[l]?a[l].p(r,n):(a[l]=bt(r),a[l].c(),a[l].m(t,s))}for(;l<a.length;l+=1)a[l].d(1);a.length=i.length}},d(e){e&&p(t),f(a,e)}}}function xt(t){let n,l,r=t[3]&&mt();function s(e,t){return e[4]?ht:e[3]?void 0:dt}let o=s(t),i=o&&o(t);return{c(){r&&r.c(),n=h(),i&&i.c(),l=g()},m(e,t){r&&r.m(e,t),u(e,n,t),i&&i.m(e,t),u(e,l,t)},p(e,[t]){e[3]?r||(r=mt(),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),o===(o=s(e))&&i?i.p(e,t):(i&&i.d(1),i=o&&o(e),i&&(i.c(),i.m(l.parentNode,l)))},i:e,o:e,d(e){r&&r.d(e),e&&p(n),i&&i.d(e),e&&p(l)}}}function _t(t,n,l){let r,s,i,a,c,u,p,f=e,m=e,d=e;t.$$.on_destroy.push((()=>f())),t.$$.on_destroy.push((()=>m())),t.$$.on_destroy.push((()=>d()));let{assessData:h={}}=n;return console.log({assessData:h}),t.$$set=e=>{"assessData"in e&&l(6,h=e.assessData)},t.$$.update=()=>{64&t.$$.dirty&&(l(2,[r,s,i,a]=function(e){const t=te(!1),n=te(!1),l=te(null);async function r(){t.set(!0),n.set(!1);try{const t=await fetch("https://orna.guide/api/v1/assess",{headers:{accept:"*/*","content-type":"application/x-www-form-urlencoded"},referrerPolicy:"strict-origin-when-cross-origin",body:JSON.stringify(e),method:"POST",mode:"cors"}).then((e=>e.json()));t.error?n.set(t):l.set(t)}catch(e){n.set(e)}t.set(!1)}return r(),[l,t,n,r]}(h),r,(l(1,s),f(),f=o(s,(e=>l(3,c=e))),s),(l(0,i),d(),d=o(i,(e=>l(5,p=e))),i)),m(),m=o(r,(e=>l(4,u=e))))},[i,s,r,c,u,p,h]}class kt extends Y{constructor(e){super(),K(this,e,_t,xt,s,{assessData:6})}}function wt(e,t,n){const l=e.slice();return l[15]=t[n],l[16]=t,l[17]=n,l}function St(e,t,n){const l=e.slice();return l[18]=t[n],l}function Ot(e){let t,n,r,s,o,i,a,$,_,w,S,O,j,C,D,z,q,L,P,E,T=e[2].item.name.zh+"",A=e[5],M=[];for(let t=0;t<A.length;t+=1)M[t]=jt(St(e,A,t));let B=e[4],W=[];for(let t=0;t<B.length;t+=1)W[t]=Ct(wt(e,B,t));let J=e[3]&&Dt(e);return{c(){t=m("form"),n=m("table"),r=m("caption"),s=d("品質試算\n            "),o=m("br"),i=d("\n            [ "),a=d(T),$=d(" ] Lv.\n            "),_=m("select");for(let e=0;e<M.length;e+=1)M[e].c();w=h();for(let e=0;e<W.length;e+=1)W[e].c();S=h(),O=m("div"),j=m("button"),j.textContent="Reset",C=h(),D=m("button"),D.textContent="Assess",z=h(),J&&J.c(),q=g(),void 0===e[1]&&N((()=>e[10].call(_))),b(r,"class","svelte-1cg221"),b(n,"class","assess-table svelte-1cg221"),b(j,"type","reset"),b(D,"type","submit"),b(O,"class","form-ctrl svelte-1cg221")},m(l,p){u(l,t,p),c(t,n),c(n,r),c(r,s),c(r,o),c(r,i),c(r,a),c(r,$),c(r,_);for(let e=0;e<M.length;e+=1)M[e].m(_,null);k(_,e[1]),c(n,w);for(let e=0;e<W.length;e+=1)W[e].m(n,null);c(t,S),c(t,O),c(O,j),c(O,C),c(O,D),u(l,z,p),J&&J.m(l,p),u(l,q,p),L=!0,P||(E=[v(_,"change",e[10]),v(j,"click",y(e[7])),v(D,"click",y(e[8]))],P=!0)},p(e,t){if((!L||4&t)&&T!==(T=e[2].item.name.zh+"")&&x(a,T),32&t){let n;for(A=e[5],n=0;n<A.length;n+=1){const l=St(e,A,n);M[n]?M[n].p(l,t):(M[n]=jt(l),M[n].c(),M[n].m(_,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=A.length}if(34&t&&k(_,e[1]),16&t){let l;for(B=e[4],l=0;l<B.length;l+=1){const r=wt(e,B,l);W[l]?W[l].p(r,t):(W[l]=Ct(r),W[l].c(),W[l].m(n,null))}for(;l<W.length;l+=1)W[l].d(1);W.length=B.length}e[3]?J?(J.p(e,t),8&t&&H(J,1)):(J=Dt(e),J.c(),H(J,1),J.m(q.parentNode,q)):J&&(R(),F(J,1,1,(()=>{J=null})),I())},i(e){L||(H(J),L=!0)},o(e){F(J),L=!1},d(e){e&&p(t),f(M,e),f(W,e),e&&p(z),J&&J.d(e),e&&p(q),P=!1,l(E)}}}function jt(t){let n,l,r,s=t[18]+"";return{c(){n=m("option"),l=d(s),n.__value=r=t[18],n.value=n.__value},m(e,t){u(e,n,t),c(n,l)},p:e,d(e){e&&p(n)}}}function Ct(e){let t,n,r,s,o,i,a,f,g,y,k,w,S,O,j,C,D,z,q,L,P=e[15].prop+"",E=qt(e[15])+"";function N(){e[11].call(i,e[16],e[17])}function T(){e[12].call(w,e[16],e[17])}return{c(){t=m("tr"),n=m("th"),r=d(P),s=h(),o=m("td"),i=m("input"),g=h(),y=m("br"),k=h(),w=m("input"),j=h(),C=m("td"),D=d(E),z=h(),b(n,"class","svelte-1cg221"),b(i,"type","number"),b(i,"max",a=e[15].max),b(i,"min",f=e[15].min),b(i,"step","1"),b(i,"class","svelte-1cg221"),b(w,"type","range"),b(w,"max",S=e[15].max),b(w,"min",O=e[15].min),b(w,"step","1"),b(w,"class","svelte-1cg221"),b(o,"class","text-center svelte-1cg221"),b(C,"class","svelte-1cg221")},m(l,a){u(l,t,a),c(t,n),c(n,r),c(t,s),c(t,o),c(o,i),_(i,e[15].value),c(o,g),c(o,y),c(o,k),c(o,w),_(w,e[15].value),c(t,j),c(t,C),c(C,D),c(t,z),q||(L=[v(i,"input",N),v(w,"change",T),v(w,"input",T)],q=!0)},p(t,n){e=t,16&n&&P!==(P=e[15].prop+"")&&x(r,P),16&n&&a!==(a=e[15].max)&&b(i,"max",a),16&n&&f!==(f=e[15].min)&&b(i,"min",f),16&n&&$(i.value)!==e[15].value&&_(i,e[15].value),16&n&&S!==(S=e[15].max)&&b(w,"max",S),16&n&&O!==(O=e[15].min)&&b(w,"min",O),16&n&&_(w,e[15].value),16&n&&E!==(E=qt(e[15])+"")&&x(D,E)},d(e){e&&p(t),q=!1,l(L)}}}function Dt(e){let t,n;return t=new kt({props:{assessData:e[3]}}),{c(){G(t.$$.fragment)},m(e,l){Q(t,e,l),n=!0},p(e,n){const l={};8&n&&(l.assessData=e[3]),t.$set(l)},i(e){n||(H(t.$$.fragment,e),n=!0)},o(e){F(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function zt(e){let t,n,r,s,o,i,a,f,d=e[2].item&&Ot(e);return{c(){t=m("div"),n=m("div"),r=h(),s=m("main"),d&&d.c(),b(n,"class","dialog__overlay"),b(s,"class","dialog__content"),b(t,"class","dialog"),t.hidden=o=!e[2].open,b(t,"tabindex","-1")},m(l,o){u(l,t,o),c(t,n),c(t,r),c(t,s),d&&d.m(s,null),e[13](t),i=!0,a||(f=[v(n,"click",e[6]),v(t,"keydown",e[9])],a=!0)},p(e,[n]){e[2].item?d?(d.p(e,n),4&n&&H(d,1)):(d=Ot(e),d.c(),H(d,1),d.m(s,null)):d&&(R(),F(d,1,1,(()=>{d=null})),I()),(!i||4&n&&o!==(o=!e[2].open))&&(t.hidden=o)},i(e){i||(H(d),i=!0)},o(e){F(d),i=!1},d(n){n&&p(t),d&&d.d(),e[13](null),a=!1,l(f)}}}function qt(e){return`${(100*e.value/e.oValue).toFixed(1)}%`}function Lt(e,t,n){let l,r,s,o;i(e,ge,(e=>n(2,s=e)));const c=new Array(13).fill(1).map(((e,t)=>t+1));let u=1;function p(){n(3,r=null),a(ge,s={open:!1},s)}return e.$$.update=()=>{var t;7&e.$$.dirty&&s&&s.stats&&(t=s.stats,n(4,l=t.map((e=>{let[t,n]=[2*e.value,~~(.7*e.value)].sort(ie);return{oProp:e.prop,prop:oe(e.prop),value:e.value,oValue:e.value,max:1===u?n:3*n,min:t}}))),setTimeout((()=>{o.querySelector("input")?.select()})))},n(4,l=[]),n(3,r=null),[o,u,s,r,l,c,p,function(){n(3,r=null),n(4,l=l.map((e=>({...e,value:e.oValue})))),n(1,u=1)},function(){if(n(3,r=null),!l.length)return;let e={id:s.item.gid},t=l.reduce(((e,t)=>(t.value!==t.oValue&&(e[t.oProp]=t.value),e)),e);1===Object.keys(t).length&&l.forEach((e=>{t[e.oProp]=e.oValue})),u>1&&(t.level=u),n(3,r=t)},function(e){"Escape"===e.code&&p()},function(){u=w(this),n(1,u),n(5,c)},function(e,t){e[t].value=$(this.value),n(4,l)},function(e,t){e[t].value=$(this.value),n(4,l)},function(e){z[e?"unshift":"push"]((()=>{o=e,n(0,o)}))}]}class Pt extends Y{constructor(e){super(),K(this,e,Lt,zt,s,{})}}function Et(e,t,n){const l=e.slice();return l[9]=t[n],l}function Nt(e){let t,n,r,s,o,i,a,g,$,w,S,O,j,C,D,z,q,L,P,E=e[2].item.id+"",T=e[2].item.zh+"",A=e[4],M=[];for(let t=0;t<A.length;t+=1)M[t]=Tt(Et(e,A,t));return{c(){t=m("form"),n=m("fieldset"),r=m("legend"),r.textContent="修正資料",s=h(),o=m("strong"),i=d("#"),a=d(E),g=d(" - "),$=d(T),w=h(),S=m("br"),O=h(),j=m("select");for(let e=0;e<M.length;e+=1)M[e].c();C=h(),D=m("input"),z=h(),q=m("input"),void 0===e[0]&&N((()=>e[7].call(j))),b(D,"type","text"),b(D,"placeholder",e[1]),b(q,"type","submit")},m(l,p){u(l,t,p),c(t,n),c(n,r),c(n,s),c(n,o),c(o,i),c(o,a),c(o,g),c(o,$),c(n,w),c(n,S),c(n,O),c(n,j);for(let e=0;e<M.length;e+=1)M[e].m(j,null);k(j,e[0]),c(n,C),c(n,D),_(D,e[3]),c(n,z),c(n,q),L||(P=[v(j,"change",e[7]),v(D,"input",e[8]),v(t,"submit",y(e[5]))],L=!0)},p(e,t){if(4&t&&E!==(E=e[2].item.id+"")&&x(a,E),4&t&&T!==(T=e[2].item.zh+"")&&x($,T),16&t){let n;for(A=e[4],n=0;n<A.length;n+=1){const l=Et(e,A,n);M[n]?M[n].p(l,t):(M[n]=Tt(l),M[n].c(),M[n].m(j,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=A.length}17&t&&k(j,e[0]),2&t&&b(D,"placeholder",e[1]),8&t&&D.value!==e[3]&&_(D,e[3])},d(e){e&&p(t),f(M,e),L=!1,l(P)}}}function Tt(t){let n,l,r,s=t[9]+"";return{c(){n=m("option"),l=d(s),n.__value=r=t[9],n.value=n.__value},m(e,t){u(e,n,t),c(n,l)},p:e,d(e){e&&p(n)}}}function At(t){let n,l,r,s,o,i,a,f=t[2].item&&Nt(t);return{c(){n=m("div"),l=m("div"),r=h(),s=m("main"),f&&f.c(),b(l,"class","dialog__overlay"),b(s,"class","dialog__content"),b(n,"class","dialog"),n.hidden=o=!t[2].open},m(e,o){u(e,n,o),c(n,l),c(n,r),c(n,s),f&&f.m(s,null),i||(a=v(l,"click",t[6]),i=!0)},p(e,[t]){e[2].item?f?f.p(e,t):(f=Nt(e),f.c(),f.m(s,null)):f&&(f.d(1),f=null),4&t&&o!==(o=!e[2].open)&&(n.hidden=o)},i:e,o:e,d(e){e&&p(n),f&&f.d(),i=!1,a()}}}function Mt(e,t,n){let l;i(e,ve,(e=>n(2,l=e)));let r,s,o,c=l.props.sort();function u(){a(ve,l.open=!1,l),a(ve,l.item=null,l),n(3,s=null)}return e.$$.update=()=>{7&e.$$.dirty&&l.item&&(n(1,o=l.item[r]),Array.isArray(o)&&n(1,o=JSON.stringify(o)))},[r,o,l,s,c,function(){let e=new URLSearchParams({"entry.113918685":l.item.id,"entry.1082592511":l.item.zh,"entry.1807665084":`${r}: ${s}`}).toString();fetch(`https://docs.google.com/forms/d/e/1FAIpQLSe1u4EdX27HqFWXHXcCrhwxzPwVWVlHbDsb-Q5OFqhQzmNeJA/formResponse?&${e}&submit=SUBMIT`,{method:"POST",mode:"no-cors",redirect:"follow",referrer:"no-referrer"}).then((()=>{u()})).catch((()=>{alert("GG")}))},u,function(){r=w(this),n(0,r),n(4,c)},function(){s=this.value,n(3,s)}]}class Bt extends Y{constructor(e){super(),K(this,e,Mt,At,s,{})}}function Wt(t){let n,l,r,s,o,i,a;return{c(){n=m("hr"),l=h(),r=m("hr"),s=h(),o=m("div"),o.textContent="Loading...",i=h(),a=m("hr"),b(o,"class","text-center")},m(e,t){u(e,n,t),u(e,l,t),u(e,r,t),u(e,s,t),u(e,o,t),u(e,i,t),u(e,a,t)},p:e,i:e,o:e,d(e){e&&p(n),e&&p(l),e&&p(r),e&&p(s),e&&p(o),e&&p(i),e&&p(a)}}}function Jt(e){let t,n,l,r,s,o,i,a,c,f;return t=new Te({}),s=new ct({props:{items:e[1]}}),i=new Pt({}),c=new Bt({}),{c(){G(t.$$.fragment),n=h(),l=m("hr"),r=h(),G(s.$$.fragment),o=h(),G(i.$$.fragment),a=h(),G(c.$$.fragment)},m(e,p){Q(t,e,p),u(e,n,p),u(e,l,p),u(e,r,p),Q(s,e,p),u(e,o,p),Q(i,e,p),u(e,a,p),Q(c,e,p),f=!0},p(e,t){const n={};2&t&&(n.items=e[1]),s.$set(n)},i(e){f||(H(t.$$.fragment,e),H(s.$$.fragment,e),H(i.$$.fragment,e),H(c.$$.fragment,e),f=!0)},o(e){F(t.$$.fragment,e),F(s.$$.fragment,e),F(i.$$.fragment,e),F(c.$$.fragment,e),f=!1},d(e){X(t,e),e&&p(n),e&&p(l),e&&p(r),X(s,e),e&&p(o),X(i,e),e&&p(a),X(c,e)}}}function Rt(e){let t,n,l,r,s,o,i,a,f,d;const g=[Jt,Wt],v=[];function y(e,t){return e[0]?0:1}return r=y(e),s=v[r]=g[r](e),{c(){t=m("div"),n=m("h1"),n.innerHTML='<a href="https://playorna.com/" target="_blank">Orna RPG</a> items lookup tool',l=h(),s.c(),o=h(),i=m("hr"),a=h(),f=m("footer"),f.innerHTML='<ul class="svelte-yjshk7"><li>↬ go to check <a href="./monster/">Monsters Strategy</a></li> \n    <li>↬ go to check <a href="./skill/">Skills</a></li></ul> \n  <div class="svelte-yjshk7">* comment on <a href="https://docs.google.com/spreadsheets/d/1JZM_9U7hYtq39T0BeZHaUrJVKSWWNfxLxcZnrJPiHBQ/edit#gid=2050818910">Google spreadsheet</a> to update data <br/>\n  -- <br/>\n  * repo: <a href="https://github.com/rplus/orna-lookup" target="_blank">Rplus/orna-lookup</a>  <br/>\n  * origin data: <a href="https://orna.guide/" target="_blank">https://orna.guide/</a> api<br/></div>',b(n,"class","text-center"),b(t,"class","workspace svelte-yjshk7"),b(f,"class","svelte-yjshk7")},m(e,s){u(e,t,s),c(t,n),c(t,l),v[r].m(t,null),u(e,o,s),u(e,i,s),u(e,a,s),u(e,f,s),d=!0},p(e,[n]){let l=r;r=y(e),r===l?v[r].p(e,n):(R(),F(v[l],1,1,(()=>{v[l]=null})),I(),s=v[r],s?s.p(e,n):(s=v[r]=g[r](e),s.c()),H(s,1),s.m(t,null))},i(e){d||(H(s),d=!0)},o(e){F(s),d=!1},d(e){e&&p(t),v[r].d(),e&&p(o),e&&p(i),e&&p(a),e&&p(f)}}}function It(e,t,n){let l;i(e,de,(e=>n(2,l=e)));let r=!1,s=[];return e.$$.update=()=>{5&e.$$.dirty&&(l.waiting||r||(n(0,r=!0),n(1,s=l.items)))},[r,s,l]}return new class extends Y{constructor(e){super(),K(this,e,It,Rt,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
