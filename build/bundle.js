var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function r(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function u(e,t,n){e.$$.on_destroy.push(o(t,n))}function a(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function i(e){e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function m(e){return document.createTextNode(e)}function d(){return m(" ")}function h(){return m("")}function g(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function v(e){return function(t){return t.preventDefault(),e.call(this,t)}}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e){return""===e?null:+e}function $(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function _(e,t){e.value=null==t?"":t}function x(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}}function w(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function k(e,t,n){e.classList[n?"add":"remove"](t)}let S;function j(e){S=e}function z(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const O=[],D=[],C=[],L=[],q=Promise.resolve();let P=!1;function E(e){C.push(e)}let A=!1;const M=new Set;function N(){if(!A){A=!0;do{for(let e=0;e<O.length;e+=1){const t=O[e];j(t),T(t.$$)}for(j(null),O.length=0;D.length;)D.pop()();for(let e=0;e<C.length;e+=1){const t=C[e];M.has(t)||(M.add(t),t())}C.length=0}while(O.length);for(;L.length;)L.pop()();P=!1,A=!1,M.clear()}}function T(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(E)}}const B=new Set;let H;function R(){H={r:0,c:[],p:H}}function F(){H.r||l(H.c),H=H.p}function V(e,t){e&&e.i&&(B.delete(e),e.i(t))}function W(e,t,n,l){if(e&&e.o){if(B.has(e))return;B.add(e),H.c.push((()=>{B.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}}function I(e,t){W(e,1,1,(()=>{t.delete(e.key)}))}function J(e,t,n,l,r,s,o,u,a,c,i,p){let f=e.length,m=s.length,d=f;const h={};for(;d--;)h[e[d].key]=d;const g=[],v=new Map,b=new Map;for(d=m;d--;){const e=p(r,s,d),u=n(e);let a=o.get(u);a?l&&a.p(e,t):(a=c(u,e),a.c()),v.set(u,g[d]=a),u in h&&b.set(u,Math.abs(d-h[u]))}const y=new Set,$=new Set;function _(e){V(e,1),e.m(u,i),o.set(e.key,e),i=e.first,m--}for(;f&&m;){const t=g[m-1],n=e[f-1],l=t.key,r=n.key;t===n?(i=t.first,f--,m--):v.has(r)?!o.has(l)||y.has(l)?_(t):$.has(r)?f--:b.get(l)>b.get(r)?($.add(l),_(t)):(y.add(r),f--):(a(n,o),f--)}for(;f--;){const t=e[f];v.has(t.key)||a(t,o)}for(;m;)_(g[m-1]);return g}function G(e){e&&e.c()}function U(e,n,s,o){const{fragment:u,on_mount:a,on_destroy:c,after_update:i}=e.$$;u&&u.m(n,s),o||E((()=>{const n=a.map(t).filter(r);c?c.push(...n):l(n),e.$$.on_mount=[]})),i.forEach(E)}function K(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(e,t){-1===e.$$.dirty[0]&&(O.push(e),P||(P=!0,q.then(N)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function X(t,r,s,o,u,a,c,p=[-1]){const f=S;j(t);const m=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:r.context||[]),callbacks:n(),dirty:p,skip_bound:!1,root:r.target||f.$$.root};c&&c(m.root);let d=!1;if(m.ctx=s?s(t,r.props||{},((e,n,...l)=>{const r=l.length?l[0]:n;return m.ctx&&u(m.ctx[e],m.ctx[e]=r)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](r),d&&Q(t,e)),n})):[],m.update(),d=!0,l(m.before_update),m.fragment=!!o&&o(m.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);m.fragment&&m.fragment.l(e),e.forEach(i)}else m.fragment&&m.fragment.c();r.intro&&V(t.$$.fragment),U(t,r.target,r.anchor,r.customElement),N()}j(f)}class Y{$destroy(){K(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Z=[];function ee(t,n=e){let l;const r=new Set;function o(e){if(s(t,e)&&(t=e,l)){const e=!Z.length;for(const e of r)e[1](),Z.push(e,t);if(e){for(let e=0;e<Z.length;e+=2)Z[e][0](Z[e+1]);Z.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(s,u=e){const a=[s,u];return r.add(a),1===r.size&&(l=n(o)||e),s(t),()=>{r.delete(a),0===r.size&&(l(),l=null)}}}}const te={Bleeding:"流血",Frozen:"冰凍",Burning:"燃燒",Asleep:"入睡",Paralyzed:"麻痺",Blind:"致盲",Stunned:"暈眩",Rot:"腐敗",Blight:"枯萎",Petrified:"石化",Poisoned:"中毒",Drenched:"濕滑",Cursed:"詛咒",Toxic:"劇毒",Lulled:"安份",Mage:"法師",Thief:"盜賊",Warrior:"戰士",Curative:"藥水",Weapon:".. 武器",Other:"其他",Item:"物品",Head:". 頭部",Armor:".. 護甲",Legs:"... 腿部",Accessory:"配件",Material:"材料","Off-hand":".. 副手",Adornment:"... 裝飾品",Dark:"闇",Water:"水",Fire:"火",Physical:"物",Holy:"光",Earthen:"土",Lightning:"雷",Dragon:"龍",Arcane:"奧","Fire Def":".火抗","Water Def":".水抗","Earth Def":".土抗","Lightning Def":".雷抗","Holy Def":".光抗","Dark Def":".闇抗",attack:"物攻",magic:"魔攻",defense:"物防",ward:"護盾",dexterity:"敏捷",mana:"魔力",crit:"暴擊",resistance:"魔防",hp:"血量"};function ne(e){return function(e){for(let t in e)e[t]=e[t].filter(Boolean).map((e=>({value:e,label:te[e]?`${te[e]} ${e}`:e}))).sort(((e,t)=>le(e.label,t.label))),e[t].unshift({value:"",label:""});return e}({types:[...new Set(e.map((e=>e.type)))],tiers:[...new Set(e.map((e=>e.tier)))],element:[...new Set(e.map((e=>e.element)))],immunities:[...new Set(e.map((e=>e.immunities?.split(", "))).flat())],causes:[...new Set(e.map((e=>e.causes)).flat())],prevents:[...new Set(e.map((e=>e.prevents)).flat())],gives:[...new Set(e.map((e=>e.gives)).flat())],cures:[...new Set(e.map((e=>e.cures)).flat())],equipped_by:[...new Set(e.map((e=>e.equipped_by)).flat().filter(Boolean))]})}function le(e,t){switch(typeof e){case"number":return e-t;case"string":return e.toLowerCase().localeCompare(t.toLowerCase());default:return e>label_12}}function re(e,t){return t.split(".").reduce(((e,t)=>e[t]||e),e)}function se(e){return te[e]||e}function oe(e,t){return e-t}function ue(e){return{timestamp:+new Date,rule:{prop:e.prop,value:ae(e.value,e.type),type:e.type,comparator:"="}}}function ae(e,t){switch(t){case"number":return+e;case"text":default:return String(e)}return e}function ce(e){return ue({prop:"name_zh",value:e||"",type:"text"})}const ie=[{prop:"name_zh",label:"name_zh",type:"text",sort:!0},{prop:"name",label:"name_en",type:"text",sort:!0},{prop:"tier",label:"Tier ★",type:"number",list:"tiers",min:1,max:10,sort:!0},{prop:"equipped_by",label:"穿戴者",type:"text",list:"equipped_by"},{prop:"prevents",label:"-免疫(敵)",type:"text",list:"prevents"},{prop:"cures",label:"-治癒(己)",type:"text",list:"cures"},{prop:"causes",label:"+造成(敵)",type:"text",list:"causes"},{prop:"gives",label:"+給予(己)",type:"text",list:"gives"},{prop:"type",label:"裝備類型",type:"text",list:"types",sort:!0},{prop:"element",label:"元素",type:"text",list:"element",sort:!0},{prop:"boss",label:"👿 BOSS",type:"checkbox"},{prop:"arena",label:"🏟️ 競技場",type:"checkbox"},{prop:"view_distance",label:"👁️ +視野",type:"checkbox"},{prop:"stats.attack.base",label:".物攻",type:"number",sort:!0},{prop:"stats.magic.base",label:".魔攻",type:"number",sort:!0},{prop:"stats.defense.base",label:".物防",type:"number",sort:!0},{prop:"stats.resistance.base",label:".魔防",type:"number",sort:!0},{prop:"stats.dexterity.base",label:".敏捷",type:"number",sort:!0},{prop:"stats.crit.base",label:".暴擊",type:"number",sort:!0},{prop:"stats.ward.base",label:".護盾",type:"number",sort:!0},{prop:"stats.mana.base",label:".魔力",type:"number",sort:!0},{prop:"stats.hp.base",label:".血量",type:"number",sort:!0},{prop:"context",label:"全文搜索",type:"text"},{prop:"description",label:"描述 (en)",type:"text"},{prop:"id",label:"id",type:"number",min:1,sort:!0}],pe=ee({waiting:!0}),fe=ee({}),me=ee({open:!1});fetch("raw-data/item.added.min.json").then((e=>e.json())).then((e=>{e=e.filter(Boolean).map((e=>(e.context=JSON.stringify(e),e.equipped_by=e.equipped_by?.map((e=>e?.name)),e))),fe.set(ne(e)),window.d=e,pe.set(e)}));let de=new URLSearchParams(location.search),he=ie.find((e=>de.get(e.prop))),ge=he?ue({prop:he.prop,type:he.type,value:de.get(he.prop)}):ce("");const ve=function(){const{subscribe:e,set:t,update:n}=ee([ge]);return{subscribe:e,set:t,update:n,add:e=>n((t=>(t[t.length]=e,t))),remove:e=>n((t=>{let n=t.findIndex((t=>t.timestamp===e));return-1!==n&&t.splice(n,1),t})),reset:()=>t([])}}();function be(e,t,n){const l=e.slice();return l[14]=t[n],l}function ye(e,t,n){const l=e.slice();return l[17]=t[n],l}function $e(t){let n,l,r,s=t[17].label+"";return{c(){n=f("option"),l=m(s),n.__value=r=t[17].prop,n.value=n.__value},m(e,t){c(e,n,t),a(n,l)},p:e,d(e){e&&i(n)}}}function _e(e){let t,n,l;return{c(){t=f("input"),b(t,"type","text")},m(r,s){c(r,t,s),_(t,e[0].rule.value),n||(l=g(t,"input",e[11]),n=!0)},p(e,n){1&n&&t.value!==e[0].rule.value&&_(t,e[0].rule.value)},d(e){e&&i(t),n=!1,l()}}}function xe(e){let t,n,l,r,s;return{c(){t=f("input"),b(t,"type","number"),b(t,"min",n=e[1].min),b(t,"max",l=e[1].max)},m(n,l){c(n,t,l),_(t,e[0].rule.value),r||(s=g(t,"input",e[10]),r=!0)},p(e,r){2&r&&n!==(n=e[1].min)&&b(t,"min",n),2&r&&l!==(l=e[1].max)&&b(t,"max",l),1&r&&y(t.value)!==e[0].rule.value&&_(t,e[0].rule.value)},d(e){e&&i(t),r=!1,s()}}}function we(e){let t,n,l,r=e[2][e[1].list],s=[];for(let t=0;t<r.length;t+=1)s[t]=Se(be(e,r,t));return{c(){t=f("select");for(let e=0;e<s.length;e+=1)s[e].c();void 0===e[0].rule.value&&E((()=>e[9].call(t)))},m(r,o){c(r,t,o);for(let e=0;e<s.length;e+=1)s[e].m(t,null);x(t,e[0].rule.value),n||(l=g(t,"change",e[9]),n=!0)},p(e,n){if(6&n){let l;for(r=e[2][e[1].list],l=0;l<r.length;l+=1){const o=be(e,r,l);s[l]?s[l].p(o,n):(s[l]=Se(o),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=r.length}1&n&&x(t,e[0].rule.value)},d(e){e&&i(t),p(s,e),n=!1,l()}}}function ke(e){let t,n,r,s,o,u,p,h,v;return{c(){t=f("label"),n=m("T\n      "),r=f("input"),s=d(),o=f("label"),u=f("input"),p=m("\n      F"),b(r,"type","radio"),r.__value="1",r.value=r.__value,e[7][0].push(r),b(u,"type","radio"),u.__value="0",u.value=u.__value,e[7][0].push(u)},m(l,i){c(l,t,i),a(t,n),a(t,r),r.checked=r.__value===e[0].rule.value,c(l,s,i),c(l,o,i),a(o,u),u.checked=u.__value===e[0].rule.value,a(o,p),h||(v=[g(r,"change",e[6]),g(u,"change",e[8])],h=!0)},p(e,t){1&t&&(r.checked=r.__value===e[0].rule.value),1&t&&(u.checked=u.__value===e[0].rule.value)},d(n){n&&i(t),e[7][0].splice(e[7][0].indexOf(r),1),n&&i(s),n&&i(o),e[7][0].splice(e[7][0].indexOf(u),1),h=!1,l(v)}}}function Se(e){let t,n,l;return{c(){t=f("option"),t.__value=n=e[14].value,t.value=t.__value,b(t,"label",l=e[14].label)},m(e,n){c(e,t,n)},p(e,r){6&r&&n!==(n=e[14].value)&&(t.__value=n,t.value=t.__value),6&r&&l!==(l=e[14].label)&&b(t,"label",l)},d(e){e&&i(t)}}}function je(e){let t,n,l,r,s,o;return{c(){t=f("select"),n=f("option"),n.textContent="=",l=f("option"),l.textContent="+",r=f("option"),r.textContent="-",n.__value="=",n.value=n.__value,l.__value="+",l.value=l.__value,r.__value="-",r.value=r.__value,void 0===e[0].rule.comparator&&E((()=>e[12].call(t)))},m(u,i){c(u,t,i),a(t,n),a(t,l),a(t,r),x(t,e[0].rule.comparator),s||(o=g(t,"change",e[12]),s=!0)},p(e,n){1&n&&x(t,e[0].rule.comparator)},d(e){e&&i(t),s=!1,o()}}}function ze(e){let t,n,l;return{c(){t=f("a"),n=m("🢅"),b(t,"href",l="./?"+e[0].rule.prop+"="+e[0].rule.value)},m(e,l){c(e,t,l),a(t,n)},p(e,n){1&n&&l!==(l="./?"+e[0].rule.prop+"="+e[0].rule.value)&&b(t,"href",l)},d(e){e&&i(t)}}}function Oe(t){let n,s,o,u,h,v,y,$,_,w,k=ie,S=[];for(let e=0;e<k.length;e+=1)S[e]=$e(ye(t,k,e));function j(e,t){return"checkbox"===e[1].type?ke:e[1].list?we:"number"===e[1].type?xe:"text"===e[1].type?_e:void 0}let z=j(t),O=z&&z(t),D="number"===t[1].type&&je(t),C=t[0].rule.value&&ze(t);return{c(){n=f("div"),s=f("button"),s.textContent="x",o=d(),u=f("select");for(let e=0;e<S.length;e+=1)S[e].c();h=m("}"),v=d(),O&&O.c(),y=d(),D&&D.c(),$=d(),C&&C.c(),void 0===t[0].rule.prop&&E((()=>t[5].call(u))),b(n,"class","filters")},m(e,l){c(e,n,l),a(n,s),a(n,o),a(n,u);for(let e=0;e<S.length;e+=1)S[e].m(u,null);a(u,h),x(u,t[0].rule.prop),a(n,v),O&&O.m(n,null),a(n,y),D&&D.m(n,null),a(n,$),C&&C.m(n,null),_||(w=[g(s,"click",(function(){r(t[4](t[0].timestamp))&&t[4](t[0].timestamp).apply(this,arguments)})),g(u,"change",t[5]),g(u,"change",t[3])],_=!0)},p(e,[l]){if(t=e,0&l){let e;for(k=ie,e=0;e<k.length;e+=1){const n=ye(t,k,e);S[e]?S[e].p(n,l):(S[e]=$e(n),S[e].c(),S[e].m(u,h))}for(;e<S.length;e+=1)S[e].d(1);S.length=k.length}1&l&&x(u,t[0].rule.prop),z===(z=j(t))&&O?O.p(t,l):(O&&O.d(1),O=z&&z(t),O&&(O.c(),O.m(n,y))),"number"===t[1].type?D?D.p(t,l):(D=je(t),D.c(),D.m(n,$)):D&&(D.d(1),D=null),t[0].rule.value?C?C.p(t,l):(C=ze(t),C.c(),C.m(n,null)):C&&(C.d(1),C=null)},i:e,o:e,d(e){e&&i(n),p(S,e),O&&O.d(),D&&D.d(),C&&C.d(),_=!1,l(w)}}}function De(e,t,n){let l;u(e,fe,(e=>n(2,l=e)));let{filter:r}=t,s=o(r.rule.prop);function o(e){return ie.find((t=>t.prop===e))}return e.$$set=e=>{"filter"in e&&n(0,r=e.filter)},e.$$.update=()=>{3&e.$$.dirty&&(n(1,s=o(r.rule.prop)),n(0,r.rule.type=s.type,r))},[r,s,l,function(){n(0,r.rule.value="",r)},function(e){ve.remove(e)},function(){r.rule.prop=w(this),n(0,r),n(1,s)},function(){r.rule.value=this.__value,n(0,r),n(1,s)},[[]],function(){r.rule.value=this.__value,n(0,r),n(1,s)},function(){r.rule.value=w(this),n(0,r),n(1,s)},function(){r.rule.value=y(this.value),n(0,r),n(1,s)},function(){r.rule.value=this.value,n(0,r),n(1,s)},function(){r.rule.comparator=w(this),n(0,r),n(1,s)}]}class Ce extends Y{constructor(e){super(),X(this,e,De,Oe,s,{filter:0})}}function Le(e,t,n){const l=e.slice();return l[3]=t[n],l[4]=t,l[5]=n,l}function qe(e,t){let n,l,r,s,o;function u(e){t[2](e,t[3],t[4],t[5])}let p={};return void 0!==t[3]&&(p.filter=t[3]),l=new Ce({props:p}),D.push((()=>function(e,t,n){const l=e.$$.props[t];void 0!==l&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}(l,"filter",u))),{key:e,first:null,c(){n=f("li"),G(l.$$.fragment),s=d(),this.first=n},m(e,t){c(e,n,t),U(l,n,null),a(n,s),o=!0},p(e,n){t=e;const s={};var o;!r&&1&n&&(r=!0,s.filter=t[3],o=()=>r=!1,L.push(o)),l.$set(s)},i(e){o||(V(l.$$.fragment,e),o=!0)},o(e){W(l.$$.fragment,e),o=!1},d(e){e&&i(n),K(l)}}}function Pe(e){let t,n,l,r,s,o,u,p=[],m=new Map,h=e[0];const v=e=>e[3].timestamp;for(let t=0;t<h.length;t+=1){let n=Le(e,h,t),l=v(n);m.set(l,p[t]=qe(l,n))}return{c(){t=f("aside"),n=f("button"),n.textContent="+過濾條件",l=d(),r=f("ul");for(let e=0;e<p.length;e+=1)p[e].c()},m(i,f){c(i,t,f),a(t,n),a(t,l),a(t,r);for(let e=0;e<p.length;e+=1)p[e].m(r,null);s=!0,o||(u=g(n,"click",e[1]),o=!0)},p(e,[t]){1&t&&(h=e[0],R(),p=J(p,t,v,1,e,h,m,r,I,qe,null,Le),F())},i(e){if(!s){for(let e=0;e<h.length;e+=1)V(p[e]);s=!0}},o(e){for(let e=0;e<p.length;e+=1)W(p[e]);s=!1},d(e){e&&i(t);for(let e=0;e<p.length;e+=1)p[e].d();o=!1,u()}}}function Ee(e,t,n){let l;return u(e,ve,(e=>n(0,l=e))),[l,function(){ve.add(ce(""))},function(e,t,n,r){n[r]=e,ve.set(l)}]}class Ae extends Y{constructor(e){super(),X(this,e,Ee,Pe,s,{})}}function Me(e,t){if(e)return t?Ne(e.image,16):(e.deadProxyImage,Te(e.image))}function Ne(e,t=96){return`https://images.weserv.nl/?w=${t}&il&url=${Te(e)}`}function Te(e){return`https://orna.guide/static/orna/img/${e}`}function Be(e,t,n){const l=e.slice();return l[9]=t[n],l}function He(e,t,n){const l=e.slice();return l[12]=t[n],l}function Re(e,t,n){const l=e.slice();return l[15]=t[n],l}function Fe(e,t,n){const l=e.slice();return l[18]=t[n],l}function Ve(e,t,n){const l=e.slice();return l[21]=t[n],l}function We(e){let t,n,l,r,s,o,u,d=e[1],h=[];for(let t=0;t<d.length;t+=1)h[t]=Ie(Ve(e,d,t));return{c(){t=f("div"),n=m("[ Stats ]\n          "),l=f("br"),r=m("\n          ---------\n          "),s=f("table");for(let e=0;e<h.length;e+=1)h[e].c();var e,o,u;e="cursor",o="pointer",s.style.setProperty(e,o,u?"important":""),b(s,"class","svelte-28f9b5"),b(t,"class","svelte-28f9b5")},m(i,p){c(i,t,p),a(t,n),a(t,l),a(t,r),a(t,s);for(let e=0;e<h.length;e+=1)h[e].m(s,null);o||(u=g(s,"click",e[4]),o=!0)},p(e,t){if(2&t){let n;for(d=e[1],n=0;n<d.length;n+=1){const l=Ve(e,d,n);h[n]?h[n].p(l,t):(h[n]=Ie(l),h[n].c(),h[n].m(s,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}},d(e){e&&i(t),p(h,e),o=!1,u()}}}function Ie(e){let t,n,l,r,s,o,u,p=se(e[21].prop)+"",h=e[21].value+"";return{c(){t=f("tr"),n=f("th"),l=m(p),r=d(),s=f("td"),o=m(h),u=d(),b(n,"class","svelte-28f9b5")},m(e,i){c(e,t,i),a(t,n),a(n,l),a(t,r),a(t,s),a(s,o),a(t,u)},p(e,t){2&t&&p!==(p=se(e[21].prop)+"")&&$(l,p),2&t&&h!==(h=e[21].value+"")&&$(o,h)},d(e){e&&i(t)}}}function Je(e){let t,n,l,r,s,o,u,h,g,v=e[15][1]+"",y=e[0][e[15][0]],$=[];for(let t=0;t<y.length;t+=1)$[t]=Ge(Fe(e,y,t));return{c(){t=f("div"),n=f("span"),l=m("[ "),r=m(v),s=m(" ]"),u=d(),h=f("br"),g=m("\n            -------\n            ");for(let e=0;e<$.length;e+=1)$[e].c();b(n,"title",o=e[15][0]),b(t,"class","text-right svelte-28f9b5")},m(e,o){c(e,t,o),a(t,n),a(n,l),a(n,r),a(n,s),a(t,u),a(t,h),a(t,g);for(let e=0;e<$.length;e+=1)$[e].m(t,null)},p(e,n){if(9&n){let l;for(y=e[0][e[15][0]],l=0;l<y.length;l+=1){const r=Fe(e,y,l);$[l]?$[l].p(r,n):($[l]=Ge(r),$[l].c(),$[l].m(t,null))}for(;l<$.length;l+=1)$[l].d(1);$.length=y.length}},d(e){e&&i(t),p($,e)}}}function Ge(e){let t,n,l=se(e[18])+"";return{c(){t=f("div"),n=m(l)},m(e,l){c(e,t,l),a(t,n)},p(e,t){1&t&&l!==(l=se(e[18])+"")&&$(n,l)},d(e){e&&i(t)}}}function Ue(e){let t,n=e[0][e[15][0]]&&Je(e);return{c(){n&&n.c(),t=h()},m(e,l){n&&n.m(e,l),c(e,t,l)},p(e,l){e[0][e[15][0]]?n?n.p(e,l):(n=Je(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&i(t)}}}function Ke(e){let t,n,l,r,s=e[0].dropped_by,o=[];for(let t=0;t<s.length;t+=1)o[t]=Qe(He(e,s,t));return{c(){t=f("details"),n=f("summary"),n.textContent="掉落方",l=d(),r=f("ul");for(let e=0;e<o.length;e+=1)o[e].c()},m(e,s){c(e,t,s),a(t,n),a(t,l),a(t,r);for(let e=0;e<o.length;e+=1)o[e].m(r,null)},p(e,t){if(1&t){let n;for(s=e[0].dropped_by,n=0;n<s.length;n+=1){const l=He(e,s,n);o[n]?o[n].p(l,t):(o[n]=Qe(l),o[n].c(),o[n].m(r,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=s.length}},d(e){e&&i(t),p(o,e)}}}function Qe(e){let t,n,l,r,s,o=e[12].name+"";return{c(){t=f("li"),n=f("a"),l=m(o),s=d(),b(n,"href",r="https://orna.guide/monsters?show="+e[12].id),b(n,"target","orna.guide")},m(e,r){c(e,t,r),a(t,n),a(n,l),a(t,s)},p(e,t){1&t&&o!==(o=e[12].name+"")&&$(l,o),1&t&&r!==(r="https://orna.guide/monsters?show="+e[12].id)&&b(n,"href",r)},d(e){e&&i(t)}}}function Xe(e){let t,n,l,r,s=e[2],o=[];for(let t=0;t<s.length;t+=1)o[t]=Ye(Be(e,s,t));return{c(){t=f("details"),n=f("summary"),n.textContent="材料",l=d(),r=f("ul");for(let e=0;e<o.length;e+=1)o[e].c()},m(e,s){c(e,t,s),a(t,n),a(t,l),a(t,r);for(let e=0;e<o.length;e+=1)o[e].m(r,null)},p(e,t){if(4&t){let n;for(s=e[2],n=0;n<s.length;n+=1){const l=Be(e,s,n);o[n]?o[n].p(l,t):(o[n]=Ye(l),o[n].c(),o[n].m(r,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=s.length}},d(e){e&&i(t),p(o,e)}}}function Ye(e){let t,n,l,r,s,o,u,p,h,g,v=e[9].tier+"",y=e[9].name_zh+"";return{c(){t=f("li"),n=f("a"),l=f("small"),r=m("★"),s=m(v),o=m(" -"),u=d(),p=m(y),g=d(),b(n,"href",h="https://orna.guide/items?show="+e[9].id),b(n,"target","orna.guide")},m(e,i){c(e,t,i),a(t,n),a(n,l),a(l,r),a(l,s),a(l,o),a(n,u),a(n,p),a(t,g)},p(e,t){4&t&&v!==(v=e[9].tier+"")&&$(s,v),4&t&&y!==(y=e[9].name_zh+"")&&$(p,y),4&t&&h!==(h="https://orna.guide/items?show="+e[9].id)&&b(n,"href",h)},d(e){e&&i(t)}}}function Ze(t){let n,l,r,s,o,u,h,y,_,x,w,k,S,j,z,O,D,C,L,q,P,E,A,M,N,T,B,H,R,F,V,W,I,J,G,U,K,Q,X,Y,Z,ee,ne,le,re,se,oe,ue,ae,ce,ie=t[0].name_zh+"",pe=t[0].name+"",fe=t[0].tier+"",me=te[t[0].element]?`[${te[t[0].element]}]`:"",de=t[0].boss?"👿":"",he=t[0].arena?"🏟️":"",ge=t[0].view_distance?"👁️":"",ve=JSON.stringify({...t[0],context:null},null," ")+"",be=t[1]&&We(t),ye=t[3],$e=[];for(let e=0;e<ye.length;e+=1)$e[e]=Ue(Re(t,ye,e));let _e=t[0].dropped_by&&Ke(t),xe=t[2]&&Xe(t);return{c(){n=f("details"),l=f("summary"),r=f("ruby"),s=f("rb"),o=m(ie),u=d(),h=f("rt"),y=m(pe),_=d(),x=f("a"),w=f("sup"),k=m("★"),S=m(fe),z=d(),O=f("div"),D=f("div"),L=d(),be&&be.c(),q=d();for(let e=0;e<$e.length;e+=1)$e[e].c();P=d(),E=f("div"),A=f("div"),N=d(),T=f("div"),B=m(me),H=d(),R=f("div"),F=m(de),V=d(),W=f("div"),I=m(he),J=d(),G=f("div"),U=m(ge),K=d(),Q=f("div"),X=f("div"),Y=f("div"),_e&&_e.c(),Z=d(),ee=f("div"),xe&&xe.c(),ne=d(),le=f("details"),re=f("summary"),se=d(),oe=f("pre"),ue=m(ve),b(h,"class","svelte-28f9b5"),b(r,"class","svelte-28f9b5"),b(w,"class","svelte-28f9b5"),b(x,"href",j="https://orna.guide/items?show="+t[0].id),b(x,"target","orna.guide"),b(D,"class","item-img-box svelte-28f9b5"),b(D,"style",C=`--bg: url(${Me(t[0])}); --bg-fallback: url(${Me(t[0],"small")})`),b(A,"class","item-equipped svelte-28f9b5"),b(A,"data-by",M=t[0].equipped_by),b(T,"class","item-char svelte-28f9b5"),b(R,"class","item-char svelte-28f9b5"),b(W,"class","item-char svelte-28f9b5"),b(G,"class","item-char svelte-28f9b5"),b(E,"class","rt-box svelte-28f9b5"),b(O,"class","item-info svelte-28f9b5"),b(l,"class","summary svelte-28f9b5"),b(Y,"class","dropped_by"),b(ee,"class","materials"),b(re,"class","text-right"),b(oe,"class","item-pre svelte-28f9b5"),b(X,"class","item-more svelte-28f9b5"),b(n,"class","item-details svelte-28f9b5")},m(e,i){c(e,n,i),a(n,l),a(l,r),a(r,s),a(s,o),a(r,u),a(r,h),a(h,y),a(l,_),a(l,x),a(x,w),a(w,k),a(w,S),a(l,z),a(l,O),a(O,D),a(O,L),be&&be.m(O,null),a(O,q);for(let e=0;e<$e.length;e+=1)$e[e].m(O,null);a(O,P),a(O,E),a(E,A),a(E,N),a(E,T),a(T,B),a(E,H),a(E,R),a(R,F),a(E,V),a(E,W),a(W,I),a(E,J),a(E,G),a(G,U),a(n,K),a(n,Q),a(Q,X),a(X,Y),_e&&_e.m(Y,null),a(X,Z),a(X,ee),xe&&xe.m(ee,null),a(X,ne),a(X,le),a(le,re),a(le,se),a(le,oe),a(oe,ue),ae||(ce=g(O,"click",v(t[5])),ae=!0)},p(e,[t]){if(1&t&&ie!==(ie=e[0].name_zh+"")&&$(o,ie),1&t&&pe!==(pe=e[0].name+"")&&$(y,pe),1&t&&fe!==(fe=e[0].tier+"")&&$(S,fe),1&t&&j!==(j="https://orna.guide/items?show="+e[0].id)&&b(x,"href",j),1&t&&C!==(C=`--bg: url(${Me(e[0])}); --bg-fallback: url(${Me(e[0],"small")})`)&&b(D,"style",C),e[1]?be?be.p(e,t):(be=We(e),be.c(),be.m(O,q)):be&&(be.d(1),be=null),9&t){let n;for(ye=e[3],n=0;n<ye.length;n+=1){const l=Re(e,ye,n);$e[n]?$e[n].p(l,t):($e[n]=Ue(l),$e[n].c(),$e[n].m(O,P))}for(;n<$e.length;n+=1)$e[n].d(1);$e.length=ye.length}1&t&&M!==(M=e[0].equipped_by)&&b(A,"data-by",M),1&t&&me!==(me=te[e[0].element]?`[${te[e[0].element]}]`:"")&&$(B,me),1&t&&de!==(de=e[0].boss?"👿":"")&&$(F,de),1&t&&he!==(he=e[0].arena?"🏟️":"")&&$(I,he),1&t&&ge!==(ge=e[0].view_distance?"👁️":"")&&$(U,ge),e[0].dropped_by?_e?_e.p(e,t):(_e=Ke(e),_e.c(),_e.m(Y,null)):_e&&(_e.d(1),_e=null),e[2]?xe?xe.p(e,t):(xe=Xe(e),xe.c(),xe.m(ee,null)):xe&&(xe.d(1),xe=null),1&t&&ve!==(ve=JSON.stringify({...e[0],context:null},null," ")+"")&&$(ue,ve)},i:e,o:e,d(e){e&&i(n),be&&be.d(),p($e,e),_e&&_e.d(),xe&&xe.d(),ae=!1,ce()}}}function et(e,t){return e.tier-t.tier}function tt(e,t,n){let l;u(e,pe,(e=>n(6,l=e)));let{item:r}=t,s=r.stats;s&&(s=Object.keys(s).map((e=>({prop:e,value:s[e].base}))));let o=null;return e.$$set=e=>{"item"in e&&n(0,r=e.item)},e.$$.update=()=>{1&e.$$.dirty&&r.materials&&n(2,o=r.materials.map((e=>{var t;return e.tier=function(e){const t=l?.find((t=>t.id===e));return t?.tier||""}(e.id),e.name_zh=(t=e.name,l?.find((e=>e.name===t))?.name_zh||t),e})).sort(et))},[r,s,o,[["causes","🗡️"],["prevents","🛡️"],["gives","🔋"],["cures","❤️‍🩹"]],function(){me.set({open:!0,item:r,stats:s})},function(t){z.call(this,e,t)}]}class nt extends Y{constructor(e){super(),X(this,e,tt,Ze,s,{item:0})}}function lt(e,t,n){const l=e.slice();return l[16]=t[n],l}function rt(e,t,n){const l=e.slice();return l[19]=t[n],l}function st(t){let n,l,r;return{c(){n=f("option"),n.__value=l=t[19].prop,n.value=n.__value,b(n,"label",r=t[19].label)},m(e,t){c(e,n,t)},p:e,d(e){e&&i(n)}}}function ot(e,t){let n,l,r,s;return l=new nt({props:{item:t[16]}}),{key:e,first:null,c(){n=f("li"),G(l.$$.fragment),r=d(),b(n,"class","svelte-1627awp"),this.first=n},m(e,t){c(e,n,t),U(l,n,null),a(n,r),s=!0},p(e,n){t=e;const r={};17&n&&(r.item=t[16]),l.$set(r)},i(e){s||(V(l.$$.fragment,e),s=!0)},o(e){W(l.$$.fragment,e),s=!1},d(e){e&&i(n),K(l)}}}function ut(e){let t,n,r,s,o,u,h,v,w,S,j,z,O,D,C,L,q,P,A,M,N,T,B,H,G,U=e[0].length+"",K=[],Q=new Map,X=e[6],Y=[];for(let t=0;t<X.length;t+=1)Y[t]=st(rt(e,X,t));let Z=e[0].slice(0,e[4]);const ee=e=>e[16].id;for(let t=0;t<Z.length;t+=1){let n=lt(e,Z,t),l=ee(n);Q.set(l,K[t]=ot(l,n))}return{c(){t=f("div"),n=f("div"),r=m("排序:\n    "),s=f("select");for(let e=0;e<Y.length;e+=1)Y[e].c();o=d(),u=f("input"),h=d(),v=f("details"),w=f("summary"),S=m("顯示數量\n      "),j=f("input"),z=m("\n      / "),O=m(U),D=d(),C=f("div"),L=m("總數\n      "),q=f("input"),P=m("\n      以下秀圖"),A=d(),M=f("hr"),N=d(),T=f("ul");for(let e=0;e<K.length;e+=1)K[e].c();void 0===e[1]&&E((()=>e[9].call(s))),b(u,"id","sortDir"),b(u,"type","checkbox"),b(u,"class","svelte-1627awp"),b(j,"class","text-center"),b(j,"type","number"),b(j,"min","5"),b(j,"max","2000"),b(j,"step","5"),b(q,"class","text-center"),b(q,"type","number"),b(q,"min","1"),b(q,"max","50"),b(t,"class","nav svelte-1627awp"),b(T,"class","items svelte-1627awp"),k(T,"showDetails",e[5])},m(l,i){c(l,t,i),a(t,n),a(n,r),a(n,s);for(let e=0;e<Y.length;e+=1)Y[e].m(s,null);x(s,e[1]),a(n,o),a(n,u),u.checked=e[2],a(t,h),a(t,v),a(v,w),a(w,S),a(w,j),_(j,e[4]),a(w,z),a(w,O),a(v,D),a(v,C),a(C,L),a(C,q),_(q,e[3]),a(C,P),c(l,A,i),c(l,M,i),c(l,N,i),c(l,T,i);for(let e=0;e<K.length;e+=1)K[e].m(T,null);B=!0,H||(G=[g(s,"change",e[9]),g(u,"change",e[10]),g(j,"input",e[11]),g(q,"input",e[12])],H=!0)},p(e,[t]){if(64&t){let n;for(X=e[6],n=0;n<X.length;n+=1){const l=rt(e,X,n);Y[n]?Y[n].p(l,t):(Y[n]=st(l),Y[n].c(),Y[n].m(s,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=X.length}66&t&&x(s,e[1]),4&t&&(u.checked=e[2]),16&t&&y(j.value)!==e[4]&&_(j,e[4]),(!B||1&t)&&U!==(U=e[0].length+"")&&$(O,U),8&t&&y(q.value)!==e[3]&&_(q,e[3]),17&t&&(Z=e[0].slice(0,e[4]),R(),K=J(K,t,ee,1,e,Z,Q,T,I,ot,null,lt),F()),32&t&&k(T,"showDetails",e[5])},i(e){if(!B){for(let e=0;e<Z.length;e+=1)V(K[e]);B=!0}},o(e){for(let e=0;e<K.length;e+=1)W(K[e]);B=!1},d(e){e&&i(t),p(Y,e),e&&i(A),e&&i(M),e&&i(N),e&&i(T);for(let e=0;e<K.length;e+=1)K[e].d();H=!1,l(G)}}}function at(e,t,n){let l,r,s,o,a,c;u(e,ve,(e=>n(8,c=e)));let{items:i=[]}=t,p=ie.filter((e=>e.sort)),f=[];function m(e){let t=i;return!e||!e.length||1===e.length&&null==e[0].rule?.value?t:(e.map((e=>e.rule)).forEach((e=>{e&&(t=function(e,t){let{prop:n,type:l,value:r,comparator:s}=t;if(!r||!e.length)return e;switch(l){case"checkbox":return Boolean(+r)?e.filter((e=>e[n])):e.filter((e=>!e[n]));case"number":return e.filter((e=>{let t=re(e,n);switch(s){case"+":return t>=r;case"-":return t<=r;default:return t===r}}));case"text":let t=ie.find((e=>e.prop===n));return e.filter((e=>{if(t.list)return e[n]?.includes(r);return new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i").test(e[n])}));default:return e}}(t,e))})),function(e=i){return e.sort(((e,t)=>{let n=r?1:-1,s=re(e,l),o=re(t,l);switch("object"==typeof o&&(o=-9999),"object"==typeof s&&(s=-9999),typeof s){case"string":return s.localeCompare(o)*n;case"number":return(s-o)*n;default:return 0}}))}(t))}return e.$$set=e=>{"items"in e&&n(7,i=e.items)},e.$$.update=()=>{262&e.$$.dirty&&n(0,f=m(c)),25&e.$$.dirty&&n(5,a=f.length<=o||s<=o)},n(1,l="tier"),n(2,r=!0),n(4,s=50),n(3,o=20),[f,l,r,o,s,a,p,i,c,function(){l=w(this),n(1,l),n(6,p)},function(){r=this.checked,n(2,r)},function(){s=y(this.value),n(4,s)},function(){o=y(this.value),n(3,o)}]}class ct extends Y{constructor(e){super(),X(this,e,at,ut,s,{items:7})}}function it(e,t,n){const l=e.slice();return l[7]=t[n],l[9]=n,l}function pt(e,t,n){const l=e.slice();return l[10]=t[n],l}function ft(e,t,n){const l=e.slice();return l[13]=t[n],l}function mt(e){let t;return{c(){t=m("Loading...")},m(e,n){c(e,t,n)},d(e){e&&i(t)}}}function dt(t){let n;return{c(){n=f("blockquote"),n.innerHTML='若點了 [ Assess ] 沒反應，<br/>\n  請至 cors-anywhere ，並點擊按鈕，<br/>\n  以允許將裝備資料傳至 Orna.guide API。<br/> \n  <a href="https://cors-anywhere.herokuapp.com/corsdemo" target="_blank">https://cors-anywhere.herokuapp.com/corsdemo</a>',b(n,"class","svelte-1tc8awj")},m(e,t){c(e,n,t)},p:e,d(e){e&&i(n)}}}function ht(e){let t,n,l,r,s,o,u=100*e[3].quality+"";function p(e,t){return"0"!==e[3].quality?vt:gt}let h=p(e),g=h(e);return{c(){t=f("table"),n=f("caption"),l=m("品質: "),r=m(u),s=m("%"),o=d(),g.c(),b(n,"class","svelte-1tc8awj"),b(t,"class","text-right svelte-1tc8awj")},m(e,u){c(e,t,u),a(t,n),a(n,l),a(n,r),a(n,s),a(t,o),g.m(t,null)},p(e,n){8&n&&u!==(u=100*e[3].quality+"")&&$(r,u),h===(h=p(e))&&g?g.p(e,n):(g.d(1),g=h(e),g&&(g.c(),g.m(t,null)))},d(e){e&&i(t),g.d()}}}function gt(t){let n;return{c(){n=f("caption"),n.textContent="Wrong values.",b(n,"class","svelte-1tc8awj")},m(e,t){c(e,n,t)},p:e,d(e){e&&i(n)}}}function vt(e){let t,n,l,r,s,o,u=Object.keys(e[3].stats),m=[];for(let t=0;t<u.length;t+=1)m[t]=bt(ft(e,u,t));let h=Object.values(e[3].stats)[0].values,g=[];for(let t=0;t<h.length;t+=1)g[t]=$t(it(e,h,t));return{c(){t=f("thead"),n=f("tr"),l=f("th"),l.textContent="Lv.",r=d();for(let e=0;e<m.length;e+=1)m[e].c();s=d(),o=f("tbody");for(let e=0;e<g.length;e+=1)g[e].c();b(l,"class","svelte-1tc8awj"),b(o,"class","svelte-1tc8awj")},m(e,u){c(e,t,u),a(t,n),a(n,l),a(n,r);for(let e=0;e<m.length;e+=1)m[e].m(n,null);c(e,s,u),c(e,o,u);for(let e=0;e<g.length;e+=1)g[e].m(o,null)},p(e,t){if(8&t){let l;for(u=Object.keys(e[3].stats),l=0;l<u.length;l+=1){const r=ft(e,u,l);m[l]?m[l].p(r,t):(m[l]=bt(r),m[l].c(),m[l].m(n,null))}for(;l<m.length;l+=1)m[l].d(1);m.length=u.length}if(8&t){let n;for(h=Object.values(e[3].stats)[0].values,n=0;n<h.length;n+=1){const l=it(e,h,n);g[n]?g[n].p(l,t):(g[n]=$t(l),g[n].c(),g[n].m(o,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=h.length}},d(e){e&&i(t),p(m,e),e&&i(s),e&&i(o),p(g,e)}}}function bt(e){let t,n,l=se(e[13])+"";return{c(){t=f("th"),n=m(l),b(t,"class","svelte-1tc8awj")},m(e,l){c(e,t,l),a(t,n)},p(e,t){8&t&&l!==(l=se(e[13])+"")&&$(n,l)},d(e){e&&i(t)}}}function yt(e){let t,n,l=e[10].values[e[9]]+"";return{c(){t=f("td"),n=m(l),b(t,"class","svelte-1tc8awj")},m(e,l){c(e,t,l),a(t,n)},p(e,t){8&t&&l!==(l=e[10].values[e[9]]+"")&&$(n,l)},d(e){e&&i(t)}}}function $t(e){let t,n,l,r,s,o=e[9]+1+"",u=Object.values(e[3].stats),h=[];for(let t=0;t<u.length;t+=1)h[t]=yt(pt(e,u,t));return{c(){t=f("tr"),n=f("th"),l=m(o),r=d();for(let e=0;e<h.length;e+=1)h[e].c();s=d(),b(n,"class","svelte-1tc8awj"),b(t,"class","svelte-1tc8awj")},m(e,o){c(e,t,o),a(t,n),a(n,l),a(t,r);for(let e=0;e<h.length;e+=1)h[e].m(t,null);a(t,s)},p(e,n){if(8&n){let l;for(u=Object.values(e[3].stats),l=0;l<u.length;l+=1){const r=pt(e,u,l);h[l]?h[l].p(r,n):(h[l]=yt(r),h[l].c(),h[l].m(t,s))}for(;l<h.length;l+=1)h[l].d(1);h.length=u.length}},d(e){e&&i(t),p(h,e)}}}function _t(t){let n,l,r=t[2]&&mt();function s(e,t){return e[3]?ht:e[2]?void 0:dt}let o=s(t),u=o&&o(t);return{c(){r&&r.c(),n=d(),u&&u.c(),l=h()},m(e,t){r&&r.m(e,t),c(e,n,t),u&&u.m(e,t),c(e,l,t)},p(e,[t]){e[2]?r||(r=mt(),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),o===(o=s(e))&&u?u.p(e,t):(u&&u.d(1),u=o&&o(e),u&&(u.c(),u.m(l.parentNode,l)))},i:e,o:e,d(e){r&&r.d(e),e&&i(n),u&&u.d(e),e&&i(l)}}}function xt(t,n,l){let r,s,u,a,c,i,p=e,f=e;t.$$.on_destroy.push((()=>p())),t.$$.on_destroy.push((()=>f()));let{assessData:m={}}=n;return t.$$set=e=>{"assessData"in e&&l(4,m=e.assessData)},t.$$.update=()=>{16&t.$$.dirty&&(l(1,[r,s,u,a]=function(e){const t=ee(!1),n=ee(!1),l=ee(null);async function r(){t.set(!0),n.set(!1);try{const t=await fetch("https://orna.guide/api/v1/assess",{headers:{accept:"*/*","content-type":"application/x-www-form-urlencoded"},referrerPolicy:"strict-origin-when-cross-origin",body:JSON.stringify(e),method:"POST",mode:"cors"}).then((e=>e.json()));l.set(t)}catch(e){n.set(e)}t.set(!1)}return r(),[l,t,n,r]}(m),r,(l(0,s),p(),p=o(s,(e=>l(2,c=e))),s)),f(),f=o(r,(e=>l(3,i=e))))},[s,r,c,i,m]}class wt extends Y{constructor(e){super(),X(this,e,xt,_t,s,{assessData:4})}}function kt(e,t,n){const l=e.slice();return l[12]=t[n],l[13]=t,l[14]=n,l}function St(e){let t,n,r,s,o,u,y,_,x,w,k,S,j,z,O,D,C,L,q,P=e[1].item.name_zh+"",E=e[3],A=[];for(let t=0;t<E.length;t+=1)A[t]=jt(kt(e,E,t));let M=e[2]&&zt(e);return{c(){t=f("form"),n=f("table"),r=f("caption"),s=m("品質試算\n            "),o=f("br"),u=m("\n            [ "),y=m(P),_=m(" ] Lv.1"),x=d();for(let e=0;e<A.length;e+=1)A[e].c();w=d(),k=f("div"),S=f("button"),S.textContent="Reset",j=d(),z=f("button"),z.textContent="Assess",O=d(),M&&M.c(),D=h(),b(r,"class","svelte-1vlz5gb"),b(n,"class","assess-table svelte-1vlz5gb"),b(S,"type","reset"),b(z,"type","submit"),b(k,"class","form-ctrl svelte-1vlz5gb")},m(l,i){c(l,t,i),a(t,n),a(n,r),a(r,s),a(r,o),a(r,u),a(r,y),a(r,_),a(n,x);for(let e=0;e<A.length;e+=1)A[e].m(n,null);a(t,w),a(t,k),a(k,S),a(k,j),a(k,z),c(l,O,i),M&&M.m(l,i),c(l,D,i),C=!0,L||(q=[g(S,"click",v(e[5])),g(z,"click",v(e[6]))],L=!0)},p(e,t){if((!C||2&t)&&P!==(P=e[1].item.name_zh+"")&&$(y,P),8&t){let l;for(E=e[3],l=0;l<E.length;l+=1){const r=kt(e,E,l);A[l]?A[l].p(r,t):(A[l]=jt(r),A[l].c(),A[l].m(n,null))}for(;l<A.length;l+=1)A[l].d(1);A.length=E.length}e[2]?M?(M.p(e,t),4&t&&V(M,1)):(M=zt(e),M.c(),V(M,1),M.m(D.parentNode,D)):M&&(R(),W(M,1,1,(()=>{M=null})),F())},i(e){C||(V(M),C=!0)},o(e){W(M),C=!1},d(e){e&&i(t),p(A,e),e&&i(O),M&&M.d(e),e&&i(D),L=!1,l(q)}}}function jt(e){let t,n,r,s,o,u,p,h,v,x,w,k,S,j,z,O,D,C,L,q,P=e[12].prop+"",E=Dt(e[12])+"";function A(){e[8].call(u,e[13],e[14])}function M(){e[9].call(k,e[13],e[14])}return{c(){t=f("tr"),n=f("th"),r=m(P),s=d(),o=f("td"),u=f("input"),v=d(),x=f("br"),w=d(),k=f("input"),z=d(),O=f("td"),D=m(E),C=d(),b(n,"class","svelte-1vlz5gb"),b(u,"type","number"),b(u,"max",p=e[12].max),b(u,"min",h=e[12].min),b(u,"step","1"),b(u,"class","svelte-1vlz5gb"),b(k,"type","range"),b(k,"max",S=e[12].max),b(k,"min",j=e[12].min),b(k,"step","1"),b(k,"class","svelte-1vlz5gb"),b(o,"class","text-center svelte-1vlz5gb"),b(O,"class","svelte-1vlz5gb")},m(l,i){c(l,t,i),a(t,n),a(n,r),a(t,s),a(t,o),a(o,u),_(u,e[12].value),a(o,v),a(o,x),a(o,w),a(o,k),_(k,e[12].value),a(t,z),a(t,O),a(O,D),a(t,C),L||(q=[g(u,"input",A),g(k,"change",M),g(k,"input",M)],L=!0)},p(t,n){e=t,8&n&&P!==(P=e[12].prop+"")&&$(r,P),8&n&&p!==(p=e[12].max)&&b(u,"max",p),8&n&&h!==(h=e[12].min)&&b(u,"min",h),8&n&&y(u.value)!==e[12].value&&_(u,e[12].value),8&n&&S!==(S=e[12].max)&&b(k,"max",S),8&n&&j!==(j=e[12].min)&&b(k,"min",j),8&n&&_(k,e[12].value),8&n&&E!==(E=Dt(e[12])+"")&&$(D,E)},d(e){e&&i(t),L=!1,l(q)}}}function zt(e){let t,n;return t=new wt({props:{assessData:e[2]}}),{c(){G(t.$$.fragment)},m(e,l){U(t,e,l),n=!0},p(e,n){const l={};4&n&&(l.assessData=e[2]),t.$set(l)},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){K(t,e)}}}function Ot(e){let t,n,r,s,o,u,p,m,h=e[1].item&&St(e);return{c(){t=f("div"),n=f("div"),r=d(),s=f("main"),h&&h.c(),b(n,"class","overlay svelte-1vlz5gb"),b(s,"class","content svelte-1vlz5gb"),b(t,"class","dialog svelte-1vlz5gb"),t.hidden=o=!e[1].open,b(t,"tabindex","-1")},m(l,o){c(l,t,o),a(t,n),a(t,r),a(t,s),h&&h.m(s,null),e[10](t),u=!0,p||(m=[g(n,"click",e[4]),g(t,"keydown",e[7])],p=!0)},p(e,[n]){e[1].item?h?(h.p(e,n),2&n&&V(h,1)):(h=St(e),h.c(),V(h,1),h.m(s,null)):h&&(R(),W(h,1,1,(()=>{h=null})),F()),(!u||2&n&&o!==(o=!e[1].open))&&(t.hidden=o)},i(e){u||(V(h),u=!0)},o(e){W(h),u=!1},d(n){n&&i(t),h&&h.d(),e[10](null),p=!1,l(m)}}}function Dt(e){return`${(100*e.value/e.oValue).toFixed(1)}%`}function Ct(e,t,n){let l,r,s,o;function a(){n(2,r=null),function(e,t,n=t){e.set(n)}(me,s={open:!1},s)}return u(e,me,(e=>n(1,s=e))),e.$$.update=()=>{var t;3&e.$$.dirty&&s&&s.stats&&(t=s.stats,n(3,l=t.map((e=>{let[t,n]=[2*e.value,~~(.7*e.value)].sort(oe);return{oProp:e.prop,prop:te[e.prop]||e.prop,value:e.value,oValue:e.value,max:n,min:t}}))),setTimeout((()=>{o.querySelector("input")?.select()})))},n(3,l=[]),n(2,r=null),[o,s,r,l,a,function(){n(2,r=null),n(3,l=l.map((e=>({...e,value:e.oValue}))))},function(){if(n(2,r=null),!l.length)return;let e={id:s.item.id},t=l.reduce(((e,t)=>(t.value!==t.oValue&&(e[t.oProp]=t.value),e)),e);if(1===Object.keys(t).length){let e=l[0];t[e.oProp]=e.oValue}n(2,r=t)},function(e){"Escape"===e.code&&a()},function(e,t){e[t].value=y(this.value),n(3,l)},function(e,t){e[t].value=y(this.value),n(3,l)},function(e){D[e?"unshift":"push"]((()=>{o=e,n(0,o)}))}]}class Lt extends Y{constructor(e){super(),X(this,e,Ct,Ot,s,{})}}function qt(t){let n,l,r,s,o,u,a;return{c(){n=f("hr"),l=d(),r=f("hr"),s=d(),o=f("div"),o.textContent="Loading...",u=d(),a=f("hr"),b(o,"class","text-center")},m(e,t){c(e,n,t),c(e,l,t),c(e,r,t),c(e,s,t),c(e,o,t),c(e,u,t),c(e,a,t)},p:e,i:e,o:e,d(e){e&&i(n),e&&i(l),e&&i(r),e&&i(s),e&&i(o),e&&i(u),e&&i(a)}}}function Pt(e){let t,n,l,r,s,o,u,a;return t=new Ae({}),s=new ct({props:{items:e[1]}}),u=new Lt({}),{c(){G(t.$$.fragment),n=d(),l=f("hr"),r=d(),G(s.$$.fragment),o=d(),G(u.$$.fragment)},m(e,i){U(t,e,i),c(e,n,i),c(e,l,i),c(e,r,i),U(s,e,i),c(e,o,i),U(u,e,i),a=!0},p(e,t){const n={};2&t&&(n.items=e[1]),s.$set(n)},i(e){a||(V(t.$$.fragment,e),V(s.$$.fragment,e),V(u.$$.fragment,e),a=!0)},o(e){W(t.$$.fragment,e),W(s.$$.fragment,e),W(u.$$.fragment,e),a=!1},d(e){K(t,e),e&&i(n),e&&i(l),e&&i(r),K(s,e),e&&i(o),K(u,e)}}}function Et(e){let t,n,l,r,s,o,u,p,m,h;const g=[Pt,qt],v=[];function y(e,t){return e[0]?0:1}return r=y(e),s=v[r]=g[r](e),{c(){t=f("div"),n=f("h1"),n.innerHTML='<a href="https://playorna.com/" target="_blank">Orna RPG</a> items lookup tool',l=d(),s.c(),o=d(),u=f("hr"),p=d(),m=f("footer"),m.innerHTML='* data &amp; image source: <a href="https://orna.guide/" target="_blank">https://orna.guide/</a>  <br/>\n  * repo: <a href="https://github.com/rplus/orna-lookup" target="_blank">Rplus/orna-lookup</a>',b(n,"class","text-center"),b(t,"class","workspace svelte-h6ecfv"),b(m,"class","svelte-h6ecfv")},m(e,s){c(e,t,s),a(t,n),a(t,l),v[r].m(t,null),c(e,o,s),c(e,u,s),c(e,p,s),c(e,m,s),h=!0},p(e,[n]){let l=r;r=y(e),r===l?v[r].p(e,n):(R(),W(v[l],1,1,(()=>{v[l]=null})),F(),s=v[r],s?s.p(e,n):(s=v[r]=g[r](e),s.c()),V(s,1),s.m(t,null))},i(e){h||(V(s),h=!0)},o(e){W(s),h=!1},d(e){e&&i(t),v[r].d(),e&&i(o),e&&i(u),e&&i(p),e&&i(m)}}}function At(e,t,n){let l;u(e,pe,(e=>n(2,l=e)));let r=!1,s=[];return e.$$.update=()=>{5&e.$$.dirty&&(l.waiting||r||(n(0,r=!0),n(1,s=l)))},[r,s,l]}return new class extends Y{constructor(e){super(),X(this,e,At,Et,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
