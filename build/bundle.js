var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(e,...n){if(null==e)return t;const l=e.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function a(t,e,n){t.$$.on_destroy.push(o(e,n))}function i(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function d(){return m(" ")}function h(){return m("")}function g(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function v(t){return function(e){return e.preventDefault(),t.call(this,e)}}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t){return""===t?null:+t}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}function x(t,e){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];if(l.__value===e)return void(l.selected=!0)}}function w(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function k(t,e,n){t.classList[n?"add":"remove"](e)}let q;function z(t){q=t}function j(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const S=[],D=[],O=[],C=[],L=Promise.resolve();let P=!1;function E(t){O.push(t)}let N=!1;const A=new Set;function B(){if(!N){N=!0;do{for(let t=0;t<S.length;t+=1){const e=S[t];z(e),M(e.$$)}for(z(null),S.length=0;D.length;)D.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];A.has(e)||(A.add(e),e())}O.length=0}while(S.length);for(;C.length;)C.pop()();P=!1,N=!1,A.clear()}}function M(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const T=new Set;let H;function J(){H={r:0,c:[],p:H}}function W(){H.r||l(H.c),H=H.p}function I(t,e){t&&t.i&&(T.delete(t),t.i(e))}function R(t,e,n,l){if(t&&t.o){if(T.has(t))return;T.add(t),H.c.push((()=>{T.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}}function V(t,e){R(t,1,1,(()=>{e.delete(t.key)}))}function F(t,e,n,l,r,s,o,a,i,u,c,p){let f=t.length,m=s.length,d=f;const h={};for(;d--;)h[t[d].key]=d;const g=[],v=new Map,y=new Map;for(d=m;d--;){const t=p(r,s,d),a=n(t);let i=o.get(a);i?l&&i.p(t,e):(i=u(a,t),i.c()),v.set(a,g[d]=i),a in h&&y.set(a,Math.abs(d-h[a]))}const b=new Set,$=new Set;function _(t){I(t,1),t.m(a,c),o.set(t.key,t),c=t.first,m--}for(;f&&m;){const e=g[m-1],n=t[f-1],l=e.key,r=n.key;e===n?(c=e.first,f--,m--):v.has(r)?!o.has(l)||b.has(l)?_(e):$.has(r)?f--:y.get(l)>y.get(r)?($.add(l),_(e)):(b.add(r),f--):(i(n,o),f--)}for(;f--;){const e=t[f];v.has(e.key)||i(e,o)}for(;m;)_(g[m-1]);return g}function G(t){t&&t.c()}function U(t,n,s,o){const{fragment:a,on_mount:i,on_destroy:u,after_update:c}=t.$$;a&&a.m(n,s),o||E((()=>{const n=i.map(e).filter(r);u?u.push(...n):l(n),t.$$.on_mount=[]})),c.forEach(E)}function Z(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function K(t,e){-1===t.$$.dirty[0]&&(S.push(t),P||(P=!0,L.then(B)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(e,r,s,o,a,i,u,p=[-1]){const f=q;z(e);const m=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:r.context||[]),callbacks:n(),dirty:p,skip_bound:!1,root:r.target||f.$$.root};u&&u(m.root);let d=!1;if(m.ctx=s?s(e,r.props||{},((t,n,...l)=>{const r=l.length?l[0]:n;return m.ctx&&a(m.ctx[t],m.ctx[t]=r)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](r),d&&K(e,t)),n})):[],m.update(),d=!0,l(m.before_update),m.fragment=!!o&&o(m.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);m.fragment&&m.fragment.l(t),t.forEach(c)}else m.fragment&&m.fragment.c();r.intro&&I(e.$$.fragment),U(e,r.target,r.anchor,r.customElement),B()}z(f)}class Y{$destroy(){Z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const X=[];function tt(e,n=t){let l;const r=new Set;function o(t){if(s(e,t)&&(e=t,l)){const t=!X.length;for(const t of r)t[1](),X.push(t,e);if(t){for(let t=0;t<X.length;t+=2)X[t][0](X[t+1]);X.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,a=t){const i=[s,a];return r.add(i),1===r.size&&(l=n(o)||t),s(e),()=>{r.delete(i),0===r.size&&(l(),l=null)}}}}const et={Bleeding:"流血",Frozen:"冰凍",Burning:"燃燒",Asleep:"入睡",Paralyzed:"麻痺",Blind:"致盲",Stunned:"暈眩",Rot:"腐敗",Blight:"枯萎",Petrified:"石化",Poisoned:"中毒",Drenched:"濕滑",Cursed:"詛咒",Toxic:"劇毒",Lulled:"安份",Mage:"法師",Thief:"盜賊",Warrior:"戰士",Curative:"藥水",Weapon:".. 武器",Other:"其他",Item:"物品",Head:". 頭部",Armor:".. 護甲",Legs:"... 腿部",Accessory:"... 配件",Material:"材料","Off-hand":".. 副手",Adornment:"裝飾品",Dark:"闇",Water:"水",Fire:"火",Physical:"物",Holy:"光",Earthen:"土",Lightning:"雷",Dragon:"龍",Arcane:"奧","Fire Def":".火抗","Water Def":".水抗","Earth Def":".土抗","Lightning Def":".雷抗","Holy Def":".光抗","Dark Def":".闇抗","stats.attack":"物攻","stats.magic":"魔攻","stats.defense":"物防","stats.ward":"護盾","stats.dexterity":"敏捷","stats.mana":"魔力","stats.crit":"暴擊","stats.resistance":"魔防","stats.hp":"血量"};function nt(t){return function(t){for(let e in t)t[e]=t[e].filter(Boolean).map((t=>({value:t,label:et[t]?`${et[t]} ${t}`:t}))).sort(((t,e)=>lt(t.label,e.label))),t[e].unshift({value:"",label:""});return t}({types:[...new Set(t.map((t=>t.type)))],tiers:[...new Set(t.map((t=>t.tier)))],element:[...new Set(t.map((t=>t.element)))],immunities:[...new Set(t.map((t=>t.immunities?.split(", "))).flat())],causes:[...new Set(t.map((t=>t.causes)).flat())],prevents:[...new Set(t.map((t=>t.prevents)).flat())],gives:[...new Set(t.map((t=>t.gives)).flat())],cures:[...new Set(t.map((t=>t.cures)).flat())],equipped_by:[...new Set(t.map((t=>t.equipped_by)).flat().filter(Boolean))]})}function lt(t,e){switch(typeof t){case"number":return t-e;case"string":return t.toLowerCase().localeCompare(e.toLowerCase());default:return t>label_12}}function rt(t){return et[t]||t}function st(t,e){return t-e}function ot(t){return{timestamp:+new Date,rule:{prop:t.prop,value:at(t.value,t.type),type:t.type,comparator:"="}}}function at(t,e){switch(e){case"number":return+t;case"text":default:return String(t)}return t}function it(t){return ot({prop:"name_zh",value:t||"",type:"text"})}function ut(t,e){return e.tier-t.tier}const ct=[{prop:"name_zh",label:"name_zh",type:"text",sort:!0},{prop:"name",label:"name_en",type:"text",sort:!0},{prop:"tier",label:"Tier ★",type:"number",list:"tiers",min:1,max:10,sort:!0},{prop:"equipped_by",label:"穿戴者",type:"text",list:"equipped_by"},{prop:"type",label:"裝備類型",type:"text",list:"types",sort:!0},{prop:"prevents",label:"-免疫(敵)",type:"text",list:"prevents"},{prop:"cures",label:"-治癒(己)",type:"text",list:"cures"},{prop:"causes",label:"+造成(敵)",type:"text",list:"causes"},{prop:"gives",label:"+給予(己)",type:"text",list:"gives"},{prop:"slots",label:"槽位數",type:"number",sort:!0},{prop:"two_handed",label:"雙手使用",type:"checkbox"},{prop:"element",label:"元素",type:"text",list:"element",sort:!0},{prop:"boss",label:"👿 BOSS",type:"checkbox"},{prop:"arena",label:"🏟️ 競技場",type:"checkbox"},{prop:"view_distance",label:"👁️ +視野",type:"checkbox"},{prop:"materials",label:"材料id",type:"number",checkId:!0},{prop:"dropped_by",label:"掉落者id",type:"number",checkId:!0},{prop:"stats.attack",label:".物攻",type:"number",sort:!0},{prop:"stats.magic",label:".魔攻",type:"number",sort:!0},{prop:"stats.defense",label:".物防",type:"number",sort:!0},{prop:"stats.resistance",label:".魔防",type:"number",sort:!0},{prop:"stats.dexterity",label:".敏捷",type:"number",sort:!0},{prop:"stats.crit",label:".暴擊",type:"number",sort:!0},{prop:"stats.ward",label:".護盾",type:"number",sort:!0},{prop:"stats.mana",label:".魔力",type:"number",sort:!0},{prop:"stats.hp",label:".血量",type:"number",sort:!0},{prop:"other_effect",label:"加成/技能",type:"text"},{prop:"context",label:"全文搜索",type:"text"},{prop:"id",label:"id",type:"number",min:1,sort:!0}],pt=tt({waiting:!0}),ft=tt({}),mt=tt({open:!1});Promise.all(["./data/item.min.json","./data/monster.min.json"].map((t=>fetch(t).then((t=>t.json()))))).then((t=>{let e=function(t,e){let n=t=>{let n=e.find((e=>e.id===t));return n?{id:n.id,tier:n.tier,name:n.name,name_zh:n.zh}:null},l=e=>{let n=t.find((t=>t.id===e));return n?{id:n.id,tier:n.tier,name:n.name,name_zh:n.zh}:null};return t.forEach((t=>{t.dropped_by=t.dropped_by?.map(n).sort(ut),t.materials=t.materials?.map(l).sort(ut),t.name_zh=t.zh,t.context=JSON.stringify(t)})),{items:t,monsters:e}}(t[0],t[1]);const n=e.items,l=e.monsters;window.ddd=n,ft.set(nt(n)),nt(n),pt.set({items:n,monsters:l})}));let dt=new URLSearchParams(location.search),ht=ct.find((t=>dt.get(t.prop))),gt=ht?ot({prop:ht.prop,type:ht.type,value:dt.get(ht.prop)}):it("");const vt=function(){const{subscribe:t,set:e,update:n}=tt([gt]);return{subscribe:t,set:e,update:n,add:t=>n((e=>(e[e.length]=t,e))),remove:t=>n((e=>{let n=e.findIndex((e=>e.timestamp===t));return-1!==n&&e.splice(n,1),e})),reset:()=>e([])}}();function yt(t,e,n){const l=t.slice();return l[14]=e[n],l}function bt(t,e,n){const l=t.slice();return l[17]=e[n],l}function $t(e){let n,l,r,s=e[17].label+"";return{c(){n=f("option"),l=m(s),n.__value=r=e[17].prop,n.value=n.__value},m(t,e){u(t,n,e),i(n,l)},p:t,d(t){t&&c(n)}}}function _t(t){let e,n,l;return{c(){e=f("input"),y(e,"type","search")},m(r,s){u(r,e,s),_(e,t[0].rule.value),n||(l=g(e,"input",t[11]),n=!0)},p(t,n){1&n&&_(e,t[0].rule.value)},d(t){t&&c(e),n=!1,l()}}}function xt(t){let e,n,l,r,s;return{c(){e=f("input"),y(e,"type","number"),y(e,"min",n=t[1].min),y(e,"max",l=t[1].max)},m(n,l){u(n,e,l),_(e,t[0].rule.value),r||(s=g(e,"input",t[10]),r=!0)},p(t,r){2&r&&n!==(n=t[1].min)&&y(e,"min",n),2&r&&l!==(l=t[1].max)&&y(e,"max",l),1&r&&b(e.value)!==t[0].rule.value&&_(e,t[0].rule.value)},d(t){t&&c(e),r=!1,s()}}}function wt(t){let e,n,l,r=t[2][t[1].list],s=[];for(let e=0;e<r.length;e+=1)s[e]=qt(yt(t,r,e));return{c(){e=f("select");for(let t=0;t<s.length;t+=1)s[t].c();void 0===t[0].rule.value&&E((()=>t[9].call(e)))},m(r,o){u(r,e,o);for(let t=0;t<s.length;t+=1)s[t].m(e,null);x(e,t[0].rule.value),n||(l=g(e,"change",t[9]),n=!0)},p(t,n){if(6&n){let l;for(r=t[2][t[1].list],l=0;l<r.length;l+=1){const o=yt(t,r,l);s[l]?s[l].p(o,n):(s[l]=qt(o),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=r.length}1&n&&x(e,t[0].rule.value)},d(t){t&&c(e),p(s,t),n=!1,l()}}}function kt(t){let e,n,r,s,o,a,p,h,v;return{c(){e=f("label"),n=m("T\n      "),r=f("input"),s=d(),o=f("label"),a=f("input"),p=m("\n      F"),y(r,"type","radio"),r.__value="1",r.value=r.__value,t[7][0].push(r),y(a,"type","radio"),a.__value="0",a.value=a.__value,t[7][0].push(a)},m(l,c){u(l,e,c),i(e,n),i(e,r),r.checked=r.__value===t[0].rule.value,u(l,s,c),u(l,o,c),i(o,a),a.checked=a.__value===t[0].rule.value,i(o,p),h||(v=[g(r,"change",t[6]),g(a,"change",t[8])],h=!0)},p(t,e){1&e&&(r.checked=r.__value===t[0].rule.value),1&e&&(a.checked=a.__value===t[0].rule.value)},d(n){n&&c(e),t[7][0].splice(t[7][0].indexOf(r),1),n&&c(s),n&&c(o),t[7][0].splice(t[7][0].indexOf(a),1),h=!1,l(v)}}}function qt(t){let e,n,l,r=t[14].label+"";return{c(){e=f("option"),n=m(r),e.__value=l=t[14].value,e.value=e.__value},m(t,l){u(t,e,l),i(e,n)},p(t,s){6&s&&r!==(r=t[14].label+"")&&$(n,r),6&s&&l!==(l=t[14].value)&&(e.__value=l,e.value=e.__value)},d(t){t&&c(e)}}}function zt(t){let e,n,l,r,s,o;return{c(){e=f("select"),n=f("option"),n.textContent="=",l=f("option"),l.textContent="+",r=f("option"),r.textContent="-",n.__value="=",n.value=n.__value,l.__value="+",l.value=l.__value,r.__value="-",r.value=r.__value,void 0===t[0].rule.comparator&&E((()=>t[12].call(e)))},m(a,c){u(a,e,c),i(e,n),i(e,l),i(e,r),x(e,t[0].rule.comparator),s||(o=g(e,"change",t[12]),s=!0)},p(t,n){1&n&&x(e,t[0].rule.comparator)},d(t){t&&c(e),s=!1,o()}}}function jt(t){let e,n,l;return{c(){e=f("a"),n=m("↗"),y(e,"href",l="./?"+t[0].rule.prop+"="+t[0].rule.value)},m(t,l){u(t,e,l),i(e,n)},p(t,n){1&n&&l!==(l="./?"+t[0].rule.prop+"="+t[0].rule.value)&&y(e,"href",l)},d(t){t&&c(e)}}}function St(e){let n,s,o,a,h,v,b,$,_,w,k=ct,q=[];for(let t=0;t<k.length;t+=1)q[t]=$t(bt(e,k,t));function z(t,e){return"checkbox"===t[1].type?kt:t[1].list?wt:"number"===t[1].type?xt:"text"===t[1].type?_t:void 0}let j=z(e),S=j&&j(e),D="number"===e[1].type&&zt(e),O=e[0].rule.value&&jt(e);return{c(){n=f("div"),s=f("button"),s.textContent="x",o=d(),a=f("select");for(let t=0;t<q.length;t+=1)q[t].c();h=m("}"),v=d(),S&&S.c(),b=d(),D&&D.c(),$=d(),O&&O.c(),void 0===e[0].rule.prop&&E((()=>e[5].call(a))),y(n,"class","filters")},m(t,l){u(t,n,l),i(n,s),i(n,o),i(n,a);for(let t=0;t<q.length;t+=1)q[t].m(a,null);i(a,h),x(a,e[0].rule.prop),i(n,v),S&&S.m(n,null),i(n,b),D&&D.m(n,null),i(n,$),O&&O.m(n,null),_||(w=[g(s,"click",(function(){r(e[4](e[0].timestamp))&&e[4](e[0].timestamp).apply(this,arguments)})),g(a,"change",e[5]),g(a,"change",e[3])],_=!0)},p(t,[l]){if(e=t,0&l){let t;for(k=ct,t=0;t<k.length;t+=1){const n=bt(e,k,t);q[t]?q[t].p(n,l):(q[t]=$t(n),q[t].c(),q[t].m(a,h))}for(;t<q.length;t+=1)q[t].d(1);q.length=k.length}1&l&&x(a,e[0].rule.prop),j===(j=z(e))&&S?S.p(e,l):(S&&S.d(1),S=j&&j(e),S&&(S.c(),S.m(n,b))),"number"===e[1].type?D?D.p(e,l):(D=zt(e),D.c(),D.m(n,$)):D&&(D.d(1),D=null),e[0].rule.value?O?O.p(e,l):(O=jt(e),O.c(),O.m(n,null)):O&&(O.d(1),O=null)},i:t,o:t,d(t){t&&c(n),p(q,t),S&&S.d(),D&&D.d(),O&&O.d(),_=!1,l(w)}}}function Dt(t,e,n){let l;a(t,ft,(t=>n(2,l=t)));let{filter:r}=e,s=o(r.rule.prop);function o(t){return ct.find((e=>e.prop===t))}return t.$$set=t=>{"filter"in t&&n(0,r=t.filter)},t.$$.update=()=>{3&t.$$.dirty&&(n(1,s=o(r.rule.prop)),n(0,r.rule.type=s.type,r))},[r,s,l,function(){n(0,r.rule.value="",r)},function(t){vt.remove(t)},function(){r.rule.prop=w(this),n(0,r),n(1,s)},function(){r.rule.value=this.__value,n(0,r),n(1,s)},[[]],function(){r.rule.value=this.__value,n(0,r),n(1,s)},function(){r.rule.value=w(this),n(0,r),n(1,s)},function(){r.rule.value=b(this.value),n(0,r),n(1,s)},function(){r.rule.value=this.value,n(0,r),n(1,s)},function(){r.rule.comparator=w(this),n(0,r),n(1,s)}]}class Ot extends Y{constructor(t){super(),Q(this,t,Dt,St,s,{filter:0})}}function Ct(t,e,n){const l=t.slice();return l[3]=e[n],l[4]=e,l[5]=n,l}function Lt(t,e){let n,l,r,s,o;function a(t){e[2](t,e[3],e[4],e[5])}let p={};return void 0!==e[3]&&(p.filter=e[3]),l=new Ot({props:p}),D.push((()=>function(t,e,n){const l=t.$$.props[e];void 0!==l&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}(l,"filter",a))),{key:t,first:null,c(){n=f("li"),G(l.$$.fragment),s=d(),this.first=n},m(t,e){u(t,n,e),U(l,n,null),i(n,s),o=!0},p(t,n){e=t;const s={};var o;!r&&1&n&&(r=!0,s.filter=e[3],o=()=>r=!1,C.push(o)),l.$set(s)},i(t){o||(I(l.$$.fragment,t),o=!0)},o(t){R(l.$$.fragment,t),o=!1},d(t){t&&c(n),Z(l)}}}function Pt(t){let e,n,l,r,s,o,a,p=[],m=new Map,h=t[0];const v=t=>t[3].timestamp;for(let e=0;e<h.length;e+=1){let n=Ct(t,h,e),l=v(n);m.set(l,p[e]=Lt(l,n))}return{c(){e=f("aside"),n=f("button"),n.textContent="+過濾條件",l=d(),r=f("ul");for(let t=0;t<p.length;t+=1)p[t].c();y(r,"class","svelte-km15j4"),y(e,"class","svelte-km15j4")},m(c,f){u(c,e,f),i(e,n),i(e,l),i(e,r);for(let t=0;t<p.length;t+=1)p[t].m(r,null);s=!0,o||(a=g(n,"click",t[1]),o=!0)},p(t,[e]){1&e&&(h=t[0],J(),p=F(p,e,v,1,t,h,m,r,V,Lt,null,Ct),W())},i(t){if(!s){for(let t=0;t<h.length;t+=1)I(p[t]);s=!0}},o(t){for(let t=0;t<p.length;t+=1)R(p[t]);s=!1},d(t){t&&c(e);for(let t=0;t<p.length;t+=1)p[t].d();o=!1,a()}}}function Et(t,e,n){let l;return a(t,vt,(t=>n(0,l=t))),[l,function(){vt.add(it(""))},function(t,e,n,r){n[r]=t,vt.set(l)}]}class Nt extends Y{constructor(t){super(),Q(this,t,Et,Pt,s,{})}}function At(t,e){if(t)return e?`https://playorna.com/static/img/${t.image}`:(t.deadProxyImage,Bt(t.image))}function Bt(t){return`https://orna.guide/static/orna/img/${t}`}function Mt(t,e,n){const l=t.slice();return l[6]=e[n],l}function Tt(t){let e,n,l,r,s,o=t[0],a=[];for(let e=0;e<o.length;e+=1)a[e]=Ht(Mt(t,o,e));return{c(){e=f("details"),n=f("summary"),l=m(t[1]),r=d(),s=f("ul");for(let t=0;t<a.length;t+=1)a[t].c();e.open=!0},m(t,o){u(t,e,o),i(e,n),i(n,l),i(e,r),i(e,s);for(let t=0;t<a.length;t+=1)a[t].m(s,null)},p(t,e){if(2&e&&$(l,t[1]),13&e){let n;for(o=t[0],n=0;n<o.length;n+=1){const l=Mt(t,o,n);a[n]?a[n].p(l,e):(a[n]=Ht(l),a[n].c(),a[n].m(s,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}},d(t){t&&c(e),p(a,t)}}}function Ht(t){let e,n,l,r,s,o,a,p,h,b,_,x,w=t[6].tier+"",k=(t[6].name_zh||t[6].name)+"";function q(){return t[5](t[6])}return{c(){e=f("li"),n=f("a"),l=f("small"),r=m("★"),s=m(w),o=m(" -"),a=d(),p=m(k),b=d(),y(n,"href",h="https://orna.guide/"+t[2]+"?show="+t[6].id),y(n,"target","orna.guide")},m(t,c){u(t,e,c),i(e,n),i(n,l),i(l,r),i(l,s),i(l,o),i(n,a),i(n,p),i(e,b),_||(x=g(n,"click",v(q)),_=!0)},p(e,l){t=e,1&l&&w!==(w=t[6].tier+"")&&$(s,w),1&l&&k!==(k=(t[6].name_zh||t[6].name)+"")&&$(p,k),5&l&&h!==(h="https://orna.guide/"+t[2]+"?show="+t[6].id)&&y(n,"href",h)},d(t){t&&c(e),_=!1,x()}}}function Jt(e){let n,l=e[0]&&Tt(e);return{c(){l&&l.c(),n=h()},m(t,e){l&&l.m(t,e),u(t,n,e)},p(t,[e]){t[0]?l?l.p(t,e):(l=Tt(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){l&&l.d(t),t&&c(n)}}}function Wt(t,e,n){let{items:l=null}=e,{title:r=""}=e,{type:s="monsters"}=e,{prop:o=""}=e;function a(t){let e=ot({prop:o,value:t,type:"number"});vt.set([e])}return t.$$set=t=>{"items"in t&&n(0,l=t.items),"title"in t&&n(1,r=t.title),"type"in t&&n(2,s=t.type),"prop"in t&&n(4,o=t.prop)},[l,r,s,a,o,t=>a(t.id)]}class It extends Y{constructor(t){super(),Q(this,t,Wt,Jt,s,{items:0,title:1,type:2,prop:4})}}function Rt(t,e,n){const l=t.slice();return l[6]=e[n],l}function Vt(t,e,n){const l=t.slice();return l[9]=e[n],l}function Ft(t,e,n){const l=t.slice();return l[12]=e[n],l}function Gt(e){let n,l,r,s,o,a,p,h=rt(e[12].prop)+"",g=e[12].value+"";return{c(){n=f("tr"),l=f("th"),r=m(h),s=d(),o=f("td"),a=m(g),p=d(),y(l,"class","svelte-qypr33")},m(t,e){u(t,n,e),i(n,l),i(l,r),i(n,s),i(n,o),i(o,a),i(n,p)},p:t,d(t){t&&c(n)}}}function Ut(t){let e,n,l,r,s,o,a,h,g,v=t[6][1]+"",b=t[0][t[6][0]],$=[];for(let e=0;e<b.length;e+=1)$[e]=Zt(Vt(t,b,e));return{c(){e=f("div"),n=f("span"),l=m("[ "),r=m(v),s=m(" ]"),a=d(),h=f("br"),g=m("\n            -------\n            ");for(let t=0;t<$.length;t+=1)$[t].c();y(n,"title",o=t[6][0]),y(e,"class","text-right svelte-qypr33")},m(t,o){u(t,e,o),i(e,n),i(n,l),i(n,r),i(n,s),i(e,a),i(e,h),i(e,g);for(let t=0;t<$.length;t+=1)$[t].m(e,null)},p(t,n){if(3&n){let l;for(b=t[0][t[6][0]],l=0;l<b.length;l+=1){const r=Vt(t,b,l);$[l]?$[l].p(r,n):($[l]=Zt(r),$[l].c(),$[l].m(e,null))}for(;l<$.length;l+=1)$[l].d(1);$.length=b.length}},d(t){t&&c(e),p($,t)}}}function Zt(t){let e,n,l=rt(t[9])+"";return{c(){e=f("div"),n=m(l)},m(t,l){u(t,e,l),i(e,n)},p(t,e){1&e&&l!==(l=rt(t[9])+"")&&$(n,l)},d(t){t&&c(e)}}}function Kt(t){let e,n=t[0][t[6][0]]&&Ut(t);return{c(){n&&n.c(),e=h()},m(t,l){n&&n.m(t,l),u(t,e,l)},p(t,l){t[0][t[6][0]]?n?n.p(t,l):(n=Ut(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&c(e)}}}function Qt(t){let e,n,l,r,s,o,a,h,b,_,x,w,k,q,z,j,S,D,O,C,L,P,E,N,A,B,M,T,H,J,W,V,F,K,Q,Y,X,tt,nt,lt,rt,st,ot,at,it,ut,ct,pt,ft,mt,dt,ht,gt,vt,yt,bt,$t,_t,xt,wt,kt,qt,zt=t[0].name_zh+"",jt=t[0].name+"",St=t[0].tier+"",Dt=et[t[0].element]?`[${et[t[0].element]}]`:"",Ot=t[0].boss?"👿":"",Ct=t[0].arena?"🏟️":"",Lt=t[0].view_distance?"👁️":"",Pt=t[0].two_handed?"🙌":"",Et=JSON.stringify({...t[0],context:null},null," ")+"",Nt=t[2].length&&function(t){let e,n,l,r,s,o,a,d=t[2],h=[];for(let e=0;e<d.length;e+=1)h[e]=Gt(Ft(t,d,e));return{c(){e=f("div"),n=m("[ Stats ]\n          "),l=f("br"),r=m("\n          ---------\n          "),s=f("table");for(let t=0;t<h.length;t+=1)h[t].c();var t,o,a;t="cursor",o="pointer",s.style.setProperty(t,o,a?"important":""),y(s,"class","svelte-qypr33"),y(e,"class","svelte-qypr33")},m(c,p){u(c,e,p),i(e,n),i(e,l),i(e,r),i(e,s);for(let t=0;t<h.length;t+=1)h[t].m(s,null);o||(a=g(s,"click",t[3]),o=!0)},p(t,e){if(4&e){let n;for(d=t[2],n=0;n<d.length;n+=1){const l=Ft(t,d,n);h[n]?h[n].p(l,e):(h[n]=Gt(l),h[n].c(),h[n].m(s,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}},d(t){t&&c(e),p(h,t),o=!1,a()}}}(t),Bt=t[1],Mt=[];for(let e=0;e<Bt.length;e+=1)Mt[e]=Kt(Rt(t,Bt,e));return pt=new It({props:{items:t[0].dropped_by,title:"掉落方",type:"monsters",prop:"dropped_by"}}),dt=new It({props:{items:t[0].materials,title:"材料",type:"items",prop:"id"}}),{c(){e=f("details"),n=f("summary"),l=f("ruby"),r=f("rb"),s=m(zt),o=d(),a=f("rt"),h=m(jt),b=d(),_=f("a"),x=f("sup"),w=m("★"),k=m(St),z=d(),j=f("div"),S=f("div"),O=d(),Nt&&Nt.c(),C=d();for(let t=0;t<Mt.length;t+=1)Mt[t].c();L=d(),P=f("div"),E=f("div"),A=d(),B=f("div"),M=m(Dt),T=d(),H=f("div"),J=m(Ot),W=d(),V=f("div"),F=m(Ct),K=d(),Q=f("div"),Y=m(Lt),X=d(),tt=f("div"),nt=m(Pt),lt=d(),rt=f("div"),at=d(),it=f("div"),ut=f("div"),ct=f("div"),G(pt.$$.fragment),ft=d(),mt=f("div"),G(dt.$$.fragment),ht=d(),gt=f("details"),vt=f("summary"),yt=d(),bt=f("pre"),$t=m(Et),y(a,"class","svelte-qypr33"),y(l,"class","svelte-qypr33"),y(x,"class","svelte-qypr33"),y(_,"href",q="https://orna.guide/items?show="+t[0].id),y(_,"target","orna.guide"),y(S,"class","item-img-box svelte-qypr33"),y(S,"style",D=`--bg: url(${At(t[0])}); --bg-fallback: url(${At(t[0],"small")})`),y(E,"class","item-equipped svelte-qypr33"),y(E,"title",N=t[0].equipped_by),y(B,"class","item-char svelte-qypr33"),y(H,"class","item-char svelte-qypr33"),y(H,"title","dropped from boss"),y(V,"class","item-char svelte-qypr33"),y(V,"title","dropped from arena"),y(Q,"class","item-char svelte-qypr33"),y(Q,"title","enhance view distance"),y(tt,"class","item-char svelte-qypr33"),y(tt,"title","two hands"),y(rt,"class","item-slots svelte-qypr33"),y(rt,"data-slots",st=t[0].slots),y(rt,"title",ot=t[0].slots+" slots"),y(P,"class","rt-box svelte-qypr33"),y(j,"class","item-info svelte-qypr33"),y(n,"class","summary svelte-qypr33"),y(ct,"class","dropped_by"),y(mt,"class","materials"),y(vt,"class","text-right"),y(bt,"class","item-pre svelte-qypr33"),y(ut,"class","item-more svelte-qypr33"),y(ut,"data-type",_t="【"+et[t[0].type]+"】"),y(it,"class","svelte-qypr33"),y(e,"class",xt="item-details item-rarity--"+(t[0].rarity||"w")+" svelte-qypr33")},m(c,p){u(c,e,p),i(e,n),i(n,l),i(l,r),i(r,s),i(l,o),i(l,a),i(a,h),i(n,b),i(n,_),i(_,x),i(x,w),i(x,k),i(n,z),i(n,j),i(j,S),i(j,O),Nt&&Nt.m(j,null),i(j,C);for(let t=0;t<Mt.length;t+=1)Mt[t].m(j,null);i(j,L),i(j,P),i(P,E),i(P,A),i(P,B),i(B,M),i(P,T),i(P,H),i(H,J),i(P,W),i(P,V),i(V,F),i(P,K),i(P,Q),i(Q,Y),i(P,X),i(P,tt),i(tt,nt),i(P,lt),i(P,rt),i(e,at),i(e,it),i(it,ut),i(ut,ct),U(pt,ct,null),i(ut,ft),i(ut,mt),U(dt,mt,null),i(ut,ht),i(ut,gt),i(gt,vt),i(gt,yt),i(gt,bt),i(bt,$t),wt=!0,kt||(qt=g(j,"click",v(t[4])),kt=!0)},p(t,[n]){if((!wt||1&n)&&zt!==(zt=t[0].name_zh+"")&&$(s,zt),(!wt||1&n)&&jt!==(jt=t[0].name+"")&&$(h,jt),(!wt||1&n)&&St!==(St=t[0].tier+"")&&$(k,St),(!wt||1&n&&q!==(q="https://orna.guide/items?show="+t[0].id))&&y(_,"href",q),(!wt||1&n&&D!==(D=`--bg: url(${At(t[0])}); --bg-fallback: url(${At(t[0],"small")})`))&&y(S,"style",D),t[2].length&&Nt.p(t,n),3&n){let e;for(Bt=t[1],e=0;e<Bt.length;e+=1){const l=Rt(t,Bt,e);Mt[e]?Mt[e].p(l,n):(Mt[e]=Kt(l),Mt[e].c(),Mt[e].m(j,L))}for(;e<Mt.length;e+=1)Mt[e].d(1);Mt.length=Bt.length}(!wt||1&n&&N!==(N=t[0].equipped_by))&&y(E,"title",N),(!wt||1&n)&&Dt!==(Dt=et[t[0].element]?`[${et[t[0].element]}]`:"")&&$(M,Dt),(!wt||1&n)&&Ot!==(Ot=t[0].boss?"👿":"")&&$(J,Ot),(!wt||1&n)&&Ct!==(Ct=t[0].arena?"🏟️":"")&&$(F,Ct),(!wt||1&n)&&Lt!==(Lt=t[0].view_distance?"👁️":"")&&$(Y,Lt),(!wt||1&n)&&Pt!==(Pt=t[0].two_handed?"🙌":"")&&$(nt,Pt),(!wt||1&n&&st!==(st=t[0].slots))&&y(rt,"data-slots",st),(!wt||1&n&&ot!==(ot=t[0].slots+" slots"))&&y(rt,"title",ot);const l={};1&n&&(l.items=t[0].dropped_by),pt.$set(l);const r={};1&n&&(r.items=t[0].materials),dt.$set(r),(!wt||1&n)&&Et!==(Et=JSON.stringify({...t[0],context:null},null," ")+"")&&$($t,Et),(!wt||1&n&&_t!==(_t="【"+et[t[0].type]+"】"))&&y(ut,"data-type",_t),(!wt||1&n&&xt!==(xt="item-details item-rarity--"+(t[0].rarity||"w")+" svelte-qypr33"))&&y(e,"class",xt)},i(t){wt||(I(pt.$$.fragment,t),I(dt.$$.fragment,t),wt=!0)},o(t){R(pt.$$.fragment,t),R(dt.$$.fragment,t),wt=!1},d(t){t&&c(e),Nt&&Nt.d(),p(Mt,t),Z(pt),Z(dt),kt=!1,qt()}}}function Yt(t,e,n){let{item:l}=e;let r=["stats.attack","stats.magic","stats.defense","stats.ward","stats.dexterity","stats.mana","stats.crit","stats.resistance","stats.hp"].map((t=>({prop:t,value:l[t]}))).filter((t=>t.value));return t.$$set=t=>{"item"in t&&n(0,l=t.item)},[l,[["causes","🔪"],["prevents","🛡️"],["gives","🎁"],["cures","❤️‍🩹"],["other_effect","✨"]],r,function(){mt.set({open:!0,item:l,stats:r})},function(e){j.call(this,t,e)}]}class Xt extends Y{constructor(t){super(),Q(this,t,Yt,Qt,s,{item:0})}}function te(t,e,n){const l=t.slice();return l[17]=e[n],l}function ee(t,e,n){const l=t.slice();return l[20]=e[n],l}function ne(e){let n,l,r,s=e[20].label+"";return{c(){n=f("option"),l=m(s),n.__value=r=e[20].prop,n.value=n.__value},m(t,e){u(t,n,e),i(n,l)},p:t,d(t){t&&c(n)}}}function le(t,e){let n,l,r,s;return l=new Xt({props:{item:e[17]}}),{key:t,first:null,c(){n=f("li"),G(l.$$.fragment),r=d(),y(n,"class","svelte-1627awp"),this.first=n},m(t,e){u(t,n,e),U(l,n,null),i(n,r),s=!0},p(t,n){e=t;const r={};17&n&&(r.item=e[17]),l.$set(r)},i(t){s||(I(l.$$.fragment,t),s=!0)},o(t){R(l.$$.fragment,t),s=!1},d(t){t&&c(n),Z(l)}}}function re(t){let e,n,r,s,o,a,h,v,w,q,z,j,S,D,O,C,L,P,N,A,B,M,T,H,G,U=t[0].length+"",Z=[],K=new Map,Q=t[6],Y=[];for(let e=0;e<Q.length;e+=1)Y[e]=ne(ee(t,Q,e));let X=t[0].slice(0,t[4]);const tt=t=>t[17].id;for(let e=0;e<X.length;e+=1){let n=te(t,X,e),l=tt(n);K.set(l,Z[e]=le(l,n))}return{c(){e=f("div"),n=f("div"),r=m("排序:\n    "),s=f("select");for(let t=0;t<Y.length;t+=1)Y[t].c();o=d(),a=f("input"),h=d(),v=f("details"),w=f("summary"),q=m("顯示數量\n      "),z=f("input"),j=m("\n      / "),S=m(U),D=d(),O=f("div"),C=m("總數\n      "),L=f("input"),P=m("\n      以下秀圖"),N=d(),A=f("hr"),B=d(),M=f("ul");for(let t=0;t<Z.length;t+=1)Z[t].c();void 0===t[1]&&E((()=>t[9].call(s))),y(a,"id","sortDir"),y(a,"type","checkbox"),y(a,"class","svelte-1627awp"),y(z,"class","text-center"),y(z,"type","number"),y(z,"min","5"),y(z,"max","2000"),y(z,"step","5"),y(L,"class","text-center"),y(L,"type","number"),y(L,"min","1"),y(L,"max","50"),y(e,"class","nav svelte-1627awp"),y(M,"class","items svelte-1627awp"),k(M,"showDetails",t[5])},m(l,c){u(l,e,c),i(e,n),i(n,r),i(n,s);for(let t=0;t<Y.length;t+=1)Y[t].m(s,null);x(s,t[1]),i(n,o),i(n,a),a.checked=t[2],i(e,h),i(e,v),i(v,w),i(w,q),i(w,z),_(z,t[4]),i(w,j),i(w,S),i(v,D),i(v,O),i(O,C),i(O,L),_(L,t[3]),i(O,P),u(l,N,c),u(l,A,c),u(l,B,c),u(l,M,c);for(let t=0;t<Z.length;t+=1)Z[t].m(M,null);T=!0,H||(G=[g(s,"change",t[9]),g(a,"change",t[10]),g(z,"input",t[11]),g(L,"input",t[12])],H=!0)},p(t,[e]){if(64&e){let n;for(Q=t[6],n=0;n<Q.length;n+=1){const l=ee(t,Q,n);Y[n]?Y[n].p(l,e):(Y[n]=ne(l),Y[n].c(),Y[n].m(s,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=Q.length}66&e&&x(s,t[1]),4&e&&(a.checked=t[2]),16&e&&b(z.value)!==t[4]&&_(z,t[4]),(!T||1&e)&&U!==(U=t[0].length+"")&&$(S,U),8&e&&b(L.value)!==t[3]&&_(L,t[3]),17&e&&(X=t[0].slice(0,t[4]),J(),Z=F(Z,e,tt,1,t,X,K,M,V,le,null,te),W()),32&e&&k(M,"showDetails",t[5])},i(t){if(!T){for(let t=0;t<X.length;t+=1)I(Z[t]);T=!0}},o(t){for(let t=0;t<Z.length;t+=1)R(Z[t]);T=!1},d(t){t&&c(e),p(Y,t),t&&c(N),t&&c(A),t&&c(B),t&&c(M);for(let t=0;t<Z.length;t+=1)Z[t].d();H=!1,l(G)}}}function se(t,e,n){let l,r,s,o,i,u;a(t,vt,(t=>n(8,u=t)));let{items:c=[]}=e,p=ct.filter((t=>t.sort)),f=[];function m(t){let e=c;return!t||!t.length||1===t.length&&null==t[0].rule?.value?e:(t.map((t=>t.rule)).forEach((t=>{t&&(e=function(t,e){let{prop:n,type:l,value:r,comparator:s}=e;if(!r||!t.length)return t;let o=ct.find((t=>t.prop===n));if(o.checkId)return t.filter((t=>t[n]?.some((t=>t.id===r))));switch(l){case"checkbox":return Boolean(+r)?t.filter((t=>t[n])):t.filter((t=>!t[n]));case"number":return t.filter((t=>{let e=t[n];switch(s){case"+":return e>=r;case"-":return e<=r;default:return e===r}}));case"text":return t.filter((t=>{if(o.list)return t[n]?.includes(r);return new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i").test(t[n])}));default:return t}}(e,t))})),function(t=c){return t.sort(((t,e)=>{let n=r?1:-1,s=t[l]||-9999,o=e[l]||-9999;switch("object"==typeof o&&(o=-9999),"object"==typeof s&&(s=-9999),typeof s){case"string":return s.localeCompare(o)*n;case"number":return(s-o)*n;default:return 0}}))}(e))}return t.$$set=t=>{"items"in t&&n(7,c=t.items)},t.$$.update=()=>{262&t.$$.dirty&&n(0,f=m(u)),25&t.$$.dirty&&n(5,i=f.length<=o||s<=o)},n(1,l="tier"),n(2,r=!0),n(4,s=50),n(3,o=20),[f,l,r,o,s,i,p,c,u,function(){l=w(this),n(1,l),n(6,p)},function(){r=this.checked,n(2,r)},function(){s=b(this.value),n(4,s)},function(){o=b(this.value),n(3,o)}]}class oe extends Y{constructor(t){super(),Q(this,t,se,re,s,{items:7})}}function ae(t,e,n){const l=t.slice();return l[7]=e[n],l[9]=n,l}function ie(t,e,n){const l=t.slice();return l[10]=e[n],l}function ue(t,e,n){const l=t.slice();return l[13]=e[n],l}function ce(t){let e;return{c(){e=m("Loading...")},m(t,n){u(t,e,n)},d(t){t&&c(e)}}}function pe(e){let n;return{c(){n=f("blockquote"),n.textContent="GG",y(n,"class","svelte-1tc8awj")},m(t,e){u(t,n,e)},p:t,d(t){t&&c(n)}}}function fe(t){let e,n,l,r,s,o,a=100*t[3].quality+"";function p(t,e){return"0"!==t[3].quality?de:me}let h=p(t),g=h(t);return{c(){e=f("table"),n=f("caption"),l=m("品質: "),r=m(a),s=m("%"),o=d(),g.c(),y(n,"class","svelte-1tc8awj"),y(e,"class","text-right svelte-1tc8awj")},m(t,a){u(t,e,a),i(e,n),i(n,l),i(n,r),i(n,s),i(e,o),g.m(e,null)},p(t,n){8&n&&a!==(a=100*t[3].quality+"")&&$(r,a),h===(h=p(t))&&g?g.p(t,n):(g.d(1),g=h(t),g&&(g.c(),g.m(e,null)))},d(t){t&&c(e),g.d()}}}function me(e){let n;return{c(){n=f("caption"),n.textContent="Wrong values.",y(n,"class","svelte-1tc8awj")},m(t,e){u(t,n,e)},p:t,d(t){t&&c(n)}}}function de(t){let e,n,l,r,s,o,a=Object.keys(t[3].stats),m=[];for(let e=0;e<a.length;e+=1)m[e]=he(ue(t,a,e));let h=Object.values(t[3].stats)[0].values,g=[];for(let e=0;e<h.length;e+=1)g[e]=ve(ae(t,h,e));return{c(){e=f("thead"),n=f("tr"),l=f("th"),l.textContent="Lv.",r=d();for(let t=0;t<m.length;t+=1)m[t].c();s=d(),o=f("tbody");for(let t=0;t<g.length;t+=1)g[t].c();y(l,"class","svelte-1tc8awj"),y(o,"class","svelte-1tc8awj")},m(t,a){u(t,e,a),i(e,n),i(n,l),i(n,r);for(let t=0;t<m.length;t+=1)m[t].m(n,null);u(t,s,a),u(t,o,a);for(let t=0;t<g.length;t+=1)g[t].m(o,null)},p(t,e){if(8&e){let l;for(a=Object.keys(t[3].stats),l=0;l<a.length;l+=1){const r=ue(t,a,l);m[l]?m[l].p(r,e):(m[l]=he(r),m[l].c(),m[l].m(n,null))}for(;l<m.length;l+=1)m[l].d(1);m.length=a.length}if(8&e){let n;for(h=Object.values(t[3].stats)[0].values,n=0;n<h.length;n+=1){const l=ae(t,h,n);g[n]?g[n].p(l,e):(g[n]=ve(l),g[n].c(),g[n].m(o,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=h.length}},d(t){t&&c(e),p(m,t),t&&c(s),t&&c(o),p(g,t)}}}function he(t){let e,n,l=rt(t[13])+"";return{c(){e=f("th"),n=m(l),y(e,"class","svelte-1tc8awj")},m(t,l){u(t,e,l),i(e,n)},p(t,e){8&e&&l!==(l=rt(t[13])+"")&&$(n,l)},d(t){t&&c(e)}}}function ge(t){let e,n,l=t[10].values[t[9]]+"";return{c(){e=f("td"),n=m(l),y(e,"class","svelte-1tc8awj")},m(t,l){u(t,e,l),i(e,n)},p(t,e){8&e&&l!==(l=t[10].values[t[9]]+"")&&$(n,l)},d(t){t&&c(e)}}}function ve(t){let e,n,l,r,s,o=t[9]+1+"",a=Object.values(t[3].stats),h=[];for(let e=0;e<a.length;e+=1)h[e]=ge(ie(t,a,e));return{c(){e=f("tr"),n=f("th"),l=m(o),r=d();for(let t=0;t<h.length;t+=1)h[t].c();s=d(),y(n,"class","svelte-1tc8awj"),y(e,"class","svelte-1tc8awj")},m(t,o){u(t,e,o),i(e,n),i(n,l),i(e,r);for(let t=0;t<h.length;t+=1)h[t].m(e,null);i(e,s)},p(t,n){if(8&n){let l;for(a=Object.values(t[3].stats),l=0;l<a.length;l+=1){const r=ie(t,a,l);h[l]?h[l].p(r,n):(h[l]=ge(r),h[l].c(),h[l].m(e,s))}for(;l<h.length;l+=1)h[l].d(1);h.length=a.length}},d(t){t&&c(e),p(h,t)}}}function ye(e){let n,l,r=e[2]&&ce();function s(t,e){return t[3]?fe:t[2]?void 0:pe}let o=s(e),a=o&&o(e);return{c(){r&&r.c(),n=d(),a&&a.c(),l=h()},m(t,e){r&&r.m(t,e),u(t,n,e),a&&a.m(t,e),u(t,l,e)},p(t,[e]){t[2]?r||(r=ce(),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),o===(o=s(t))&&a?a.p(t,e):(a&&a.d(1),a=o&&o(t),a&&(a.c(),a.m(l.parentNode,l)))},i:t,o:t,d(t){r&&r.d(t),t&&c(n),a&&a.d(t),t&&c(l)}}}function be(e,n,l){let r,s,a,i,u,c,p=t,f=t;e.$$.on_destroy.push((()=>p())),e.$$.on_destroy.push((()=>f()));let{assessData:m={}}=n;return e.$$set=t=>{"assessData"in t&&l(4,m=t.assessData)},e.$$.update=()=>{16&e.$$.dirty&&(l(1,[r,s,a,i]=function(t){const e=tt(!1),n=tt(!1),l=tt(null);async function r(){e.set(!0),n.set(!1);try{const e=await fetch("https://orna.guide/api/v1/assess",{headers:{accept:"*/*","content-type":"application/x-www-form-urlencoded"},referrerPolicy:"strict-origin-when-cross-origin",body:JSON.stringify(t),method:"POST",mode:"cors"}).then((t=>t.json()));l.set(e)}catch(t){n.set(t)}e.set(!1)}return r(),[l,e,n,r]}(m),r,(l(0,s),p(),p=o(s,(t=>l(2,u=t))),s)),f(),f=o(r,(t=>l(3,c=t))))},[s,r,u,c,m]}class $e extends Y{constructor(t){super(),Q(this,t,be,ye,s,{assessData:4})}}function _e(t,e,n){const l=t.slice();return l[15]=e[n],l[16]=e,l[17]=n,l}function xe(t,e,n){const l=t.slice();return l[18]=e[n],l}function we(t){let e,n,r,s,o,a,b,_,w,k,q,z,j,S,D,O,C,L,P,N,A=t[2].item.name_zh+"",B=t[5],M=[];for(let e=0;e<B.length;e+=1)M[e]=ke(xe(t,B,e));let T=t[4],H=[];for(let e=0;e<T.length;e+=1)H[e]=qe(_e(t,T,e));let V=t[3]&&ze(t);return{c(){e=f("form"),n=f("table"),r=f("caption"),s=m("品質試算\n            "),o=f("br"),a=m("\n            [ "),b=m(A),_=m(" ] Lv.\n            "),w=f("select");for(let t=0;t<M.length;t+=1)M[t].c();k=d();for(let t=0;t<H.length;t+=1)H[t].c();q=d(),z=f("div"),j=f("button"),j.textContent="Reset",S=d(),D=f("button"),D.textContent="Assess",O=d(),V&&V.c(),C=h(),void 0===t[1]&&E((()=>t[10].call(w))),y(r,"class","svelte-1vlz5gb"),y(n,"class","assess-table svelte-1vlz5gb"),y(j,"type","reset"),y(D,"type","submit"),y(z,"class","form-ctrl svelte-1vlz5gb")},m(l,c){u(l,e,c),i(e,n),i(n,r),i(r,s),i(r,o),i(r,a),i(r,b),i(r,_),i(r,w);for(let t=0;t<M.length;t+=1)M[t].m(w,null);x(w,t[1]),i(n,k);for(let t=0;t<H.length;t+=1)H[t].m(n,null);i(e,q),i(e,z),i(z,j),i(z,S),i(z,D),u(l,O,c),V&&V.m(l,c),u(l,C,c),L=!0,P||(N=[g(w,"change",t[10]),g(j,"click",v(t[7])),g(D,"click",v(t[8]))],P=!0)},p(t,e){if((!L||4&e)&&A!==(A=t[2].item.name_zh+"")&&$(b,A),32&e){let n;for(B=t[5],n=0;n<B.length;n+=1){const l=xe(t,B,n);M[n]?M[n].p(l,e):(M[n]=ke(l),M[n].c(),M[n].m(w,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=B.length}if(34&e&&x(w,t[1]),16&e){let l;for(T=t[4],l=0;l<T.length;l+=1){const r=_e(t,T,l);H[l]?H[l].p(r,e):(H[l]=qe(r),H[l].c(),H[l].m(n,null))}for(;l<H.length;l+=1)H[l].d(1);H.length=T.length}t[3]?V?(V.p(t,e),8&e&&I(V,1)):(V=ze(t),V.c(),I(V,1),V.m(C.parentNode,C)):V&&(J(),R(V,1,1,(()=>{V=null})),W())},i(t){L||(I(V),L=!0)},o(t){R(V),L=!1},d(t){t&&c(e),p(M,t),p(H,t),t&&c(O),V&&V.d(t),t&&c(C),P=!1,l(N)}}}function ke(e){let n,l,r,s=e[18]+"";return{c(){n=f("option"),l=m(s),n.__value=r=e[18],n.value=n.__value},m(t,e){u(t,n,e),i(n,l)},p:t,d(t){t&&c(n)}}}function qe(t){let e,n,r,s,o,a,p,h,v,x,w,k,q,z,j,S,D,O,C,L,P=t[15].prop+"",E=Se(t[15])+"";function N(){t[11].call(a,t[16],t[17])}function A(){t[12].call(k,t[16],t[17])}return{c(){e=f("tr"),n=f("th"),r=m(P),s=d(),o=f("td"),a=f("input"),v=d(),x=f("br"),w=d(),k=f("input"),j=d(),S=f("td"),D=m(E),O=d(),y(n,"class","svelte-1vlz5gb"),y(a,"type","number"),y(a,"max",p=t[15].max),y(a,"min",h=t[15].min),y(a,"step","1"),y(a,"class","svelte-1vlz5gb"),y(k,"type","range"),y(k,"max",q=t[15].max),y(k,"min",z=t[15].min),y(k,"step","1"),y(k,"class","svelte-1vlz5gb"),y(o,"class","text-center svelte-1vlz5gb"),y(S,"class","svelte-1vlz5gb")},m(l,c){u(l,e,c),i(e,n),i(n,r),i(e,s),i(e,o),i(o,a),_(a,t[15].value),i(o,v),i(o,x),i(o,w),i(o,k),_(k,t[15].value),i(e,j),i(e,S),i(S,D),i(e,O),C||(L=[g(a,"input",N),g(k,"change",A),g(k,"input",A)],C=!0)},p(e,n){t=e,16&n&&P!==(P=t[15].prop+"")&&$(r,P),16&n&&p!==(p=t[15].max)&&y(a,"max",p),16&n&&h!==(h=t[15].min)&&y(a,"min",h),16&n&&b(a.value)!==t[15].value&&_(a,t[15].value),16&n&&q!==(q=t[15].max)&&y(k,"max",q),16&n&&z!==(z=t[15].min)&&y(k,"min",z),16&n&&_(k,t[15].value),16&n&&E!==(E=Se(t[15])+"")&&$(D,E)},d(t){t&&c(e),C=!1,l(L)}}}function ze(t){let e,n;return e=new $e({props:{assessData:t[3]}}),{c(){G(e.$$.fragment)},m(t,l){U(e,t,l),n=!0},p(t,n){const l={};8&n&&(l.assessData=t[3]),e.$set(l)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){R(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function je(t){let e,n,r,s,o,a,p,m,h=t[2].item&&we(t);return{c(){e=f("div"),n=f("div"),r=d(),s=f("main"),h&&h.c(),y(n,"class","overlay svelte-1vlz5gb"),y(s,"class","content svelte-1vlz5gb"),y(e,"class","dialog svelte-1vlz5gb"),e.hidden=o=!t[2].open,y(e,"tabindex","-1")},m(l,o){u(l,e,o),i(e,n),i(e,r),i(e,s),h&&h.m(s,null),t[13](e),a=!0,p||(m=[g(n,"click",t[6]),g(e,"keydown",t[9])],p=!0)},p(t,[n]){t[2].item?h?(h.p(t,n),4&n&&I(h,1)):(h=we(t),h.c(),I(h,1),h.m(s,null)):h&&(J(),R(h,1,1,(()=>{h=null})),W()),(!a||4&n&&o!==(o=!t[2].open))&&(e.hidden=o)},i(t){a||(I(h),a=!0)},o(t){R(h),a=!1},d(n){n&&c(e),h&&h.d(),t[13](null),p=!1,l(m)}}}function Se(t){return`${(100*t.value/t.oValue).toFixed(1)}%`}function De(t,e,n){let l,r,s,o;a(t,mt,(t=>n(2,s=t)));const i=new Array(13).fill(1).map(((t,e)=>e+1));let u=1;function c(){n(3,r=null),function(t,e,n=e){t.set(n)}(mt,s={open:!1},s)}return t.$$.update=()=>{var e;7&t.$$.dirty&&s&&s.stats&&(e=s.stats,n(4,l=e.map((t=>{let[e,n]=[2*t.value,~~(.7*t.value)].sort(st);return{oProp:t.prop.split(".")[1],prop:et[t.prop]||t.prop,value:t.value,oValue:t.value,max:1===u?n:3*n,min:e}}))),setTimeout((()=>{o.querySelector("input")?.select()})))},n(4,l=[]),n(3,r=null),[o,u,s,r,l,i,c,function(){n(3,r=null),n(4,l=l.map((t=>({...t,value:t.oValue})))),n(1,u=1)},function(){if(n(3,r=null),!l.length)return;let t={id:s.item.id},e=l.reduce(((t,e)=>(e.value!==e.oValue&&(t[e.oProp]=e.value),t)),t);if(1===Object.keys(e).length){let t=l[0];e[t.oProp]=t.oValue}u>1&&(e.level=u),n(3,r=e)},function(t){"Escape"===t.code&&c()},function(){u=w(this),n(1,u),n(5,i)},function(t,e){t[e].value=b(this.value),n(4,l)},function(t,e){t[e].value=b(this.value),n(4,l)},function(t){D[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class Oe extends Y{constructor(t){super(),Q(this,t,De,je,s,{})}}function Ce(e){let n,l,r,s,o,a,i;return{c(){n=f("hr"),l=d(),r=f("hr"),s=d(),o=f("div"),o.textContent="Loading...",a=d(),i=f("hr"),y(o,"class","text-center")},m(t,e){u(t,n,e),u(t,l,e),u(t,r,e),u(t,s,e),u(t,o,e),u(t,a,e),u(t,i,e)},p:t,i:t,o:t,d(t){t&&c(n),t&&c(l),t&&c(r),t&&c(s),t&&c(o),t&&c(a),t&&c(i)}}}function Le(t){let e,n,l,r,s,o,a,i;return e=new Nt({}),s=new oe({props:{items:t[1]}}),a=new Oe({}),{c(){G(e.$$.fragment),n=d(),l=f("hr"),r=d(),G(s.$$.fragment),o=d(),G(a.$$.fragment)},m(t,c){U(e,t,c),u(t,n,c),u(t,l,c),u(t,r,c),U(s,t,c),u(t,o,c),U(a,t,c),i=!0},p(t,e){const n={};2&e&&(n.items=t[1]),s.$set(n)},i(t){i||(I(e.$$.fragment,t),I(s.$$.fragment,t),I(a.$$.fragment,t),i=!0)},o(t){R(e.$$.fragment,t),R(s.$$.fragment,t),R(a.$$.fragment,t),i=!1},d(t){Z(e,t),t&&c(n),t&&c(l),t&&c(r),Z(s,t),t&&c(o),Z(a,t)}}}function Pe(t){let e,n,l,r,s,o,a,p,m,h;const g=[Le,Ce],v=[];function b(t,e){return t[0]?0:1}return r=b(t),s=v[r]=g[r](t),{c(){e=f("div"),n=f("h1"),n.innerHTML='<a href="https://playorna.com/" target="_blank">Orna RPG</a> items lookup tool',l=d(),s.c(),o=d(),a=f("hr"),p=d(),m=f("footer"),m.innerHTML='* comment on <a href="https://docs.google.com/spreadsheets/d/1JZM_9U7hYtq39T0BeZHaUrJVKSWWNfxLxcZnrJPiHBQ/edit#gid=2050818910">Google spreadsheet</a> to update data <br/>\n  -- <br/>\n  * repo: <a href="https://github.com/rplus/orna-lookup" target="_blank">Rplus/orna-lookup</a>  <br/>\n  * origin data: <a href="https://orna.guide/" target="_blank">https://orna.guide/</a> api<br/>',y(n,"class","text-center"),y(e,"class","workspace svelte-h6ecfv"),y(m,"class","svelte-h6ecfv")},m(t,s){u(t,e,s),i(e,n),i(e,l),v[r].m(e,null),u(t,o,s),u(t,a,s),u(t,p,s),u(t,m,s),h=!0},p(t,[n]){let l=r;r=b(t),r===l?v[r].p(t,n):(J(),R(v[l],1,1,(()=>{v[l]=null})),W(),s=v[r],s?s.p(t,n):(s=v[r]=g[r](t),s.c()),I(s,1),s.m(e,null))},i(t){h||(I(s),h=!0)},o(t){R(s),h=!1},d(t){t&&c(e),v[r].d(),t&&c(o),t&&c(a),t&&c(p),t&&c(m)}}}function Ee(t,e,n){let l;a(t,pt,(t=>n(2,l=t)));let r=!1,s=[];return t.$$.update=()=>{5&t.$$.dirty&&(l.waiting||r||(n(0,r=!0),n(1,s=l.items)))},[r,s,l]}return new class extends Y{constructor(t){super(),Q(this,t,Ee,Pe,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
